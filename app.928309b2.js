parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"QVnC":[function(require,module,exports) {
var define;
var t,r=function(t){"use strict";var r,e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{u({},"")}catch(F){u=function(t,r,e){return t[r]=e}}function h(t,r,e,n){var o=r&&r.prototype instanceof g?r:g,i=Object.create(o.prototype),a=new G(n||[]);return i._invoke=function(t,r,e){var n=l;return function(o,i){if(n===p)throw new Error("Generator is already running");if(n===y){if("throw"===o)throw i;return T()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=j(a,e);if(c){if(c===v)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===l)throw n=y,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=p;var u=f(t,r,e);if("normal"===u.type){if(n=e.done?y:s,u.arg===v)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n=y,e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function f(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(F){return{type:"throw",arg:F}}}t.wrap=h;var l="suspendedStart",s="suspendedYield",p="executing",y="completed",v={};function g(){}function d(){}function m(){}var w={};u(w,i,function(){return this});var L=Object.getPrototypeOf,x=L&&L(L(N([])));x&&x!==e&&n.call(x,i)&&(w=x);var b=m.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach(function(r){u(t,r,function(t){return this._invoke(r,t)})})}function _(t,r){var e;this._invoke=function(o,i){function a(){return new r(function(e,a){!function e(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var h=u.arg,l=h.value;return l&&"object"==typeof l&&n.call(l,"__await")?r.resolve(l.__await).then(function(t){e("next",t,a,c)},function(t){e("throw",t,a,c)}):r.resolve(l).then(function(t){h.value=t,a(h)},function(t){return e("throw",t,a,c)})}c(u.arg)}(o,i,e,a)})}return e=e?e.then(a,a):a()}}function j(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,j(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,v;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,v):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function O(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function k(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function G(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function N(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}return{next:T}}function T(){return{value:r,done:!0}}return d.prototype=m,u(b,"constructor",m),u(m,"constructor",d),d.displayName=u(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===d||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,a,function(){return this}),t.AsyncIterator=_,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new _(h(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(b),u(b,c,"Generator"),u(b,i,function(){return this}),u(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,G.prototype={constructor:G,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),h=n.call(a,"finallyLoc");if(u&&h){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),v},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),k(e),v}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;k(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:N(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),v}},t}("object"==typeof module?module.exports:{});try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}
},{}],"h4Yu":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports._registerNode=exports.Konva=exports.glob=void 0;var n=Math.PI/180;function o(){return"undefined"!=typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window))}const i=void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{};exports.glob=i;const t={_global:i,version:"8.1.3",isBrowser:o(),isUnminified:/param/.test(function(e){}.toString()),dblClickWindow:400,getAngle:e=>t.angleDeg?e*n:e,enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:()=>t.DD.isDragging,isDragReady:()=>!!t.DD.node,document:i.document,_injectGlobal(e){i.Konva=e}};exports.Konva=t;const r=e=>{t[e.prototype.getClassName()]=e};exports._registerNode=r,t._injectGlobal(t);
},{}],"x014":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Util=exports.Transform=void 0;var e=require("./Global.js");class t{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new t(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){var t=this.m;return{x:t[0]*e.x+t[2]*e.y+t[4],y:t[1]*e.x+t[3]*e.y+t[5]}}translate(e,t){return this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t,this}scale(e,t){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t,this}rotate(e){var t=Math.cos(e),r=Math.sin(e),i=this.m[0]*t+this.m[2]*r,a=this.m[1]*t+this.m[3]*r,s=this.m[0]*-r+this.m[2]*t,o=this.m[1]*-r+this.m[3]*t;return this.m[0]=i,this.m[1]=a,this.m[2]=s,this.m[3]=o,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,t){var r=this.m[0]+this.m[2]*t,i=this.m[1]+this.m[3]*t,a=this.m[2]+this.m[0]*e,s=this.m[3]+this.m[1]*e;return this.m[0]=r,this.m[1]=i,this.m[2]=a,this.m[3]=s,this}multiply(e){var t=this.m[0]*e.m[0]+this.m[2]*e.m[1],r=this.m[1]*e.m[0]+this.m[3]*e.m[1],i=this.m[0]*e.m[2]+this.m[2]*e.m[3],a=this.m[1]*e.m[2]+this.m[3]*e.m[3],s=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],o=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=t,this.m[1]=r,this.m[2]=i,this.m[3]=a,this.m[4]=s,this.m[5]=o,this}invert(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,r=-this.m[1]*e,i=-this.m[2]*e,a=this.m[0]*e,s=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=t,this.m[1]=r,this.m[2]=i,this.m[3]=a,this.m[4]=s,this.m[5]=o,this}getMatrix(){return this.m}setAbsolutePosition(e,t){var r=this.m[0],i=this.m[1],a=this.m[2],s=this.m[3],o=this.m[4],n=(r*(t-this.m[5])-i*(e-o))/(r*s-i*a),l=(e-o-a*n)/r;return this.translate(l,n)}decompose(){var e=this.m[0],t=this.m[1],r=this.m[2],i=this.m[3],a=e*i-t*r;let s={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=e||0!=t){var o=Math.sqrt(e*e+t*t);s.rotation=t>0?Math.acos(e/o):-Math.acos(e/o),s.scaleX=o,s.scaleY=a/o,s.skewX=(e*r+t*i)/a,s.skewY=0}else if(0!=r||0!=i){var n=Math.sqrt(r*r+i*i);s.rotation=Math.PI/2-(i>0?Math.acos(-r/n):-Math.acos(r/n)),s.scaleX=a/n,s.scaleY=n,s.skewX=0,s.skewY=(e*r+t*i)/a}return s.rotation=v._getRotation(s.rotation),s}}exports.Transform=t;var r="[object Array]",i="[object Number]",a="[object String]",s="[object Boolean]",o=Math.PI/180,n=180/Math.PI,l="#",h="",m="0",g="Konva warning: ",u="Konva error: ",c="rgb(",d={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},b=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,p=[];const y="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||function(e){setTimeout(e,60)},v={_isElement:e=>!(!e||1!=e.nodeType),_isFunction:e=>!!(e&&e.constructor&&e.call&&e.apply),_isPlainObject:e=>!!e&&e.constructor===Object,_isArray:e=>Object.prototype.toString.call(e)===r,_isNumber:e=>Object.prototype.toString.call(e)===i&&!isNaN(e)&&isFinite(e),_isString:e=>Object.prototype.toString.call(e)===a,_isBoolean:e=>Object.prototype.toString.call(e)===s,isObject:e=>e instanceof Object,isValidSelector(e){if("string"!=typeof e)return!1;var t=e[0];return"#"===t||"."===t||t===t.toUpperCase()},_sign:e=>0===e?1:e>0?1:-1,requestAnimFrame(e){p.push(e),1===p.length&&y(function(){const e=p;p=[],e.forEach(function(e){e()})})},createCanvasElement(){var e=document.createElement("canvas");try{e.style=e.style||{}}catch(t){}return e},createImageElement:()=>document.createElement("img"),_isInDocument(e){for(;e=e.parentNode;)if(e==document)return!0;return!1},_urlToImage(e,t){var r=v.createImageElement();r.onload=function(){t(r)},r.src=e},_rgbToHex:(e,t,r)=>((1<<24)+(e<<16)+(t<<8)+r).toString(16).slice(1),_hexToRgb(e){e=e.replace(l,h);var t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:255&t}},getRandomColor(){for(var e=(16777215*Math.random()<<0).toString(16);e.length<6;)e=m+e;return l+e},getRGB(e){var t;return e in d?{r:(t=d[e])[0],g:t[1],b:t[2]}:e[0]===l?this._hexToRgb(e.substring(1)):e.substr(0,4)===c?(t=b.exec(e.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA:e=>(e=e||"black",v._namedColorToRBA(e)||v._hex3ColorToRGBA(e)||v._hex6ColorToRGBA(e)||v._rgbColorToRGBA(e)||v._rgbaColorToRGBA(e)||v._hslColorToRGBA(e)),_namedColorToRBA(e){var t=d[e.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(e){if(0===e.indexOf("rgb(")){var t=(e=e.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(e){if(0===e.indexOf("rgba(")){var t=(e=e.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex6ColorToRGBA(e){if("#"===e[0]&&7===e.length)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1}},_hex3ColorToRGBA(e){if("#"===e[0]&&4===e.length)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:1}},_hslColorToRGBA(e){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(e)){const[t,...r]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e),i=Number(r[0])/360,a=Number(r[1])/100,s=Number(r[2])/100;let o,n,l;if(0===a)return l=255*s,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};const h=2*s-(o=s<.5?s*(1+a):s+a-s*a),m=[0,0,0];for(let e=0;e<3;e++)(n=i+1/3*-(e-1))<0&&n++,n>1&&n--,l=6*n<1?h+6*(o-h)*n:2*n<1?o:3*n<2?h+(o-h)*(2/3-n)*6:h,m[e]=255*l;return{r:Math.round(m[0]),g:Math.round(m[1]),b:Math.round(m[2]),a:1}}},haveIntersection:(e,t)=>!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y),cloneObject(e){var t={};for(var r in e)this._isPlainObject(e[r])?t[r]=this.cloneObject(e[r]):this._isArray(e[r])?t[r]=this.cloneArray(e[r]):t[r]=e[r];return t},cloneArray:e=>e.slice(0),degToRad:e=>e*o,radToDeg:e=>e*n,_degToRad:e=>(v.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),v.degToRad(e)),_radToDeg:e=>(v.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),v.radToDeg(e)),_getRotation:t=>e.Konva.angleDeg?v.radToDeg(t):t,_capitalize:e=>e.charAt(0).toUpperCase()+e.slice(1),throw(e){throw new Error(u+e)},error(e){console.error(u+e)},warn(t){e.Konva.showWarnings&&console.warn(g+t)},each(e,t){for(var r in e)t(r,e[r])},_inRange:(e,t,r)=>t<=e&&e<r,_getProjectionToSegment(e,t,r,i,a,s){var o,n,l,h=(e-r)*(e-r)+(t-i)*(t-i);if(0==h)o=e,n=t,l=(a-r)*(a-r)+(s-i)*(s-i);else{var m=((a-e)*(r-e)+(s-t)*(i-t))/h;m<0?(o=e,n=t,l=(e-a)*(e-a)+(t-s)*(t-s)):m>1?(o=r,n=i,l=(r-a)*(r-a)+(i-s)*(i-s)):l=((o=e+m*(r-e))-a)*(o-a)+((n=t+m*(i-t))-s)*(n-s)}return[o,n,l]},_getProjectionToLine(e,t,r){var i=v.cloneObject(e),a=Number.MAX_VALUE;return t.forEach(function(s,o){if(r||o!==t.length-1){var n=t[(o+1)%t.length],l=v._getProjectionToSegment(s.x,s.y,n.x,n.y,e.x,e.y),h=l[0],m=l[1],g=l[2];g<a&&(i.x=h,i.y=m,a=g)}}),i},_prepareArrayForTween(e,t,r){var i,a=[],s=[];if(e.length>t.length){var o=t;t=e,e=o}for(i=0;i<e.length;i+=2)a.push({x:e[i],y:e[i+1]});for(i=0;i<t.length;i+=2)s.push({x:t[i],y:t[i+1]});var n=[];return s.forEach(function(e){var t=v._getProjectionToLine(e,a,r);n.push(t.x),n.push(t.y)}),n},_prepareToStringify(e){var t;for(var r in e.visitedByCircularReferenceRemoval=!0,e)if(e.hasOwnProperty(r)&&e[r]&&"object"==typeof e[r])if(t=Object.getOwnPropertyDescriptor(e,r),e[r].visitedByCircularReferenceRemoval||v._isElement(e[r])){if(!t.configurable)return null;delete e[r]}else if(null===v._prepareToStringify(e[r])){if(!t.configurable)return null;delete e[r]}return delete e.visitedByCircularReferenceRemoval,e},_assign(e,t){for(var r in t)e[r]=t[r];return e},_getFirstPointerId:e=>e.touches?e.changedTouches[0].identifier:999};exports.Util=v;
},{"./Global.js":"h4Yu"}],"QpE5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RGBComponent=r,exports.alphaComponent=n,exports.getNumberValidator=a,exports.getNumberOrArrayOfNumbersValidator=o,exports.getNumberOrAutoValidator=u,exports.getStringValidator=l,exports.getStringOrGradientValidator=s,exports.getFunctionValidator=f,exports.getNumberArrayValidator=b,exports.getBooleanValidator=d,exports.getComponentValidator=c;var t=require("./Global.js"),i=require("./Util.js");function e(t){return i.Util._isString(t)?'"'+t+'"':"[object Number]"===Object.prototype.toString.call(t)?t:i.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}function r(t){return t>255?255:t<0?0:Math.round(t)}function n(t){return t>1?1:t<1e-4?1e-4:t}function a(){if(t.Konva.isUnminified)return function(t,r){return i.Util._isNumber(t)||i.Util.warn(e(t)+' is a not valid value for "'+r+'" attribute. The value should be a number.'),t}}function o(r){if(t.Konva.isUnminified)return function(t,n){let a=i.Util._isNumber(t),o=i.Util._isArray(t)&&t.length==r;return a||o||i.Util.warn(e(t)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+r+")"),t}}function u(){if(t.Konva.isUnminified)return function(t,r){return i.Util._isNumber(t)||"auto"===t||i.Util.warn(e(t)+' is a not valid value for "'+r+'" attribute. The value should be a number or "auto".'),t}}function l(){if(t.Konva.isUnminified)return function(t,r){return i.Util._isString(t)||i.Util.warn(e(t)+' is a not valid value for "'+r+'" attribute. The value should be a string.'),t}}function s(){if(t.Konva.isUnminified)return function(t,r){const n=i.Util._isString(t),a="[object CanvasGradient]"===Object.prototype.toString.call(t)||t&&t.addColorStop;return n||a||i.Util.warn(e(t)+' is a not valid value for "'+r+'" attribute. The value should be a string or a native gradient.'),t}}function f(){if(t.Konva.isUnminified)return function(t,r){return i.Util._isFunction(t)||i.Util.warn(e(t)+' is a not valid value for "'+r+'" attribute. The value should be a function.'),t}}function b(){if(t.Konva.isUnminified)return function(t,r){return i.Util._isArray(t)?t.forEach(function(t){i.Util._isNumber(t)||i.Util.warn('"'+r+'" attribute has non numeric element '+t+". Make sure that all elements are numbers.")}):i.Util.warn(e(t)+' is a not valid value for "'+r+'" attribute. The value should be a array of numbers.'),t}}function d(){if(t.Konva.isUnminified)return function(t,r){return!0===t||!1===t||i.Util.warn(e(t)+' is a not valid value for "'+r+'" attribute. The value should be a boolean.'),t}}function c(r){if(t.Konva.isUnminified)return function(t,n){return i.Util.isObject(t)||i.Util.warn(e(t)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+r),t}}
},{"./Global.js":"h4Yu","./Util.js":"x014"}],"OqKZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Factory=void 0;var t=require("./Util.js"),e=require("./Validators.js"),r="get",i="set";const o={addGetterSetter(t,e,r,i,a){o.addGetter(t,e,r),o.addSetter(t,e,i,a),o.addOverloadedGetterSetter(t,e)},addGetter(e,i,o){var a=r+t.Util._capitalize(i);e.prototype[a]=e.prototype[a]||function(){var t=this.attrs[i];return void 0===t?o:t}},addSetter(e,r,a,d){var l=i+t.Util._capitalize(r);e.prototype[l]||o.overWriteSetter(e,r,a,d)},overWriteSetter(e,r,o,a){var d=i+t.Util._capitalize(r);e.prototype[d]=function(t){return o&&null!=t&&(t=o.call(this,t,r)),this._setAttr(r,t),a&&a.call(this),this}},addComponentsGetterSetter(a,d,l,p,n){var s,c,v=l.length,h=t.Util._capitalize,u=r+h(d),y=i+h(d);a.prototype[u]=function(){var t={};for(s=0;s<v;s++)t[c=l[s]]=this.getAttr(d+h(c));return t};var f=(0,e.getComponentValidator)(l);a.prototype[y]=function(t){var e,r=this.attrs[d];for(e in p&&(t=p.call(this,t)),f&&f.call(this,t,d),t)t.hasOwnProperty(e)&&this._setAttr(d+h(e),t[e]);return this._fireChangeEvent(d,r,t),n&&n.call(this),this},o.addOverloadedGetterSetter(a,d)},addOverloadedGetterSetter(e,o){var a=t.Util._capitalize(o),d=i+a,l=r+a;e.prototype[o]=function(){return arguments.length?(this[d](arguments[0]),this):this[l]()}},addDeprecatedGetterSetter(e,i,a,d){t.Util.error("Adding deprecated "+i);var l=r+t.Util._capitalize(i),p=i+" property is deprecated and will be removed soon. Look at Konva change log for more information.";e.prototype[l]=function(){t.Util.error(p);var e=this.attrs[i];return void 0===e?a:e},o.addSetter(e,i,d,function(){t.Util.error(p)}),o.addOverloadedGetterSetter(e,i)},backCompat(e,o){t.Util.each(o,function(o,a){var d=e.prototype[a],l=r+t.Util._capitalize(o),p=i+t.Util._capitalize(o);function n(){d.apply(this,arguments),t.Util.error('"'+o+'" method is deprecated and will be removed soon. Use ""'+a+'" instead.')}e.prototype[o]=n,e.prototype[l]=n,e.prototype[p]=n})},afterSetFilter(){this._filterUpToDate=!1}};exports.Factory=o;
},{"./Util.js":"x014","./Validators.js":"QpE5"}],"JCy7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HitContext=exports.SceneContext=exports.Context=void 0;var t=require("./Util.js"),e=require("./Global.js");function a(e){var a,i,r=[],s=e.length,o=t.Util;for(a=0;a<s;a++)i=e[a],o._isNumber(i)?i=Math.round(1e3*i)/1e3:o._isString(i)||(i+=""),r.push(i);return r}var i=",",r="(",s=")",o="([",l="])",n=";",h="()",c="=",_=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],f=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const d=100;class x{constructor(t){this.canvas=t,this._context=t._canvas.getContext("2d"),e.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(e,a){var _,f,d,x,g=this.traceArr,p=g.length,v="";for(_=0;_<p;_++)(d=(f=g[_]).method)?(x=f.args,v+=d,e?v+=h:t.Util._isArray(x[0])?v+=o+x.join(i)+l:(a&&(x=x.map(t=>"number"==typeof t?Math.floor(t):t)),v+=r+x.join(i)+s)):(v+=f.property,e||(v+=c+f.val)),v+=n;return v}clearTrace(){this.traceArr=[]}_trace(t){var e=this.traceArr;e.push(t),e.length>=d&&e.shift()}reset(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)}_applyLineCap(t){var e=t.getLineCap();e&&this.setAttr("lineCap",e)}_applyOpacity(t){var e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)}_applyLineJoin(t){var e=t.attrs.lineJoin;e&&this.setAttr("lineJoin",e)}setAttr(t,e){this._context[t]=e}arc(t,e,a,i,r,s){this._context.arc(t,e,a,i,r,s)}arcTo(t,e,a,i,r){this._context.arcTo(t,e,a,i,r)}beginPath(){this._context.beginPath()}bezierCurveTo(t,e,a,i,r,s){this._context.bezierCurveTo(t,e,a,i,r,s)}clearRect(t,e,a,i){this._context.clearRect(t,e,a,i)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(t,e){var a=arguments;return 2===a.length?this._context.createImageData(t,e):1===a.length?this._context.createImageData(t):void 0}createLinearGradient(t,e,a,i){return this._context.createLinearGradient(t,e,a,i)}createPattern(t,e){return this._context.createPattern(t,e)}createRadialGradient(t,e,a,i,r,s){return this._context.createRadialGradient(t,e,a,i,r,s)}drawImage(t,e,a,i,r,s,o,l,n){var h=arguments,c=this._context;3===h.length?c.drawImage(t,e,a):5===h.length?c.drawImage(t,e,a,i,r):9===h.length&&c.drawImage(t,e,a,i,r,s,o,l,n)}ellipse(t,e,a,i,r,s,o,l){this._context.ellipse(t,e,a,i,r,s,o,l)}isPointInPath(t,e){return this._context.isPointInPath(t,e)}fill(t){t?this._context.fill(t):this._context.fill()}fillRect(t,e,a,i){this._context.fillRect(t,e,a,i)}strokeRect(t,e,a,i){this._context.strokeRect(t,e,a,i)}fillText(t,e,a,i){i?this._context.fillText(t,e,a,i):this._context.fillText(t,e,a)}measureText(t){return this._context.measureText(t)}getImageData(t,e,a,i){return this._context.getImageData(t,e,a,i)}lineTo(t,e){this._context.lineTo(t,e)}moveTo(t,e){this._context.moveTo(t,e)}rect(t,e,a,i){this._context.rect(t,e,a,i)}putImageData(t,e,a){this._context.putImageData(t,e,a)}quadraticCurveTo(t,e,a,i){this._context.quadraticCurveTo(t,e,a,i)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,e){this._context.scale(t,e)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,e,a,i,r,s){this._context.setTransform(t,e,a,i,r,s)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,e,a,i){this._context.strokeText(t,e,a,i)}transform(t,e,a,i,r,s){this._context.transform(t,e,a,i,r,s)}translate(t,e){this._context.translate(t,e)}_enableTrace(){var t,e,i=this,r=_.length,s=this.setAttr,o=function(t){var r,s=i[t];i[t]=function(){return e=a(Array.prototype.slice.call(arguments,0)),r=s.apply(i,arguments),i._trace({method:t,args:e}),r}};for(t=0;t<r;t++)o(_[t]);i.setAttr=function(){s.apply(i,arguments);var t=arguments[0],e=arguments[1];"shadowOffsetX"!==t&&"shadowOffsetY"!==t&&"shadowBlur"!==t||(e/=this.canvas.getPixelRatio()),i._trace({property:t,val:e})}}_applyGlobalCompositeOperation(t){const e=t.attrs.globalCompositeOperation;!e||"source-over"===e||this.setAttr("globalCompositeOperation",e)}}exports.Context=x,f.forEach(function(t){Object.defineProperty(x.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});class g extends x{_fillColor(t){var e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){var e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fillRadialGradient(t){var e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fill(t){var e=t.fill(),a=t.getFillPriority();if(e&&"color"===a)this._fillColor(t);else{var i=t.getFillPatternImage();if(i&&"pattern"===a)this._fillPattern(t);else{var r=t.getFillLinearGradientColorStops();if(r&&"linear-gradient"===a)this._fillLinearGradient(t);else{var s=t.getFillRadialGradientColorStops();s&&"radial-gradient"===a?this._fillRadialGradient(t):e?this._fillColor(t):i?this._fillPattern(t):r?this._fillLinearGradient(t):s&&this._fillRadialGradient(t)}}}}_strokeLinearGradient(t){var e=t.getStrokeLinearGradientStartPoint(),a=t.getStrokeLinearGradientEndPoint(),i=t.getStrokeLinearGradientColorStops(),r=this.createLinearGradient(e.x,e.y,a.x,a.y);if(i){for(var s=0;s<i.length;s+=2)r.addColorStop(i[s],i[s+1]);this.setAttr("strokeStyle",r)}}_stroke(t){var e=t.dash(),a=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!a){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),a||this.restore()}}_applyShadow(t){var e,a,i,r=null!==(e=t.getShadowRGBA())&&void 0!==e?e:"black",s=null!==(a=t.getShadowBlur())&&void 0!==a?a:5,o=null!==(i=t.getShadowOffset())&&void 0!==i?i:{x:0,y:0},l=t.getAbsoluteScale(),n=this.canvas.getPixelRatio(),h=l.x*n,c=l.y*n;this.setAttr("shadowColor",r),this.setAttr("shadowBlur",s*Math.min(Math.abs(h),Math.abs(c))),this.setAttr("shadowOffsetX",o.x*h),this.setAttr("shadowOffsetY",o.y*c)}}exports.SceneContext=g;class p extends x{_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){var e=t.getStrokeScaleEnabled();if(!e){this.save();var a=this.getCanvas().getPixelRatio();this.setTransform(a,0,0,a,0,0)}this._applyLineCap(t);var i=t.hitStrokeWidth(),r="auto"===i?t.strokeWidth():i;this.setAttr("lineWidth",r),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore()}}}exports.HitContext=p;
},{"./Util.js":"x014","./Global.js":"h4Yu"}],"ZrUi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HitCanvas=exports.SceneCanvas=exports.Canvas=void 0;var t,e=require("./Util.js"),i=require("./Context.js"),s=require("./Global.js"),a=require("./Factory.js"),h=require("./Validators.js");function o(){if(t)return t;var i=e.Util.createCanvasElement().getContext("2d");return t=(s.Konva._global.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)}class r{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var i=(t||{}).pixelRatio||s.Konva.pixelRatio||o();this.pixelRatio=i,this._canvas=e.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){var e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,e){this.setWidth(t||0),this.setHeight(e||0)}toDataURL(t,i){try{return this._canvas.toDataURL(t,i)}catch(s){try{return this._canvas.toDataURL()}catch(a){return e.Util.error("Unable to get data URL. "+a.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}exports.Canvas=r,a.Factory.addGetterSetter(r,"pixelRatio",void 0,(0,h.getNumberValidator)());class n extends r{constructor(t={width:0,height:0}){super(t),this.context=new i.SceneContext(this),this.setSize(t.width,t.height)}}exports.SceneCanvas=n;class c extends r{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new i.HitContext(this),this.setSize(t.width,t.height)}}exports.HitCanvas=c;
},{"./Util.js":"x014","./Context.js":"JCy7","./Global.js":"h4Yu","./Factory.js":"OqKZ","./Validators.js":"QpE5"}],"zIBW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DD=void 0;var e=require("./Global.js"),t=require("./Util.js");const r={get isDragging(){var e=!1;return r._dragElements.forEach(t=>{"dragging"===t.dragStatus&&(e=!0)}),e},justDragged:!1,get node(){var e;return r._dragElements.forEach(t=>{e=t.node}),e},_dragElements:new Map,_drag(e){const n=[];r._dragElements.forEach((r,a)=>{const{node:d}=r,o=d.getStage();o.setPointersPositions(e),void 0===r.pointerId&&(r.pointerId=t.Util._getFirstPointerId(e));const s=o._changedPointerPositions.find(e=>e.id===r.pointerId);if(s){if("dragging"!==r.dragStatus){var i=d.dragDistance();if(Math.max(Math.abs(s.x-r.startPointerPos.x),Math.abs(s.y-r.startPointerPos.y))<i)return;if(d.startDrag({evt:e}),!d.isDragging())return}d._setDragPosition(e,r),n.push(d)}}),n.forEach(t=>{t.fire("dragmove",{type:"dragmove",target:t,evt:e},!0)})},_endDragBefore(t){r._dragElements.forEach(n=>{const{node:a}=n,d=a.getStage();if(t&&d.setPointersPositions(t),!d._changedPointerPositions.find(e=>e.id===n.pointerId))return;"dragging"!==n.dragStatus&&"stopped"!==n.dragStatus||(r.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,n.dragStatus="stopped");const o=n.node.getLayer()||n.node instanceof e.Konva.Stage&&n.node;o&&o.batchDraw()})},_endDragAfter(e){r._dragElements.forEach((t,n)=>{"stopped"===t.dragStatus&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:e},!0),"dragging"!==t.dragStatus&&r._dragElements.delete(n)})}};exports.DD=r,e.Konva.isBrowser&&(window.addEventListener("mouseup",r._endDragBefore,!0),window.addEventListener("touchend",r._endDragBefore,!0),window.addEventListener("mousemove",r._drag),window.addEventListener("touchmove",r._drag),window.addEventListener("mouseup",r._endDragAfter,!1),window.addEventListener("touchend",r._endDragAfter,!1));
},{"./Global.js":"h4Yu","./Util.js":"x014"}],"aBpx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Node=void 0;var t=require("./Util.js"),e=require("./Factory.js"),i=require("./Canvas.js"),s=require("./Global.js"),r=require("./DragAndDrop.js"),a=require("./Validators.js"),n="absoluteOpacity",h="allEventListeners",o="absoluteTransform",l="absoluteScale",c="canvas",g="Change",d="children",f="konva",u="listening",p="mouseenter",_="mouseleave",v="name",m="set",y="Shape",C=" ",b="stage",x="transform",D="Stage",w="visible",A=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(C);let S=1;class T{constructor(t){this._id=S++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){t!==x&&t!==o||!this._cache.get(t)?t?this._cache.delete(t):this._cache.clear():this._cache.get(t).dirty=!0}_getCache(t,e){var i=this._cache.get(t);return(void 0===i||(t===x||t===o)&&!0===i.dirty)&&(i=e.call(this),this._cache.set(t,i)),i}_calculate(t,e,i){if(!this._attachedDepsListeners.get(t)){const i=e.map(t=>t+"Change.konva").join(C);this.on(i,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,i)}_getCanvasCache(){return this._cache.get(c)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===o&&this.fire("absoluteTransformChange")}clearCache(){return this._cache.delete(c),this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var s=e||{},r={};void 0!==s.x&&void 0!==s.y&&void 0!==s.width&&void 0!==s.height||(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var a=Math.ceil(s.width||r.width),h=Math.ceil(s.height||r.height),o=s.pixelRatio,g=void 0===s.x?r.x:s.x,d=void 0===s.y?r.y:s.y,f=s.offset||0,u=s.drawBorder||!1,p=s.hitCanvasPixelRatio||1;if(a&&h){a+=2*f,h+=2*f,g-=f,d-=f;var _=new i.SceneCanvas({pixelRatio:o,width:a,height:h}),v=new i.SceneCanvas({pixelRatio:o,width:0,height:0}),m=new i.HitCanvas({pixelRatio:p,width:a,height:h}),y=_.getContext(),C=m.getContext();return m.isCache=!0,_.isCache=!0,this._cache.delete(c),this._filterUpToDate=!1,!1===s.imageSmoothingEnabled&&(_.getContext()._context.imageSmoothingEnabled=!1,v.getContext()._context.imageSmoothingEnabled=!1),y.save(),C.save(),y.translate(-g,-d),C.translate(-g,-d),this._isUnderCache=!0,this._clearSelfAndDescendantCache(n),this._clearSelfAndDescendantCache(l),this.drawScene(_,this),this.drawHit(m,this),this._isUnderCache=!1,y.restore(),C.restore(),u&&(y.save(),y.beginPath(),y.rect(0,0,a,h),y.closePath(),y.setAttr("strokeStyle","red"),y.setAttr("lineWidth",5),y.stroke(),y.restore()),this._cache.set(c,{scene:_,filter:v,hit:m,x:g,y:d}),this._requestDraw(),this}t.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")}isCached(){return this._cache.has(c)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,e){var i,s,r,a,n=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],h=this.getAbsoluteTransform(e);return n.forEach(function(t){var e=h.point(t);void 0===i&&(i=r=e.x,s=a=e.y),i=Math.min(i,e.x),s=Math.min(s,e.y),r=Math.max(r,e.x),a=Math.max(a,e.y)}),{x:i,y:s,width:r-i,height:a-s}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const e=this._getCanvasCache();t.translate(e.x,e.y);var i=this._getCachedSceneCanvas(),s=i.pixelRatio;t.drawImage(i._canvas,0,0,i.width/s,i.height/s),t.restore()}_drawCachedHitCanvas(t){var e=this._getCanvasCache(),i=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),t.restore()}_getCachedSceneCanvas(){var e,i,s,r,a=this.filters(),n=this._getCanvasCache(),h=n.scene,o=n.filter,l=o.getContext();if(a){if(!this._filterUpToDate){var c=h.pixelRatio;o.setSize(h.width/h.pixelRatio,h.height/h.pixelRatio);try{for(e=a.length,l.clear(),l.drawImage(h._canvas,0,0,h.getWidth()/c,h.getHeight()/c),i=l.getImageData(0,0,o.getWidth(),o.getHeight()),s=0;s<e;s++)"function"==typeof(r=a[s])?(r.call(this,i),l.putImageData(i,0,0)):t.Util.error("Filter should be type of function, but got "+typeof r+" instead. Please check correct filters")}catch(g){t.Util.error("Unable to apply filter. "+g.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return o}return h}on(t,e){if(this._cache&&this._cache.delete(h),3===arguments.length)return this._delegate.apply(this,arguments);var i,s,r,a,n=t.split(C),o=n.length;for(i=0;i<o;i++)r=(s=n[i].split("."))[0],a=s[1]||"",this.eventListeners[r]||(this.eventListeners[r]=[]),this.eventListeners[r].push({name:a,handler:e});return this}off(t,e){var i,s,r,a,n,o=(t||"").split(C),l=o.length;if(this._cache&&this._cache.delete(h),!t)for(s in this.eventListeners)this._off(s);for(i=0;i<l;i++)if(a=(r=o[i].split("."))[0],n=r[1],a)this.eventListeners[a]&&this._off(a,n,e);else for(s in this.eventListeners)this._off(s,n,e);return this}dispatchEvent(t){var e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this}addEventListener(t,e){return this.on(t,function(t){e.call(this,t.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(e,i,s){var r=this;this.on(e,function(e){for(var a=e.target.findAncestors(i,!0,r),n=0;n<a.length;n++)(e=t.Util.cloneObject(e)).currentTarget=a[n],s.call(a[n],e)})}remove(){return this.isDragging()&&this.stopDrag(),r.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(o),this._clearSelfAndDescendantCache(n),this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(b),this._clearSelfAndDescendantCache(w),this._clearSelfAndDescendantCache(u)}_remove(){this._clearCaches();var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this}getAttr(e){var i="get"+t.Util._capitalize(e);return t.Util._isFunction(this[i])?this[i]():this.attrs[e]}getAncestors(){for(var t=this.getParent(),e=[];t;)e.push(t),t=t.getParent();return e}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var i,s;if(!e)return this;for(i in e)i!==d&&(s=m+t.Util._capitalize(i),t.Util._isFunction(this[s])?this[s](e[i]):this._setAttr(i,e[i]))}),this}isListening(){return this._getCache(u,this._isListening)}_isListening(t){if(!this.listening())return!1;const e=this.getParent();return!e||e===t||this===t||e._isListening(t)}isVisible(){return this._getCache(w,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const e=this.getParent();return!e||e===t||this===t||e._isVisible(t)}shouldDrawHit(t,e=!1){if(t)return this._isVisible(t)&&this._isListening(t);var i=this.getLayer(),a=!1;r.DD._dragElements.forEach(t=>{"dragging"===t.dragStatus&&("Stage"===t.node.nodeType?a=!0:t.node.getLayer()===i&&(a=!0))});var n=!e&&!s.Konva.hitOnDragEnabled&&a;return this.isListening()&&this.isVisible()&&!n}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var t,e,i,s,r=this.getDepth(),a=this,n=0;return a.nodeType!==D&&function h(o){for(t=[],e=o.length,i=0;i<e;i++)s=o[i],n++,s.nodeType!==y&&(t=t.concat(s.getChildren().slice())),s._id===a._id&&(i=e);t.length>0&&t[0].getDepth()<=r&&h(t)}(a.getStage().getChildren()),n}getDepth(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(x),this._clearSelfAndDescendantCache(o)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var t=this.getStage().getPointerPosition();if(!t)return null;var e=this.getAbsoluteTransform().copy();return e.invert(),e.point(t)}getAbsolutePosition(e){let i=!1,s=this.parent;for(;s;){if(s.isCached()){i=!0;break}s=s.parent}i&&!e&&(e=!0);var r=this.getAbsoluteTransform(e).getMatrix(),a=new t.Transform,n=this.offset();return a.m=r.slice(),a.translate(n.x,n.y),a.getTranslation()}setAbsolutePosition(t){var e=this._clearTransform();this.attrs.x=e.x,this.attrs.y=e.y,delete e.x,delete e.y,this._clearCache(x);var i=this._getAbsoluteTransform().copy();return i.invert(),i.translate(t.x,t.y),t={x:this.attrs.x+i.getTranslation().x,y:this.attrs.y+i.getTranslation().y},this._setTransform(e),this.setPosition({x:t.x,y:t.y}),this._clearCache(x),this._clearSelfAndDescendantCache(o),this}_setTransform(t){var e;for(e in t)this.attrs[e]=t[e]}_clearTransform(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){var e=t.x,i=t.y,s=this.x(),r=this.y();return void 0!==e&&(s+=e),void 0!==i&&(r+=i),this.setPosition({x:s,y:r}),this}_eachAncestorReverse(t,e){var i,s,r=[],a=this.getParent();if(!e||e._id!==this._id){for(r.unshift(this);a&&(!e||a._id!==e._id);)r.unshift(a),a=a.parent;for(i=r.length,s=0;s<i;s++)t(r[s])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return t.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index;return this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0}moveUp(){if(!this.parent)return t.Util.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index;return e<this.parent.getChildren().length-1&&(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0)}moveDown(){if(!this.parent)return t.Util.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0)}moveToBottom(){if(!this.parent)return t.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}setZIndex(e){if(!this.parent)return t.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&t.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var i=this.index;return this.parent.children.splice(i,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(n,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var t=this.opacity(),e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){var e,i,s,r,a={},n=this.getAttrs();for(e in a.attrs={},n)i=n[e],t.Util.isObject(i)&&!t.Util._isPlainObject(i)&&!t.Util._isArray(i)||(s="function"==typeof this[e]&&this[e],delete n[e],r=s?s.call(this):null,n[e]=i,r!==i&&(a.attrs[e]=i));return a.className=this.getClassName(),t.Util._prepareToStringify(a)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,e,i){var s=[];e&&this._isMatch(t)&&s.push(this);for(var r=this.parent;r;){if(r===i)return s;r._isMatch(t)&&s.push(r),r=r.parent}return s}isAncestorOf(t){return!1}findAncestor(t,e,i){return this.findAncestors(t,e,i)[0]}_isMatch(e){if(!e)return!1;if("function"==typeof e)return e(this);var i,s,r=e.replace(/ /g,"").split(","),a=r.length;for(i=0;i<a;i++)if(s=r[i],t.Util.isValidSelector(s)||(t.Util.warn('Selector "'+s+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),t.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),t.Util.warn("Konva is awesome, right?")),"#"===s.charAt(0)){if(this.id()===s.slice(1))return!0}else if("."===s.charAt(0)){if(this.hasName(s.slice(1)))return!0}else if(this.className===s||this.nodeType===s)return!0;return!1}getLayer(){var t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(b,this._getStage)}_getStage(){var t=this.getParent();return t?t.getStage():void 0}fire(t,e={},i){return e.target=e.target||this,i?this._fireAndBubble(t,e):this._fire(t,e),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(o,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var i;if(e)return i=new t.Transform,this._eachAncestorReverse(function(t){var e=t.transformsEnabled();"all"===e?i.multiply(t.getTransform()):"position"===e&&i.translate(t.x()-t.offsetX(),t.y()-t.offsetY())},e),i;i=this._cache.get(o)||new t.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(i):i.reset();var s=this.transformsEnabled();if("all"===s)i.multiply(this.getTransform());else if("position"===s){const t=this.attrs.x||0,e=this.attrs.y||0,s=this.attrs.offsetX||0,r=this.attrs.offsetY||0;i.translate(t-s,e-r)}return i.dirty=!1,i}getAbsoluteScale(t){for(var e=this;e;)e._isUnderCache&&(t=e),e=e.getParent();const i=this.getAbsoluteTransform(t).decompose();return{x:i.scaleX,y:i.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(x,this._getTransform)}_getTransform(){var e,i,r=this._cache.get(x)||new t.Transform;r.reset();var a=this.x(),n=this.y(),h=s.Konva.getAngle(this.rotation()),o=null!==(e=this.attrs.scaleX)&&void 0!==e?e:1,l=null!==(i=this.attrs.scaleY)&&void 0!==i?i:1,c=this.attrs.skewX||0,g=this.attrs.skewY||0,d=this.attrs.offsetX||0,f=this.attrs.offsetY||0;return 0===a&&0===n||r.translate(a,n),0!==h&&r.rotate(h),0===c&&0===g||r.skew(c,g),1===o&&1===l||r.scale(o,l),0===d&&0===f||r.translate(-1*d,-1*f),r.dirty=!1,r}clone(e){var i,s,r,a,n,h=t.Util.cloneObject(this.attrs);for(i in e)h[i]=e[i];var o=new this.constructor(h);for(i in this.eventListeners)for(r=(s=this.eventListeners[i]).length,a=0;a<r;a++)(n=s[a]).name.indexOf(f)<0&&(o.eventListeners[i]||(o.eventListeners[i]=[]),o.eventListeners[i].push(n));return o}_toKonvaCanvas(t){t=t||{};var e=this.getClientRect(),s=this.getStage(),r=void 0!==t.x?t.x:e.x,a=void 0!==t.y?t.y:e.y,n=t.pixelRatio||1,h=new i.SceneCanvas({width:t.width||e.width||(s?s.width():0),height:t.height||e.height||(s?s.height():0),pixelRatio:n}),o=h.getContext();return o.save(),(r||a)&&o.translate(-1*r,-1*a),this.drawScene(h),o.restore(),h}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){var e=(t=t||{}).mimeType||null,i=t.quality||null,s=this._toKonvaCanvas(t).toDataURL(e,i);return t.callback&&t.callback(s),s}toImage(e){if(!e||!e.callback)throw"callback required for toImage method config argument";var i=e.callback;delete e.callback,t.Util._urlToImage(this.toDataURL(e),function(t){i(t)})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():s.Konva.dragDistance}_off(t,e,i){var s,r,a,n=this.eventListeners[t];for(s=0;s<n.length;s++)if(r=n[s].name,a=n[s].handler,!("konva"===r&&"konva"!==e||e&&r!==e||i&&i!==a)){if(n.splice(s,1),0===n.length){delete this.eventListeners[t];break}s--}}_fireChangeEvent(t,e,i){this._fire(t+g,{oldVal:e,newVal:i})}addName(t){if(!this.hasName(t)){var e=this.name(),i=e?e+" "+t:t;this.name(i)}return this}hasName(t){if(!t)return!1;const e=this.name();return!!e&&-1!==(e||"").split(/\s/g).indexOf(t)}removeName(t){var e=(this.name()||"").split(/\s/g),i=e.indexOf(t);return-1!==i&&(e.splice(i,1),this.name(e.join(" "))),this}setAttr(e,i){var s=this[m+t.Util._capitalize(e)];return t.Util._isFunction(s)?s.call(this,i):this._setAttr(e,i),this}_requestDraw(){if(s.Konva.autoDrawEnabled){const t=this.getLayer()||this.getStage();null==t||t.batchDraw()}}_setAttr(e,i){var s=this.attrs[e];(s!==i||t.Util.isObject(i))&&(null==i?delete this.attrs[e]:this.attrs[e]=i,this._shouldFireChangeEvents&&this._fireChangeEvent(e,s,i),this._requestDraw())}_setComponentAttr(t,e,i){var s;void 0!==i&&((s=this.attrs[t])||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=i,this._fireChangeEvent(t,s,i))}_fireAndBubble(t,e,i){if(e&&this.nodeType===y&&(e.target=this),!((t===p||t===_)&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||"Stage"===this.nodeType&&!i))){this._fire(t,e);var s=(t===p||t===_)&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!s&&(i&&i.parent?this._fireAndBubble.call(this.parent,t,e,i):this._fireAndBubble.call(this.parent,t,e))}}_getProtoListeners(t){let e=this._cache.get(h);if(!e){e={};let t=Object.getPrototypeOf(this);for(;t;)if(t.eventListeners){for(var i in t.eventListeners){const s=t.eventListeners[i],r=e[i]||[];e[i]=s.concat(r)}t=Object.getPrototypeOf(t)}else t=Object.getPrototypeOf(t);this._cache.set(h,e)}return e[t]}_fire(t,e){(e=e||{}).currentTarget=this,e.type=t;const i=this._getProtoListeners(t);if(i)for(var s=0;s<i.length;s++)i[s].handler.call(this,e);const r=this.eventListeners[t];if(r)for(s=0;s<r.length;s++)r[s].handler.call(this,e)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){var e=t?t.pointerId:void 0,i=this.getStage(),s=this.getAbsolutePosition(),a=i._getPointerById(e)||i._changedPointerPositions[0]||s;r.DD._dragElements.set(this._id,{node:this,startPointerPos:a,offset:{x:a.x-s.x,y:a.y-s.y},dragStatus:"ready",pointerId:e})}startDrag(t,e=!0){r.DD._dragElements.has(this._id)||this._createDragElement(t),r.DD._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},e)}_setDragPosition(e,i){const s=this.getStage()._getPointerById(i.pointerId);if(s){var r={x:s.x-i.offset.x,y:s.y-i.offset.y},a=this.dragBoundFunc();if(void 0!==a){const i=a.call(this,r,e);i?r=i:t.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===r.x&&this._lastPos.y===r.y||(this.setAbsolutePosition(r),this._requestDraw()),this._lastPos=r}}stopDrag(t){const e=r.DD._dragElements.get(this._id);e&&(e.dragStatus="stopped"),r.DD._endDragBefore(t),r.DD._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=r.DD._dragElements.get(this._id);return!!t&&"dragging"===t.dragStatus}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){if((!(void 0!==t.evt.button)||s.Konva.dragButtons.indexOf(t.evt.button)>=0)&&!this.isDragging()){var e=!1;r.DD._dragElements.forEach(t=>{this.isAncestorOf(t.node)&&(e=!0)}),e||this._createDragElement(t)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const t=r.DD._dragElements.get(this._id),e=t&&"dragging"===t.dragStatus,i=t&&"ready"===t.dragStatus;e?this.stopDrag():i&&r.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const i=this.getStage();if(!i)return!1;const s={x:-e.x,y:-e.y,width:i.width()+e.x,height:i.height()+e.y};return t.Util.haveIntersection(s,this.getClientRect())}static create(e,i){return t.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,i)}static _createNode(e,i){var r,a,n,h=T.prototype.getClassName.call(e),o=e.children;if(i&&(e.attrs.container=i),s.Konva[h]||(t.Util.warn('Can not find a node with class name "'+h+'". Fallback to "Shape".'),h="Shape"),r=new(0,s.Konva[h])(e.attrs),o)for(a=o.length,n=0;n<a;n++)r.add(T._createNode(o[n]));return r}}exports.Node=T,T.prototype.nodeType="Node",T.prototype._attrsAffectingSize=[],T.prototype.eventListeners={},T.prototype.on.call(T.prototype,A,function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache(x),this._clearSelfAndDescendantCache(o))}),T.prototype.on.call(T.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(w)}),T.prototype.on.call(T.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(u)}),T.prototype.on.call(T.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(n)});const k=e.Factory.addGetterSetter;k(T,"zIndex"),k(T,"absolutePosition"),k(T,"position"),k(T,"x",0,(0,a.getNumberValidator)()),k(T,"y",0,(0,a.getNumberValidator)()),k(T,"globalCompositeOperation","source-over",(0,a.getStringValidator)()),k(T,"opacity",1,(0,a.getNumberValidator)()),k(T,"name","",(0,a.getStringValidator)()),k(T,"id","",(0,a.getStringValidator)()),k(T,"rotation",0,(0,a.getNumberValidator)()),e.Factory.addComponentsGetterSetter(T,"scale",["x","y"]),k(T,"scaleX",1,(0,a.getNumberValidator)()),k(T,"scaleY",1,(0,a.getNumberValidator)()),e.Factory.addComponentsGetterSetter(T,"skew",["x","y"]),k(T,"skewX",0,(0,a.getNumberValidator)()),k(T,"skewY",0,(0,a.getNumberValidator)()),e.Factory.addComponentsGetterSetter(T,"offset",["x","y"]),k(T,"offsetX",0,(0,a.getNumberValidator)()),k(T,"offsetY",0,(0,a.getNumberValidator)()),k(T,"dragDistance",null,(0,a.getNumberValidator)()),k(T,"width",0,(0,a.getNumberValidator)()),k(T,"height",0,(0,a.getNumberValidator)()),k(T,"listening",!0,(0,a.getBooleanValidator)()),k(T,"preventDefault",!0,(0,a.getBooleanValidator)()),k(T,"filters",null,function(t){return this._filterUpToDate=!1,t}),k(T,"visible",!0,(0,a.getBooleanValidator)()),k(T,"transformsEnabled","all",(0,a.getStringValidator)()),k(T,"size"),k(T,"dragBoundFunc"),k(T,"draggable",!1,(0,a.getBooleanValidator)()),e.Factory.backCompat(T,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});
},{"./Util.js":"x014","./Factory.js":"OqKZ","./Canvas.js":"ZrUi","./Global.js":"h4Yu","./DragAndDrop.js":"zIBW","./Validators.js":"QpE5"}],"RKpO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Container=void 0;var e=require("./Factory.js"),t=require("./Node.js"),r=require("./Validators.js");class i extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const t=this.children||[];var r=[];return t.forEach(function(t){e(t)&&r.push(t)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}var r=e[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var t=this._generalFind(e,!0);return t.length>0?t[0]:void 0}_generalFind(e,t){var r=[];return this._descendants(i=>{const s=i._isMatch(e);return s&&r.push(i),!(!s||!t)}),r}_descendants(e){let t=!1;const r=this.getChildren();for(const i of r){if(t=e(i))return!0;if(i.hasChildren()&&(t=i._descendants(e)))return!0}return!1}toObject(){var e=t.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(t=>{e.children.push(t.toObject())}),e}isAncestorOf(e){for(var t=e.getParent();t;){if(t._id===this._id)return!0;t=t.getParent()}return!1}clone(e){var r=t.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(e){r.add(e.clone())}),r}getAllIntersections(e){var t=[];return this.find("Shape").forEach(function(r){r.isVisible()&&r.intersects(e)&&t.push(r)}),t}_clearSelfAndDescendantCache(e){var t;super._clearSelfAndDescendantCache(e),this.isCached()||null===(t=this.children)||void 0===t||t.forEach(function(t){t._clearSelfAndDescendantCache(e)})}_setChildrenIndices(){var e;null===(e=this.children)||void 0===e||e.forEach(function(e,t){e.index=t}),this._requestDraw()}drawScene(e,t){var r=this.getLayer(),i=e||r&&r.getCanvas(),s=i&&i.getContext(),h=this._getCanvasCache(),n=h&&h.scene,a=i&&i.isCache;if(!this.isVisible()&&!a)return this;if(n){s.save();var d=this.getAbsoluteTransform(t).getMatrix();s.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedSceneCanvas(s),s.restore()}else this._drawChildren("drawScene",i,t);return this}drawHit(e,t){if(!this.shouldDrawHit(t))return this;var r=this.getLayer(),i=e||r&&r.hitCanvas,s=i&&i.getContext(),h=this._getCanvasCache();if(h&&h.hit){s.save();var n=this.getAbsoluteTransform(t).getMatrix();s.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",i,t);return this}_drawChildren(e,t,r){var i,s=t&&t.getContext(),h=this.clipWidth(),n=this.clipHeight(),a=this.clipFunc(),d=h&&n||a;const o=r===this;if(d){s.save();var l=this.getAbsoluteTransform(r),c=l.getMatrix();if(s.transform(c[0],c[1],c[2],c[3],c[4],c[5]),s.beginPath(),a)a.call(this,s,this);else{var u=this.clipX(),v=this.clipY();s.rect(u,v,h,n)}s.clip(),c=l.copy().invert().getMatrix(),s.transform(c[0],c[1],c[2],c[3],c[4],c[5])}var f=!o&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===e;f&&(s.save(),s._applyGlobalCompositeOperation(this)),null===(i=this.children)||void 0===i||i.forEach(function(i){i[e](t,r)}),f&&s.restore(),d&&s.restore()}getClientRect(e){var t,r,i,s,h,n=(e=e||{}).skipTransform,a=e.relativeTo,d={x:1/0,y:1/0,width:0,height:0},o=this;null===(t=this.children)||void 0===t||t.forEach(function(t){if(t.visible()){var n=t.getClientRect({relativeTo:o,skipShadow:e.skipShadow,skipStroke:e.skipStroke});0===n.width&&0===n.height||(void 0===r?(r=n.x,i=n.y,s=n.x+n.width,h=n.y+n.height):(r=Math.min(r,n.x),i=Math.min(i,n.y),s=Math.max(s,n.x+n.width),h=Math.max(h,n.y+n.height)))}});for(var l=this.find("Shape"),c=!1,u=0;u<l.length;u++){if(l[u]._isVisible(this)){c=!0;break}}return d=c&&void 0!==r?{x:r,y:i,width:s-r,height:h-i}:{x:0,y:0,width:0,height:0},n?d:this._transformedRect(d,a)}}exports.Container=i,e.Factory.addComponentsGetterSetter(i,"clip",["x","y","width","height"]),e.Factory.addGetterSetter(i,"clipX",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(i,"clipY",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(i,"clipWidth",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(i,"clipHeight",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(i,"clipFunc");
},{"./Factory.js":"OqKZ","./Node.js":"aBpx","./Validators.js":"QpE5"}],"ssMN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCapturedShape=n,exports.createEvent=o,exports.hasPointerCapture=i,exports.setPointerCapture=p,exports.releaseCapture=u;var e=require("./Global.js");const t=new Map,r=void 0!==e.Konva._global.PointerEvent;function n(e){return t.get(e)}function o(e){return{evt:e,pointerId:e.pointerId}}function i(e,r){return t.get(e)===r}function p(e,n){u(e),n.getStage()&&(t.set(e,n),r&&n._fire("gotpointercapture",o(new PointerEvent("gotpointercapture"))))}function u(e,n){const i=t.get(e);if(!i)return;const p=i.getStage();p&&p.content,t.delete(e),r&&i._fire("lostpointercapture",o(new PointerEvent("lostpointercapture")))}
},{"./Global.js":"h4Yu"}],"ys4P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Stage=exports.stages=void 0;var t=require("./Util.js"),e=require("./Factory.js"),i=require("./Container.js"),n=require("./Global.js"),r=require("./Canvas.js"),o=require("./DragAndDrop.js"),s=h(require("./PointerEvents.js"));function a(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(a=function(t){return t?i:e})(t)}function h(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=a(e);if(i&&i.has(t))return i.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var s=r?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}return n.default=t,i&&i.set(t,n),n}var c="Stage",l="string",p="px",u="mouseout",d="mouseleave",g="mouseover",v="mouseenter",f="mousemove",_="mousedown",P="mouseup",y="pointermove",b="pointerdown",C="pointerup",m="pointercancel",w="lostpointercapture",k="pointerout",D="pointerleave",x="pointerover",S="pointerenter",E="contextmenu",I="touchstart",T="touchend",A="touchmove",B="touchcancel",O="wheel",K=5,j=[[v,"_pointerenter"],[_,"_pointerdown"],[f,"_pointermove"],[P,"_pointerup"],[d,"_pointerleave"],[I,"_pointerdown"],[A,"_pointermove"],[T,"_pointerup"],[B,"_pointercancel"],[g,"_pointerover"],[O,"_wheel"],[E,"_contextmenu"],[b,"_pointerdown"],[y,"_pointermove"],[C,"_pointerup"],[m,"_pointercancel"],[w,"_lostpointercapture"]];const L={mouse:{[k]:u,[D]:d,[x]:g,[S]:v,[y]:f,[b]:_,[C]:P,[m]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[k]:"touchout",[D]:"touchleave",[x]:"touchover",[S]:"touchenter",[y]:A,[b]:I,[C]:T,[m]:B,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[k]:k,[D]:D,[x]:x,[S]:S,[y]:y,[b]:b,[C]:C,[m]:m,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},M=t=>t.indexOf("pointer")>=0?"pointer":t.indexOf("touch")>=0?"touch":"mouse",U=t=>{const e=M(t);return"pointer"===e?n.Konva.pointerEventsEnabled&&L.pointer:"touch"===e?L.touch:"mouse"===e?L.mouse:void 0};function W(e={}){return(e.clipFunc||e.clipWidth||e.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),e}const Y="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",H=[];exports.stages=H;class R extends i.Container{constructor(t){super(W(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),H.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{W(this.attrs)}),this._checkVisibility()}_validateAdd(e){const i="Layer"===e.getType(),n="FastLayer"===e.getType();i||n||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if(typeof t===l){if("."===t.charAt(0)){var e=t.slice(1);t=document.getElementsByClassName(e)[0]}else{var i;i="#"!==t.charAt(0)?t:t.slice(1),t=document.getElementById(i)}if(!t)throw"Can not find container in document with id "+i}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var t,e=this.children,i=e.length;for(t=0;t<i;t++)e[t].clear();return this}clone(t){return t||(t={}),t.container="undefined"!=typeof document&&document.createElement("div"),i.Container.prototype.clone.call(this,t)}destroy(){super.destroy();var e=this.content;e&&t.Util._isInDocument(e)&&this.container().removeChild(e);var i=H.indexOf(this);return i>-1&&H.splice(i,1),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(t.Util.warn(Y),null)}_getPointerById(t){return this._pointerPositions.find(e=>e.id===t)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){(t=t||{}).x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();var e=new r.SceneCanvas({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),i=e.getContext()._context,n=this.children;return(t.x||t.y)&&i.translate(-1*t.x,-1*t.y),n.forEach(function(e){if(e.isVisible()){var n=e._toKonvaCanvas(t);i.drawImage(n._canvas,t.x,t.y,n.getWidth()/n.getPixelRatio(),n.getHeight()/n.getPixelRatio())}}),e}getIntersection(t){if(!t)return null;var e,i=this.children;for(e=i.length-1;e>=0;e--){const n=i[e].getIntersection(t);if(n)return n}return null}_resizeDOM(){var t=this.width(),e=this.height();this.content&&(this.content.style.width=t+p,this.content.style.height=e+p),this.bufferCanvas.setSize(t,e),this.bufferHitCanvas.setSize(t,e),this.children.forEach(i=>{i.setSize({width:t,height:e}),i.draw()})}add(e,...i){if(arguments.length>1){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this}super.add(e);var o=this.children.length;return o>K&&t.Util.warn("The stage has "+o+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),n.Konva.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return s.hasPointerCapture(t,this)}setPointerCapture(t){s.setPointerCapture(t,this)}releaseCapture(t){s.releaseCapture(t,this)}getLayers(){return this.children}_bindContentEvents(){n.Konva.isBrowser&&j.forEach(([t,e])=>{this.content.addEventListener(t,t=>{this[e](t)})})}_pointerenter(t){this.setPointersPositions(t);const e=U(t.type);this._fire(e.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const e=U(t.type);this._fire(e.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let e=this[t+"targetShape"];return e&&!e.getStage()&&(e=null),e}_pointerleave(t){const e=U(t.type),i=M(t.type);if(e){this.setPointersPositions(t);var r=this._getTargetShape(i),s=!o.DD.isDragging||n.Konva.hitOnDragEnabled;r&&s?(r._fireAndBubble(e.pointerout,{evt:t}),r._fireAndBubble(e.pointerleave,{evt:t}),this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this[i+"targetShape"]=null):s&&(this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(e.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(t){const e=U(t.type),i=M(t.type);if(e){this.setPointersPositions(t);var r=!1;this._changedPointerPositions.forEach(s=>{var a=this.getIntersection(s);if(o.DD.justDragged=!1,n.Konva["_"+i+"ListenClick"]=!0,!(a&&a.isListening()))return;n.Konva.capturePointerEventsEnabled&&a.setPointerCapture(s.id),this[i+"ClickStartShape"]=a,a._fireAndBubble(e.pointerdown,{evt:t,pointerId:s.id}),r=!0;const h=t.type.indexOf("touch")>=0;a.preventDefault()&&t.cancelable&&h&&t.preventDefault()}),r||this._fire(e.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(t){const e=U(t.type),i=M(t.type);if(!e)return;if(o.DD.isDragging&&o.DD.node.preventDefault()&&t.cancelable&&t.preventDefault(),this.setPointersPositions(t),!(!o.DD.isDragging||n.Konva.hitOnDragEnabled))return;var r={};let a=!1;var h=this._getTargetShape(i);this._changedPointerPositions.forEach(n=>{const o=s.getCapturedShape(n.id)||this.getIntersection(n),c=n.id,l={evt:t,pointerId:c};var p=h!==o;if(p&&h&&(h._fireAndBubble(e.pointerout,l,o),h._fireAndBubble(e.pointerleave,l,o)),o){if(r[o._id])return;r[o._id]=!0}o&&o.isListening()?(a=!0,p&&(o._fireAndBubble(e.pointerover,l,h),o._fireAndBubble(e.pointerenter,l,h),this[i+"targetShape"]=o),o._fireAndBubble(e.pointermove,l)):h&&(this._fire(e.pointerover,{evt:t,target:this,currentTarget:this,pointerId:c}),this[i+"targetShape"]=null)}),a||this._fire(e.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const e=U(t.type),i=M(t.type);if(!e)return;this.setPointersPositions(t);const r=this[i+"ClickStartShape"],a=this[i+"ClickEndShape"];var h={};let c=!1;this._changedPointerPositions.forEach(l=>{const p=s.getCapturedShape(l.id)||this.getIntersection(l);if(p){if(p.releaseCapture(l.id),h[p._id])return;h[p._id]=!0}const u=l.id,d={evt:t,pointerId:u};let g=!1;n.Konva["_"+i+"InDblClickWindow"]?(g=!0,clearTimeout(this[i+"DblTimeout"])):o.DD.justDragged||(n.Konva["_"+i+"InDblClickWindow"]=!0,clearTimeout(this[i+"DblTimeout"])),this[i+"DblTimeout"]=setTimeout(function(){n.Konva["_"+i+"InDblClickWindow"]=!1},n.Konva.dblClickWindow),p&&p.isListening()?(c=!0,this[i+"ClickEndShape"]=p,p._fireAndBubble(e.pointerup,d),n.Konva["_"+i+"ListenClick"]&&r&&r===p&&(p._fireAndBubble(e.pointerclick,d),g&&a&&a===p&&p._fireAndBubble(e.pointerdblclick,d))):(this[i+"ClickEndShape"]=null,n.Konva["_"+i+"ListenClick"]&&this._fire(e.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:u}),g&&this._fire(e.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:u}))}),c||this._fire(e.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),n.Konva["_"+i+"ListenClick"]=!1,t.cancelable&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(E,{evt:t}):this._fire(E,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(O,{evt:t}):this._fire(O,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const e=s.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble(C,s.createEvent(t)),s.releaseCapture(t.pointerId)}_lostpointercapture(t){s.releaseCapture(t.pointerId)}setPointersPositions(e){var i=this._getContentPosition(),n=null,r=null;void 0!==(e=e||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,t=>{this._pointerPositions.push({id:t.identifier,x:(t.clientX-i.left)/i.scaleX,y:(t.clientY-i.top)/i.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,t=>{this._changedPointerPositions.push({id:t.identifier,x:(t.clientX-i.left)/i.scaleX,y:(t.clientY-i.top)/i.scaleY})})):(n=(e.clientX-i.left)/i.scaleX,r=(e.clientY-i.top)/i.scaleY,this.pointerPos={x:n,y:r},this._pointerPositions=[{x:n,y:r,id:t.Util._getFirstPointerId(e)}],this._changedPointerPositions=[{x:n,y:r,id:t.Util._getFirstPointerId(e)}])}_setPointerPosition(e){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new r.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new r.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),n.Konva.isBrowser){var t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(t){t.batchDraw()}),this}}exports.Stage=R,R.prototype.nodeType=c,(0,n._registerNode)(R),e.Factory.addGetterSetter(R,"container");
},{"./Util.js":"x014","./Factory.js":"OqKZ","./Container.js":"RKpO","./Global.js":"h4Yu","./Canvas.js":"ZrUi","./DragAndDrop.js":"zIBW","./PointerEvents.js":"ssMN"}],"D7fl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Shape=exports.shapes=void 0;var t=require("./Global.js"),e=require("./Util.js"),a=require("./Factory.js"),r=require("./Node.js"),i=require("./Validators.js"),o=s(require("./PointerEvents.js"));function n(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,a=new WeakMap;return(n=function(t){return t?a:e})(t)}function s(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var a=n(e);if(a&&a.has(t))return a.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,a&&a.set(t,r),r}var d="hasShadow",l="shadowRGBA",h="patternImage",c="linearGradient",f="radialGradient";let u;function g(){return u||(u=e.Util.createCanvasElement().getContext("2d"))}const y={};function S(t){t.fill()}function p(t){t.stroke()}function G(t){t.fill()}function C(t){t.stroke()}function F(){this._clearCache(d)}function v(){this._clearCache(l)}function k(){this._clearCache(h)}function P(){this._clearCache(c)}function w(){this._clearCache(f)}exports.shapes=y;class _ extends r.Node{constructor(t){let a;for(super(t);!(a=e.Util.getRandomColor())||a in y;);this.colorKey=a,y[a]=this}getContext(){return e.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return e.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(d,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(h,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const a=g().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(a&&a.setTransform){const r=new e.Transform;r.translate(this.fillPatternX(),this.fillPatternY()),r.rotate(t.Konva.getAngle(this.fillPatternRotation())),r.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),r.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const i=r.getMatrix();a.setTransform({a:i[0],b:i[1],c:i[2],d:i[3],e:i[4],f:i[5]})}return a}}_getLinearGradient(){return this._getCache(c,this.__getLinearGradient)}__getLinearGradient(){var t=this.fillLinearGradientColorStops();if(t){for(var e=g(),a=this.fillLinearGradientStartPoint(),r=this.fillLinearGradientEndPoint(),i=e.createLinearGradient(a.x,a.y,r.x,r.y),o=0;o<t.length;o+=2)i.addColorStop(t[o],t[o+1]);return i}}_getRadialGradient(){return this._getCache(f,this.__getRadialGradient)}__getRadialGradient(){var t=this.fillRadialGradientColorStops();if(t){for(var e=g(),a=this.fillRadialGradientStartPoint(),r=this.fillRadialGradientEndPoint(),i=e.createRadialGradient(a.x,a.y,this.fillRadialGradientStartRadius(),r.x,r.y,this.fillRadialGradientEndRadius()),o=0;o<t.length;o+=2)i.addColorStop(t[o],t[o+1]);return i}}getShadowRGBA(){return this._getCache(l,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var t=e.Util.colorToRGBA(this.shadowColor());return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops()))}hasHitStroke(){const t=this.hitStrokeWidth();return"auto"===t?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){var e=this.getStage().bufferHitCanvas;return e.getContext().clear(),this.drawHit(e,null,!0),e.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0}destroy(){return r.Node.prototype.destroy.call(this),delete y[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var e;if(!this.getStage())return!1;if(!(null===(e=this.attrs.perfectDrawEnabled)||void 0===e||e))return!1;const a=t||this.hasFill(),r=this.hasStroke(),i=1!==this.getAbsoluteOpacity();if(a&&r&&i)return!0;const o=this.hasShadow(),n=this.shadowForStrokeEnabled();return!!(a&&r&&o&&n)}setStrokeHitEnabled(t){e.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return 0!==this.hitStrokeWidth()}getSelfRect(){var t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){const e=t.skipTransform,a=t.relativeTo,r=this.getSelfRect(),i=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,o=r.width+i,n=r.height+i,s=!t.skipShadow&&this.hasShadow(),d=s?this.shadowOffsetX():0,l=s?this.shadowOffsetY():0,h=o+Math.abs(d),c=n+Math.abs(l),f=s&&this.shadowBlur()||0,u=h+2*f,g=c+2*f;let y=0;Math.round(i/2)!==i/2&&(y=1);const S={width:u+y,height:g+y,x:-Math.round(i/2+f)+Math.min(d,0)+r.x,y:-Math.round(i/2+f)+Math.min(l,0)+r.y};return e?S:this._transformedRect(S,a)}drawScene(t,e){var a,r,i=this.getLayer(),o=t||i.getCanvas(),n=o.getContext(),s=this._getCanvasCache(),d=this.getSceneFunc(),l=this.hasShadow(),h=o.isCache,c=e===this;if(!this.isVisible()&&!c)return this;if(s){n.save();var f=this.getAbsoluteTransform(e).getMatrix();return n.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedSceneCanvas(n),n.restore(),this}if(!d)return this;if(n.save(),this._useBufferCanvas()&&!h){(r=(a=this.getStage().bufferCanvas).getContext()).clear(),r.save(),r._applyLineJoin(this);var u=this.getAbsoluteTransform(e).getMatrix();r.transform(u[0],u[1],u[2],u[3],u[4],u[5]),d.call(this,r,this),r.restore();var g=a.pixelRatio;l&&n._applyShadow(this),n._applyOpacity(this),n._applyGlobalCompositeOperation(this),n.drawImage(a._canvas,0,0,a.width/g,a.height/g)}else{if(n._applyLineJoin(this),!c){u=this.getAbsoluteTransform(e).getMatrix();n.transform(u[0],u[1],u[2],u[3],u[4],u[5]),n._applyOpacity(this),n._applyGlobalCompositeOperation(this)}l&&n._applyShadow(this),d.call(this,n,this)}return n.restore(),this}drawHit(t,a,r=!1){if(!this.shouldDrawHit(a,r))return this;var i=this.getLayer(),o=t||i.hitCanvas,n=o&&o.getContext(),s=this.hitFunc()||this.sceneFunc(),d=this._getCanvasCache(),l=d&&d.hit;if(this.colorKey||e.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),l){n.save();var h=this.getAbsoluteTransform(a).getMatrix();return n.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedHitCanvas(n),n.restore(),this}if(!s)return this;if(n.save(),n._applyLineJoin(this),!(this===a)){var c=this.getAbsoluteTransform(a).getMatrix();n.transform(c[0],c[1],c[2],c[3],c[4],c[5])}return s.call(this,n,this),n.restore(),this}drawHitFromCache(t=0){var a,r,i,o,n,s=this._getCanvasCache(),d=this._getCachedSceneCanvas(),l=s.hit,h=l.getContext(),c=l.getWidth(),f=l.getHeight();h.clear(),h.drawImage(d._canvas,0,0,c,f);try{for(i=(r=(a=h.getImageData(0,0,c,f)).data).length,o=e.Util._hexToRgb(this.colorKey),n=0;n<i;n+=4)r[n+3]>t?(r[n]=o.r,r[n+1]=o.g,r[n+2]=o.b,r[n+3]=255):r[n+3]=0;h.putImageData(a,0,0)}catch(u){e.Util.error("Unable to draw hit graph from cached scene canvas. "+u.message)}return this}hasPointerCapture(t){return o.hasPointerCapture(t,this)}setPointerCapture(t){o.setPointerCapture(t,this)}releaseCapture(t){o.releaseCapture(t,this)}}exports.Shape=_,_.prototype._fillFunc=S,_.prototype._strokeFunc=p,_.prototype._fillFuncHit=G,_.prototype._strokeFuncHit=C,_.prototype._centroid=!1,_.prototype.nodeType="Shape",(0,t._registerNode)(_),_.prototype.eventListeners={},_.prototype.on.call(_.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",F),_.prototype.on.call(_.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",v),_.prototype.on.call(_.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",k),_.prototype.on.call(_.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",P),_.prototype.on.call(_.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",w),a.Factory.addGetterSetter(_,"stroke",void 0,(0,i.getStringOrGradientValidator)()),a.Factory.addGetterSetter(_,"strokeWidth",2,(0,i.getNumberValidator)()),a.Factory.addGetterSetter(_,"fillAfterStrokeEnabled",!1),a.Factory.addGetterSetter(_,"hitStrokeWidth","auto",(0,i.getNumberOrAutoValidator)()),a.Factory.addGetterSetter(_,"strokeHitEnabled",!0,(0,i.getBooleanValidator)()),a.Factory.addGetterSetter(_,"perfectDrawEnabled",!0,(0,i.getBooleanValidator)()),a.Factory.addGetterSetter(_,"shadowForStrokeEnabled",!0,(0,i.getBooleanValidator)()),a.Factory.addGetterSetter(_,"lineJoin"),a.Factory.addGetterSetter(_,"lineCap"),a.Factory.addGetterSetter(_,"sceneFunc"),a.Factory.addGetterSetter(_,"hitFunc"),a.Factory.addGetterSetter(_,"dash"),a.Factory.addGetterSetter(_,"dashOffset",0,(0,i.getNumberValidator)()),a.Factory.addGetterSetter(_,"shadowColor",void 0,(0,i.getStringValidator)()),a.Factory.addGetterSetter(_,"shadowBlur",0,(0,i.getNumberValidator)()),a.Factory.addGetterSetter(_,"shadowOpacity",1,(0,i.getNumberValidator)()),a.Factory.addComponentsGetterSetter(_,"shadowOffset",["x","y"]),a.Factory.addGetterSetter(_,"shadowOffsetX",0,(0,i.getNumberValidator)()),a.Factory.addGetterSetter(_,"shadowOffsetY",0,(0,i.getNumberValidator)()),a.Factory.addGetterSetter(_,"fillPatternImage"),a.Factory.addGetterSetter(_,"fill",void 0,(0,i.getStringOrGradientValidator)()),a.Factory.addGetterSetter(_,"fillPatternX",0,(0,i.getNumberValidator)()),a.Factory.addGetterSetter(_,"fillPatternY",0,(0,i.getNumberValidator)()),a.Factory.addGetterSetter(_,"fillLinearGradientColorStops"),a.Factory.addGetterSetter(_,"strokeLinearGradientColorStops"),a.Factory.addGetterSetter(_,"fillRadialGradientStartRadius",0),a.Factory.addGetterSetter(_,"fillRadialGradientEndRadius",0),a.Factory.addGetterSetter(_,"fillRadialGradientColorStops"),a.Factory.addGetterSetter(_,"fillPatternRepeat","repeat"),a.Factory.addGetterSetter(_,"fillEnabled",!0),a.Factory.addGetterSetter(_,"strokeEnabled",!0),a.Factory.addGetterSetter(_,"shadowEnabled",!0),a.Factory.addGetterSetter(_,"dashEnabled",!0),a.Factory.addGetterSetter(_,"strokeScaleEnabled",!0),a.Factory.addGetterSetter(_,"fillPriority","color"),a.Factory.addComponentsGetterSetter(_,"fillPatternOffset",["x","y"]),a.Factory.addGetterSetter(_,"fillPatternOffsetX",0,(0,i.getNumberValidator)()),a.Factory.addGetterSetter(_,"fillPatternOffsetY",0,(0,i.getNumberValidator)()),a.Factory.addComponentsGetterSetter(_,"fillPatternScale",["x","y"]),a.Factory.addGetterSetter(_,"fillPatternScaleX",1,(0,i.getNumberValidator)()),a.Factory.addGetterSetter(_,"fillPatternScaleY",1,(0,i.getNumberValidator)()),a.Factory.addComponentsGetterSetter(_,"fillLinearGradientStartPoint",["x","y"]),a.Factory.addComponentsGetterSetter(_,"strokeLinearGradientStartPoint",["x","y"]),a.Factory.addGetterSetter(_,"fillLinearGradientStartPointX",0),a.Factory.addGetterSetter(_,"strokeLinearGradientStartPointX",0),a.Factory.addGetterSetter(_,"fillLinearGradientStartPointY",0),a.Factory.addGetterSetter(_,"strokeLinearGradientStartPointY",0),a.Factory.addComponentsGetterSetter(_,"fillLinearGradientEndPoint",["x","y"]),a.Factory.addComponentsGetterSetter(_,"strokeLinearGradientEndPoint",["x","y"]),a.Factory.addGetterSetter(_,"fillLinearGradientEndPointX",0),a.Factory.addGetterSetter(_,"strokeLinearGradientEndPointX",0),a.Factory.addGetterSetter(_,"fillLinearGradientEndPointY",0),a.Factory.addGetterSetter(_,"strokeLinearGradientEndPointY",0),a.Factory.addComponentsGetterSetter(_,"fillRadialGradientStartPoint",["x","y"]),a.Factory.addGetterSetter(_,"fillRadialGradientStartPointX",0),a.Factory.addGetterSetter(_,"fillRadialGradientStartPointY",0),a.Factory.addComponentsGetterSetter(_,"fillRadialGradientEndPoint",["x","y"]),a.Factory.addGetterSetter(_,"fillRadialGradientEndPointX",0),a.Factory.addGetterSetter(_,"fillRadialGradientEndPointY",0),a.Factory.addGetterSetter(_,"fillPatternRotation",0),a.Factory.backCompat(_,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});
},{"./Global.js":"h4Yu","./Util.js":"x014","./Factory.js":"OqKZ","./Node.js":"aBpx","./Validators.js":"QpE5","./PointerEvents.js":"ssMN"}],"Tho9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Layer=void 0;var t=require("./Util.js"),e=require("./Container.js"),a=require("./Node.js"),i=require("./Factory.js"),n=require("./Canvas.js"),r=require("./Validators.js"),s=require("./Shape.js"),h=require("./Global.js"),o="#",l="beforeDraw",v="draw",d=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],g=d.length;class c extends e.Container{constructor(t){super(t),this.canvas=new n.SceneCanvas,this.hitCanvas=new n.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),t<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[t+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){a.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!a.Node.prototype.moveUp.call(this))return!1;var t=this.getStage();return!(!t||!t.content)&&(t.content.removeChild(this.getNativeCanvasElement()),this.index<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(a.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(a.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return a.Node.prototype.remove.call(this),e&&e.parentNode&&t.Util._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:t,height:e}){return this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._setSmoothEnabled(),this}_validateAdd(e){var a=e.getType();"Group"!==a&&"Shape"!==a&&t.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return(t=t||{}).width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=void 0!==t.x?t.x:this.x(),t.y=void 0!==t.y?t.y:this.y(),a.Node.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){const t=this.visible();this.canvas._canvas.style.display=t?"block":"none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){t.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){t.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,t.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;for(var e=1,a=!1;;){for(let i=0;i<g;i++){const n=d[i],r=this._getIntersection({x:t.x+n.x*e,y:t.y+n.y*e}),s=r.shape;if(s)return s;if(a=!!r.antialiased,!r.antialiased)break}if(!a)return null;e+=1}}_getIntersection(e){const a=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(e.x*a),Math.round(e.y*a),1,1).data,n=i[3];if(255===n){const e=t.Util._rgbToHex(i[0],i[1],i[2]),a=s.shapes[o+e];return a?{shape:a}:{antialiased:!0}}return n>0?{antialiased:!0}:{}}drawScene(t,a){var i=this.getLayer(),n=t||i&&i.getCanvas();return this._fire(l,{node:this}),this.clearBeforeDraw()&&n.getContext().clear(),e.Container.prototype.drawScene.call(this,n,a),this._fire(v,{node:this}),this}drawHit(t,a){var i=this.getLayer(),n=t||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),e.Container.prototype.drawHit.call(this,n,a),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(this.parent&&this.parent.content){var t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}}}exports.Layer=c,c.prototype.nodeType="Layer",(0,h._registerNode)(c),i.Factory.addGetterSetter(c,"imageSmoothingEnabled",!0),i.Factory.addGetterSetter(c,"clearBeforeDraw",!0),i.Factory.addGetterSetter(c,"hitGraphEnabled",!0,(0,r.getBooleanValidator)());
},{"./Util.js":"x014","./Container.js":"RKpO","./Node.js":"aBpx","./Factory.js":"OqKZ","./Canvas.js":"ZrUi","./Validators.js":"QpE5","./Shape.js":"D7fl","./Global.js":"h4Yu"}],"rPsV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FastLayer=void 0;var e=require("./Util.js"),r=require("./Layer.js"),s=require("./Global.js");class t extends r.Layer{constructor(r){super(r),this.listening(!1),e.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}exports.FastLayer=t,t.prototype.nodeType="FastLayer",(0,s._registerNode)(t);
},{"./Util.js":"x014","./Layer.js":"Tho9","./Global.js":"h4Yu"}],"gLGN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Group=void 0;var e=require("./Util.js"),r=require("./Container.js"),o=require("./Global.js");class t extends r.Container{_validateAdd(r){var o=r.getType();"Group"!==o&&"Shape"!==o&&e.Util.throw("You may only add groups and shapes to groups.")}}exports.Group=t,t.prototype.nodeType="Group",(0,o._registerNode)(t);
},{"./Util.js":"x014","./Container.js":"RKpO","./Global.js":"h4Yu"}],"DJCc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Animation=void 0;var i=require("./Global.js"),t=require("./Util.js"),e=i.glob.performance&&i.glob.performance.now?function(){return i.glob.performance.now()}:function(){return(new Date).getTime()};class a{constructor(i,t){this.id=a.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:e(),frameRate:0},this.func=i,this.setLayers(t)}setLayers(i){var t=[];return t=i?i.length>0?i:[i]:[],this.layers=t,this}getLayers(){return this.layers}addLayer(i){var t,e=this.layers,a=e.length;for(t=0;t<a;t++)if(e[t]._id===i._id)return!1;return this.layers.push(i),!0}isRunning(){var i,t=a.animations,e=t.length;for(i=0;i<e;i++)if(t[i].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=e(),a._addAnimation(this),this}stop(){return a._removeAnimation(this),this}_updateFrameObject(i){this.frame.timeDiff=i-this.frame.lastTime,this.frame.lastTime=i,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(i){this.animations.push(i),this._handleAnimation()}static _removeAnimation(i){var t,e=i.id,a=this.animations,n=a.length;for(t=0;t<n;t++)if(a[t].id===e){this.animations.splice(t,1);break}}static _runFrames(){var i,t,a,n,r,s,m,o,h={},f=this.animations;for(n=0;n<f.length;n++)if(t=(i=f[n]).layers,a=i.func,i._updateFrameObject(e()),s=t.length,!a||!1!==a.call(i,i.frame))for(r=0;r<s;r++)void 0!==(m=t[r])._id&&(h[m._id]=m);for(o in h)h.hasOwnProperty(o)&&h[o].batchDraw()}static _animationLoop(){var i=a;i.animations.length?(i._runFrames(),t.Util.requestAnimFrame(i._animationLoop)):i.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}}exports.Animation=a,a.animations=[],a.animIdCounter=0,a.animRunning=!1;
},{"./Global.js":"h4Yu","./Util.js":"x014"}],"APeL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Easings=exports.Tween=void 0;var t=require("./Util.js"),e=require("./Animation.js"),s=require("./Node.js"),i=require("./Global.js"),n={node:1,duration:1,easing:1,onFinish:1,yoyo:1},r=1,a=2,h=3,o=0,u=["fill","stroke","shadowColor"];class d{constructor(t,e,s,i,n,r,a){this.prop=t,this.propFunc=e,this.begin=i,this._pos=i,this.duration=r,this._change=0,this.prevPos=0,this.yoyo=a,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=s,this._change=n-this.begin,this.pause()}fire(t){var e=this[t];e&&e()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=a,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=h,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var t=this.getTimer()-this._startTime;this.state===a?this.setTime(t):this.state===h&&this.setTime(this.duration-t)}pause(){this.state=r,this.fire("onPause")}getTimer(){return(new Date).getTime()}}class p{constructor(s){var r,a,h=this,u=s.node,_=u._id,c=s.easing||l.Linear,f=!!s.yoyo;r=void 0===s.duration?.3:0===s.duration?.001:s.duration,this.node=u,this._id=o++;var g=u.getLayer()||(u instanceof i.Konva.Stage?u.getLayers():null);for(a in g||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new e.Animation(function(){h.tween.onEnterFrame()},g),this.tween=new d(a,function(t){h._tweenFunc(t)},c,0,1,1e3*r,f),this._addListeners(),p.attrs[_]||(p.attrs[_]={}),p.attrs[_][this._id]||(p.attrs[_][this._id]={}),p.tweens[_]||(p.tweens[_]={}),s)void 0===n[a]&&this._addAttr(a,s[a]);this.reset(),this.onFinish=s.onFinish,this.onReset=s.onReset,this.onUpdate=s.onUpdate}_addAttr(e,s){var i,n,r,a,h,o,d,l,_=this.node,c=_._id;if((r=p.tweens[c][e])&&delete p.attrs[c][r][e],i=_.getAttr(e),t.Util._isArray(s))if(n=[],h=Math.max(s.length,i.length),"points"===e&&s.length!==i.length&&(s.length>i.length?(d=i,i=t.Util._prepareArrayForTween(i,s,_.closed())):(o=s,s=t.Util._prepareArrayForTween(s,i,_.closed()))),0===e.indexOf("fill"))for(a=0;a<h;a++)if(a%2==0)n.push(s[a]-i[a]);else{var f=t.Util.colorToRGBA(i[a]);l=t.Util.colorToRGBA(s[a]),i[a]=f,n.push({r:l.r-f.r,g:l.g-f.g,b:l.b-f.b,a:l.a-f.a})}else for(a=0;a<h;a++)n.push(s[a]-i[a]);else-1!==u.indexOf(e)?(i=t.Util.colorToRGBA(i),n={r:(l=t.Util.colorToRGBA(s)).r-i.r,g:l.g-i.g,b:l.b-i.b,a:l.a-i.a}):n=s-i;p.attrs[c][this._id][e]={start:i,diff:n,end:s,trueEnd:o,trueStart:d},p.tweens[c][e]=this._id}_tweenFunc(e){var s,i,n,r,a,h,o,d,l=this.node,_=p.attrs[l._id][this._id];for(s in _){if(n=(i=_[s]).start,r=i.diff,d=i.end,t.Util._isArray(n))if(a=[],o=Math.max(n.length,d.length),0===s.indexOf("fill"))for(h=0;h<o;h++)h%2==0?a.push((n[h]||0)+r[h]*e):a.push("rgba("+Math.round(n[h].r+r[h].r*e)+","+Math.round(n[h].g+r[h].g*e)+","+Math.round(n[h].b+r[h].b*e)+","+(n[h].a+r[h].a*e)+")");else for(h=0;h<o;h++)a.push((n[h]||0)+r[h]*e);else a=-1!==u.indexOf(s)?"rgba("+Math.round(n.r+r.r*e)+","+Math.round(n.g+r.g*e)+","+Math.round(n.b+r.b*e)+","+(n.a+r.a*e)+")":n+r*e;l.setAttr(s,a)}}_addListeners(){this.tween.onPlay=(()=>{this.anim.start()}),this.tween.onReverse=(()=>{this.anim.start()}),this.tween.onPause=(()=>{this.anim.stop()}),this.tween.onFinish=(()=>{var t=this.node,e=p.attrs[t._id][this._id];e.points&&e.points.trueEnd&&t.setAttr("points",e.points.trueEnd),this.onFinish&&this.onFinish.call(this)}),this.tween.onReset=(()=>{var t=this.node,e=p.attrs[t._id][this._id];e.points&&e.points.trueStart&&t.points(e.points.trueStart),this.onReset&&this.onReset()}),this.tween.onUpdate=(()=>{this.onUpdate&&this.onUpdate.call(this)})}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(1e3*t),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var t,e=this.node._id,s=this._id,i=p.tweens[e];for(t in this.pause(),i)delete p.tweens[e][t];delete p.attrs[e][s]}}exports.Tween=p,p.attrs={},p.tweens={},s.Node.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()},new p(t).play()};const l={BackEaseIn(t,e,s,i){var n=1.70158;return s*(t/=i)*t*((n+1)*t-n)+e},BackEaseOut(t,e,s,i){var n=1.70158;return s*((t=t/i-1)*t*((n+1)*t+n)+1)+e},BackEaseInOut(t,e,s,i){var n=1.70158;return(t/=i/2)<1?s/2*(t*t*((1+(n*=1.525))*t-n))+e:s/2*((t-=2)*t*((1+(n*=1.525))*t+n)+2)+e},ElasticEaseIn(t,e,s,i,n,r){var a=0;return 0===t?e:1==(t/=i)?e+s:(r||(r=.3*i),!n||n<Math.abs(s)?(n=s,a=r/4):a=r/(2*Math.PI)*Math.asin(s/n),-n*Math.pow(2,10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/r)+e)},ElasticEaseOut(t,e,s,i,n,r){var a=0;return 0===t?e:1==(t/=i)?e+s:(r||(r=.3*i),!n||n<Math.abs(s)?(n=s,a=r/4):a=r/(2*Math.PI)*Math.asin(s/n),n*Math.pow(2,-10*t)*Math.sin((t*i-a)*(2*Math.PI)/r)+s+e)},ElasticEaseInOut(t,e,s,i,n,r){var a=0;return 0===t?e:2==(t/=i/2)?e+s:(r||(r=i*(.3*1.5)),!n||n<Math.abs(s)?(n=s,a=r/4):a=r/(2*Math.PI)*Math.asin(s/n),t<1?n*Math.pow(2,10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/r)*-.5+e:n*Math.pow(2,-10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/r)*.5+s+e)},BounceEaseOut:(t,e,s,i)=>(t/=i)<1/2.75?s*(7.5625*t*t)+e:t<2/2.75?s*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?s*(7.5625*(t-=2.25/2.75)*t+.9375)+e:s*(7.5625*(t-=2.625/2.75)*t+.984375)+e,BounceEaseIn:(t,e,s,i)=>s-l.BounceEaseOut(i-t,0,s,i)+e,BounceEaseInOut:(t,e,s,i)=>t<i/2?.5*l.BounceEaseIn(2*t,0,s,i)+e:.5*l.BounceEaseOut(2*t-i,0,s,i)+.5*s+e,EaseIn:(t,e,s,i)=>s*(t/=i)*t+e,EaseOut:(t,e,s,i)=>-s*(t/=i)*(t-2)+e,EaseInOut:(t,e,s,i)=>(t/=i/2)<1?s/2*t*t+e:-s/2*(--t*(t-2)-1)+e,StrongEaseIn:(t,e,s,i)=>s*(t/=i)*t*t*t*t+e,StrongEaseOut:(t,e,s,i)=>s*((t=t/i-1)*t*t*t*t+1)+e,StrongEaseInOut:(t,e,s,i)=>(t/=i/2)<1?s/2*t*t*t*t*t+e:s/2*((t-=2)*t*t*t*t+2)+e,Linear:(t,e,s,i)=>s*t/i+e};exports.Easings=l;
},{"./Util.js":"x014","./Animation.js":"DJCc","./Node.js":"aBpx","./Global.js":"h4Yu"}],"c82l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Konva=void 0;var e=require("./Global.js"),r=require("./Util.js"),a=require("./Node.js"),s=require("./Container.js"),t=require("./Stage.js"),i=require("./Layer.js"),n=require("./FastLayer.js"),o=require("./Group.js"),u=require("./DragAndDrop.js"),j=require("./Shape.js"),p=require("./Animation.js"),q=require("./Tween.js"),l=require("./Context.js"),v=require("./Canvas.js");const d=r.Util._assign(e.Konva,{Util:r.Util,Transform:r.Transform,Node:a.Node,Container:s.Container,Stage:t.Stage,stages:t.stages,Layer:i.Layer,FastLayer:n.FastLayer,Group:o.Group,DD:u.DD,Shape:j.Shape,shapes:j.shapes,Animation:p.Animation,Tween:q.Tween,Easings:q.Easings,Context:l.Context,Canvas:v.Canvas});exports.Konva=d;var g=d;exports.default=g;
},{"./Global.js":"h4Yu","./Util.js":"x014","./Node.js":"aBpx","./Container.js":"RKpO","./Stage.js":"ys4P","./Layer.js":"Tho9","./FastLayer.js":"rPsV","./Group.js":"gLGN","./DragAndDrop.js":"zIBW","./Shape.js":"D7fl","./Animation.js":"DJCc","./Tween.js":"APeL","./Context.js":"JCy7","./Canvas.js":"ZrUi"}],"cBh1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Arc=void 0;var e=require("../Factory.js"),t=require("../Shape.js"),r=require("../Global.js"),a=require("../Validators.js");class i extends t.Shape{_sceneFunc(e){var t=r.Konva.getAngle(this.angle()),a=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,t,a),e.arc(0,0,this.innerRadius(),t,0,!a),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}exports.Arc=i,i.prototype._centroid=!0,i.prototype.className="Arc",i.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(i),e.Factory.addGetterSetter(i,"innerRadius",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(i,"outerRadius",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(i,"angle",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(i,"clockwise",!1,(0,a.getBooleanValidator)());
},{"../Factory.js":"OqKZ","../Shape.js":"D7fl","../Global.js":"h4Yu","../Validators.js":"QpE5"}],"rYYZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Line=void 0;var t=require("../Factory.js"),e=require("../Shape.js"),i=require("../Validators.js"),n=require("../Global.js");function s(t,e,i,n,s,o,r){var h=Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2)),a=Math.sqrt(Math.pow(s-i,2)+Math.pow(o-n,2)),u=r*h/(h+a),c=r*a/(h+a);return[i-u*(s-t),n-u*(o-e),i+c*(s-t),n+c*(o-e)]}function o(t,e){var i,n,o=t.length,r=[];for(i=2;i<o-2;i+=2)n=s(t[i-2],t[i-1],t[i],t[i+1],t[i+2],t[i+3],e),isNaN(n[0])||(r.push(n[0]),r.push(n[1]),r.push(t[i]),r.push(t[i+1]),r.push(n[2]),r.push(n[3]));return r}class r extends e.Shape{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){var e,i,n,s=this.points(),o=s.length,r=this.tension(),h=this.closed(),a=this.bezier();if(o){if(t.beginPath(),t.moveTo(s[0],s[1]),0!==r&&o>4){for(i=(e=this.getTensionPoints()).length,n=h?0:4,h||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);n<i-2;)t.bezierCurveTo(e[n++],e[n++],e[n++],e[n++],e[n++],e[n++]);h||t.quadraticCurveTo(e[i-2],e[i-1],s[o-2],s[o-1])}else if(a)for(n=2;n<o;)t.bezierCurveTo(s[n++],s[n++],s[n++],s[n++],s[n++],s[n++]);else for(n=2;n<o;n+=2)t.lineTo(s[n],s[n+1]);h?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():o(this.points(),this.tension())}_getTensionPointsClosed(){var t=this.points(),e=t.length,i=this.tension(),n=s(t[e-2],t[e-1],t[0],t[1],t[2],t[3],i),r=s(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],i),h=o(t,i);return[n[2],n[3]].concat(h).concat([r[0],r[1],t[e-2],t[e-1],r[2],r[3],n[0],n[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};for(var e,i,n=(t=0!==this.tension()?[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:this.points())[0],s=t[0],o=t[1],r=t[1],h=0;h<t.length/2;h++)e=t[2*h],i=t[2*h+1],n=Math.min(n,e),s=Math.max(s,e),o=Math.min(o,i),r=Math.max(r,i);return{x:n,y:o,width:s-n,height:r-o}}}exports.Line=r,r.prototype.className="Line",r.prototype._attrsAffectingSize=["points","bezier","tension"],(0,n._registerNode)(r),t.Factory.addGetterSetter(r,"closed",!1),t.Factory.addGetterSetter(r,"bezier",!1),t.Factory.addGetterSetter(r,"tension",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"points",[],(0,i.getNumberArrayValidator)());
},{"../Factory.js":"OqKZ","../Shape.js":"D7fl","../Validators.js":"QpE5","../Global.js":"h4Yu"}],"OQ17":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Path=void 0;var t=require("../Factory.js"),a=require("../Shape.js"),e=require("../Global.js");class s extends a.Shape{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this.dataArray=s.parsePathData(this.data()),this.pathLength=0;for(var a=0;a<this.dataArray.length;++a)this.pathLength+=this.dataArray[a].pathLength;this.on("dataChange.konva",function(){this.dataArray=s.parsePathData(this.data()),this.pathLength=0;for(var t=0;t<this.dataArray.length;++t)this.pathLength+=this.dataArray[t].pathLength})}_sceneFunc(t){var a=this.dataArray;t.beginPath();for(var e=!1,s=0;s<a.length;s++){var i=a[s].command,r=a[s].points;switch(i){case"L":t.lineTo(r[0],r[1]);break;case"M":t.moveTo(r[0],r[1]);break;case"C":t.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);break;case"Q":t.quadraticCurveTo(r[0],r[1],r[2],r[3]);break;case"A":var n=r[0],h=r[1],o=r[2],c=r[3],p=r[4],f=r[5],u=r[6],g=r[7],l=o>c?o:c,d=o>c?1:o/c,L=o>c?c/o:1;t.translate(n,h),t.rotate(u),t.scale(d,L),t.arc(0,0,l,p,p+f,1-g),t.scale(1/d,1/L),t.rotate(-u),t.translate(-n,-h);break;case"z":e=!0,t.closePath()}}e||this.hasFill()?t.fillStrokeShape(this):t.strokeShape(this)}getSelfRect(){var t=[];this.dataArray.forEach(function(a){if("A"===a.command){var e=a.points[4],i=a.points[5],r=a.points[4]+i,n=Math.PI/180;if(Math.abs(e-r)<n&&(n=Math.abs(e-r)),i<0)for(let i=e-n;i>r;i-=n){const e=s.getPointOnEllipticalArc(a.points[0],a.points[1],a.points[2],a.points[3],i,0);t.push(e.x,e.y)}else for(let i=e+n;i<r;i+=n){const e=s.getPointOnEllipticalArc(a.points[0],a.points[1],a.points[2],a.points[3],i,0);t.push(e.x,e.y)}}else if("C"===a.command)for(let h=0;h<=1;h+=.01){const e=s.getPointOnCubicBezier(h,a.start.x,a.start.y,a.points[0],a.points[1],a.points[2],a.points[3],a.points[4],a.points[5]);t.push(e.x,e.y)}else t=t.concat(a.points)});for(var a,e,i=t[0],r=t[0],n=t[1],h=t[1],o=0;o<t.length/2;o++)a=t[2*o],e=t[2*o+1],isNaN(a)||(i=Math.min(i,a),r=Math.max(r,a)),isNaN(e)||(n=Math.min(n,e),h=Math.max(h,e));return{x:Math.round(i),y:Math.round(n),width:Math.round(r-i),height:Math.round(h-n)}}getLength(){return this.pathLength}getPointAtLength(t){var a,e=0,i=this.dataArray.length;if(!i)return null;for(;e<i&&t>this.dataArray[e].pathLength;)t-=this.dataArray[e].pathLength,++e;if(e===i)return{x:(a=this.dataArray[e-1].points.slice(-2))[0],y:a[1]};if(t<.01)return{x:(a=this.dataArray[e].points.slice(0,2))[0],y:a[1]};var r=this.dataArray[e],n=r.points;switch(r.command){case"L":return s.getPointOnLine(t,r.start.x,r.start.y,n[0],n[1]);case"C":return s.getPointOnCubicBezier(t/r.pathLength,r.start.x,r.start.y,n[0],n[1],n[2],n[3],n[4],n[5]);case"Q":return s.getPointOnQuadraticBezier(t/r.pathLength,r.start.x,r.start.y,n[0],n[1],n[2],n[3]);case"A":var h=n[0],o=n[1],c=n[2],p=n[3],f=n[4],u=n[5],g=n[6];return f+=u*t/r.pathLength,s.getPointOnEllipticalArc(h,o,c,p,f,g)}return null}static getLineLength(t,a,e,s){return Math.sqrt((e-t)*(e-t)+(s-a)*(s-a))}static getPointOnLine(t,a,e,s,i,r,n){void 0===r&&(r=a),void 0===n&&(n=e);var h=(i-e)/(s-a+1e-8),o=Math.sqrt(t*t/(1+h*h));s<a&&(o*=-1);var c,p=h*o;if(s===a)c={x:r,y:n+p};else if((n-e)/(r-a+1e-8)===h)c={x:r+o,y:n+p};else{var f,u,g=this.getLineLength(a,e,s,i),l=(r-a)*(s-a)+(n-e)*(i-e);f=a+(l/=g*g)*(s-a),u=e+l*(i-e);var d=this.getLineLength(r,n,f,u),L=Math.sqrt(t*t-d*d);o=Math.sqrt(L*L/(1+h*h)),s<a&&(o*=-1),c={x:f+o,y:u+(p=h*o)}}return c}static getPointOnCubicBezier(t,a,e,s,i,r,n,h,o){function c(t){return t*t*t}function p(t){return 3*t*t*(1-t)}function f(t){return 3*t*(1-t)*(1-t)}function u(t){return(1-t)*(1-t)*(1-t)}return{x:h*c(t)+r*p(t)+s*f(t)+a*u(t),y:o*c(t)+n*p(t)+i*f(t)+e*u(t)}}static getPointOnQuadraticBezier(t,a,e,s,i,r,n){function h(t){return t*t}function o(t){return 2*t*(1-t)}function c(t){return(1-t)*(1-t)}return{x:r*h(t)+s*o(t)+a*c(t),y:n*h(t)+i*o(t)+e*c(t)}}static getPointOnEllipticalArc(t,a,e,s,i,r){var n=Math.cos(r),h=Math.sin(r),o=e*Math.cos(i),c=s*Math.sin(i);return{x:t+(o*n-c*h),y:a+(o*h+c*n)}}static parsePathData(t){if(!t)return[];var a=t,e=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];a=a.replace(new RegExp(" ","g"),",");for(var s=0;s<e.length;s++)a=a.replace(new RegExp(e[s],"g"),"|"+e[s]);var i,r=a.split("|"),n=[],h=[],o=0,c=0,p=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(s=1;s<r.length;s++){var f=r[s],u=f.charAt(0);for(f=f.slice(1),h.length=0;i=p.exec(f);)h.push(i[0]);for(var g=[],l=0,d=h.length;l<d;l++)if("00"!==h[l]){var L=parseFloat(h[l]);isNaN(L)?g.push(0):g.push(L)}else g.push(0,0);for(;g.length>0&&!isNaN(g[0]);){var y,v,M,P,b,x,m,A,k,C,O=null,z=[],q=o,E=c;switch(u){case"l":o+=g.shift(),c+=g.shift(),O="L",z.push(o,c);break;case"L":o=g.shift(),c=g.shift(),z.push(o,c);break;case"m":var Q=g.shift(),N=g.shift();if(o+=Q,c+=N,O="M",n.length>2&&"z"===n[n.length-1].command)for(var S=n.length-2;S>=0;S--)if("M"===n[S].command){o=n[S].points[0]+Q,c=n[S].points[1]+N;break}z.push(o,c),u="l";break;case"M":o=g.shift(),c=g.shift(),O="M",z.push(o,c),u="L";break;case"h":o+=g.shift(),O="L",z.push(o,c);break;case"H":o=g.shift(),O="L",z.push(o,c);break;case"v":c+=g.shift(),O="L",z.push(o,c);break;case"V":c=g.shift(),O="L",z.push(o,c);break;case"C":z.push(g.shift(),g.shift(),g.shift(),g.shift()),o=g.shift(),c=g.shift(),z.push(o,c);break;case"c":z.push(o+g.shift(),c+g.shift(),o+g.shift(),c+g.shift()),o+=g.shift(),c+=g.shift(),O="C",z.push(o,c);break;case"S":v=o,M=c,"C"===(y=n[n.length-1]).command&&(v=o+(o-y.points[2]),M=c+(c-y.points[3])),z.push(v,M,g.shift(),g.shift()),o=g.shift(),c=g.shift(),O="C",z.push(o,c);break;case"s":v=o,M=c,"C"===(y=n[n.length-1]).command&&(v=o+(o-y.points[2]),M=c+(c-y.points[3])),z.push(v,M,o+g.shift(),c+g.shift()),o+=g.shift(),c+=g.shift(),O="C",z.push(o,c);break;case"Q":z.push(g.shift(),g.shift()),o=g.shift(),c=g.shift(),z.push(o,c);break;case"q":z.push(o+g.shift(),c+g.shift()),o+=g.shift(),c+=g.shift(),O="Q",z.push(o,c);break;case"T":v=o,M=c,"Q"===(y=n[n.length-1]).command&&(v=o+(o-y.points[0]),M=c+(c-y.points[1])),o=g.shift(),c=g.shift(),O="Q",z.push(v,M,o,c);break;case"t":v=o,M=c,"Q"===(y=n[n.length-1]).command&&(v=o+(o-y.points[0]),M=c+(c-y.points[1])),o+=g.shift(),c+=g.shift(),O="Q",z.push(v,M,o,c);break;case"A":P=g.shift(),b=g.shift(),x=g.shift(),m=g.shift(),A=g.shift(),k=o,C=c,o=g.shift(),c=g.shift(),O="A",z=this.convertEndpointToCenterParameterization(k,C,o,c,m,A,P,b,x);break;case"a":P=g.shift(),b=g.shift(),x=g.shift(),m=g.shift(),A=g.shift(),k=o,C=c,o+=g.shift(),c+=g.shift(),O="A",z=this.convertEndpointToCenterParameterization(k,C,o,c,m,A,P,b,x)}n.push({command:O||u,points:z,start:{x:q,y:E},pathLength:this.calcLength(q,E,O||u,z)})}"z"!==u&&"Z"!==u||n.push({command:"z",points:[],start:void 0,pathLength:0})}return n}static calcLength(t,a,e,i){var r,n,h,o,c=s;switch(e){case"L":return c.getLineLength(t,a,i[0],i[1]);case"C":for(r=0,n=c.getPointOnCubicBezier(0,t,a,i[0],i[1],i[2],i[3],i[4],i[5]),o=.01;o<=1;o+=.01)h=c.getPointOnCubicBezier(o,t,a,i[0],i[1],i[2],i[3],i[4],i[5]),r+=c.getLineLength(n.x,n.y,h.x,h.y),n=h;return r;case"Q":for(r=0,n=c.getPointOnQuadraticBezier(0,t,a,i[0],i[1],i[2],i[3]),o=.01;o<=1;o+=.01)h=c.getPointOnQuadraticBezier(o,t,a,i[0],i[1],i[2],i[3]),r+=c.getLineLength(n.x,n.y,h.x,h.y),n=h;return r;case"A":r=0;var p=i[4],f=i[5],u=i[4]+f,g=Math.PI/180;if(Math.abs(p-u)<g&&(g=Math.abs(p-u)),n=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],p,0),f<0)for(o=p-g;o>u;o-=g)h=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],o,0),r+=c.getLineLength(n.x,n.y,h.x,h.y),n=h;else for(o=p+g;o<u;o+=g)h=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],o,0),r+=c.getLineLength(n.x,n.y,h.x,h.y),n=h;return h=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],u,0),r+=c.getLineLength(n.x,n.y,h.x,h.y)}return 0}static convertEndpointToCenterParameterization(t,a,e,s,i,r,n,h,o){var c=o*(Math.PI/180),p=Math.cos(c)*(t-e)/2+Math.sin(c)*(a-s)/2,f=-1*Math.sin(c)*(t-e)/2+Math.cos(c)*(a-s)/2,u=p*p/(n*n)+f*f/(h*h);u>1&&(n*=Math.sqrt(u),h*=Math.sqrt(u));var g=Math.sqrt((n*n*(h*h)-n*n*(f*f)-h*h*(p*p))/(n*n*(f*f)+h*h*(p*p)));i===r&&(g*=-1),isNaN(g)&&(g=0);var l=g*n*f/h,d=g*-h*p/n,L=(t+e)/2+Math.cos(c)*l-Math.sin(c)*d,y=(a+s)/2+Math.sin(c)*l+Math.cos(c)*d,v=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},M=function(t,a){return(t[0]*a[0]+t[1]*a[1])/(v(t)*v(a))},P=function(t,a){return(t[0]*a[1]<t[1]*a[0]?-1:1)*Math.acos(M(t,a))},b=P([1,0],[(p-l)/n,(f-d)/h]),x=[(p-l)/n,(f-d)/h],m=[(-1*p-l)/n,(-1*f-d)/h],A=P(x,m);return M(x,m)<=-1&&(A=Math.PI),M(x,m)>=1&&(A=0),0===r&&A>0&&(A-=2*Math.PI),1===r&&A<0&&(A+=2*Math.PI),[L,y,n,h,b,A,c,r]}}exports.Path=s,s.prototype.className="Path",s.prototype._attrsAffectingSize=["data"],(0,e._registerNode)(s),t.Factory.addGetterSetter(s,"data");
},{"../Factory.js":"OqKZ","../Shape.js":"D7fl","../Global.js":"h4Yu"}],"mcgL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Arrow=void 0;var t=require("../Factory.js"),e=require("./Line.js"),r=require("../Validators.js"),i=require("../Global.js"),n=require("./Path.js");class a extends e.Line{_sceneFunc(t){super._sceneFunc(t);var e=2*Math.PI,r=this.points(),i=r,a=0!==this.tension()&&r.length>4;a&&(i=this.getTensionPoints());var s,o,h=this.pointerLength(),l=r.length;if(a){const t=[i[i.length-4],i[i.length-3],i[i.length-2],i[i.length-1],r[l-2],r[l-1]],e=n.Path.calcLength(i[i.length-4],i[i.length-3],"C",t),a=n.Path.getPointOnQuadraticBezier(Math.min(1,1-h/e),t[0],t[1],t[2],t[3],t[4],t[5]);s=r[l-2]-a.x,o=r[l-1]-a.y}else s=r[l-2]-r[l-4],o=r[l-1]-r[l-3];var d=(Math.atan2(o,s)+e)%e,g=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(r[l-2],r[l-1]),t.rotate(d),t.moveTo(0,0),t.lineTo(-h,g/2),t.lineTo(-h,-g/2),t.closePath(),t.restore()),this.pointerAtBeginning()&&(t.save(),t.translate(r[0],r[1]),a?(s=(i[0]+i[2])/2-r[0],o=(i[1]+i[3])/2-r[1]):(s=r[2]-r[0],o=r[3]-r[1]),t.rotate((Math.atan2(-o,-s)+e)%e),t.moveTo(0,0),t.lineTo(-h,g/2),t.lineTo(-h,-g/2),t.closePath(),t.restore());var c=this.dashEnabled();c&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),c&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),e=this.pointerWidth()/2;return{x:t.x-e,y:t.y-e,width:t.width+2*e,height:t.height+2*e}}}exports.Arrow=a,a.prototype.className="Arrow",(0,i._registerNode)(a),t.Factory.addGetterSetter(a,"pointerLength",10,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(a,"pointerWidth",10,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(a,"pointerAtBeginning",!1),t.Factory.addGetterSetter(a,"pointerAtEnding",!0);
},{"../Factory.js":"OqKZ","./Line.js":"rYYZ","../Validators.js":"QpE5","../Global.js":"h4Yu","./Path.js":"OQ17"}],"v2GK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Circle=void 0;var e=require("../Factory.js"),t=require("../Shape.js"),r=require("../Validators.js"),s=require("../Global.js");class i extends t.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}exports.Circle=i,i.prototype._centroid=!0,i.prototype.className="Circle",i.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(i),e.Factory.addGetterSetter(i,"radius",0,(0,r.getNumberValidator)());
},{"../Factory.js":"OqKZ","../Shape.js":"D7fl","../Validators.js":"QpE5","../Global.js":"h4Yu"}],"bOaQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Ellipse=void 0;var e=require("../Factory.js"),t=require("../Shape.js"),r=require("../Validators.js"),s=require("../Global.js");class a extends t.Shape{_sceneFunc(e){var t=this.radiusX(),r=this.radiusY();e.beginPath(),e.save(),t!==r&&e.scale(1,r/t),e.arc(0,0,t,0,2*Math.PI,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radiusX()}getHeight(){return 2*this.radiusY()}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}exports.Ellipse=a,a.prototype.className="Ellipse",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,s._registerNode)(a),e.Factory.addComponentsGetterSetter(a,"radius",["x","y"]),e.Factory.addGetterSetter(a,"radiusX",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"radiusY",0,(0,r.getNumberValidator)());
},{"../Factory.js":"OqKZ","../Shape.js":"D7fl","../Validators.js":"QpE5","../Global.js":"h4Yu"}],"VPFu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Image=void 0;var t=require("../Util.js"),e=require("../Factory.js"),r=require("../Shape.js"),a=require("../Validators.js"),i=require("../Global.js");class s extends r.Shape{constructor(t){super(t),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&4===t.readyState||t&&t.addEventListener&&t.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(t){const e=this.getWidth(),r=this.getHeight(),a=this.attrs.image;let i;if(a){const t=this.attrs.cropWidth,s=this.attrs.cropHeight;i=t&&s?[a,this.cropX(),this.cropY(),t,s,0,0,e,r]:[a,0,0,e,r]}(this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,e,r),t.closePath(),t.fillStrokeShape(this)),a&&t.drawImage.apply(t,i)}_hitFunc(t){var e=this.width(),r=this.height();t.beginPath(),t.rect(0,0,e,r),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,e;return null!==(t=this.attrs.width)&&void 0!==t?t:null===(e=this.image())||void 0===e?void 0:e.width}getHeight(){var t,e;return null!==(t=this.attrs.height)&&void 0!==t?t:null===(e=this.image())||void 0===e?void 0:e.height}static fromURL(e,r){var a=t.Util.createImageElement();a.onload=function(){var t=new s({image:a});r(t)},a.crossOrigin="Anonymous",a.src=e}}exports.Image=s,s.prototype.className="Image",(0,i._registerNode)(s),e.Factory.addGetterSetter(s,"image"),e.Factory.addComponentsGetterSetter(s,"crop",["x","y","width","height"]),e.Factory.addGetterSetter(s,"cropX",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropY",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropWidth",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropHeight",0,(0,a.getNumberValidator)());
},{"../Util.js":"x014","../Factory.js":"OqKZ","../Shape.js":"D7fl","../Validators.js":"QpE5","../Global.js":"h4Yu"}],"JFbL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tag=exports.Label=void 0;var t=require("../Factory.js"),e=require("../Shape.js"),i=require("../Group.js"),r=require("../Validators.js"),o=require("../Global.js"),a=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height"],n="Change.konva",h="none",s="up",d="right",l="down",c="left",g=a.length;class p extends i.Group{constructor(t){super(t),this.on("add.konva",function(t){this._addListeners(t.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){var e,i=this,r=function(){i._sync()};for(e=0;e<g;e++)t.on(a[e]+n,r)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var t,e,i,r,o,a,n,h=this.getText(),g=this.getTag();if(h&&g){switch(t=h.width(),e=h.height(),i=g.pointerDirection(),r=g.pointerWidth(),n=g.pointerHeight(),o=0,a=0,i){case s:o=t/2,a=-1*n;break;case d:o=t+r,a=e/2;break;case l:o=t/2,a=e+n;break;case c:o=-1*r,a=e/2}g.setAttrs({x:-1*o,y:-1*a,width:t,height:e}),h.setAttrs({x:-1*o,y:-1*a})}}}exports.Label=p,p.prototype.className="Label",(0,o._registerNode)(p);class u extends e.Shape{_sceneFunc(t){var e=this.width(),i=this.height(),r=this.pointerDirection(),o=this.pointerWidth(),a=this.pointerHeight(),n=this.cornerRadius();let h=0,g=0,p=0,u=0;"number"==typeof n?h=g=p=u=Math.min(n,e/2,i/2):(h=Math.min(n[0]||0,e/2,i/2),g=Math.min(n[1]||0,e/2,i/2),u=Math.min(n[2]||0,e/2,i/2),p=Math.min(n[3]||0,e/2,i/2)),t.beginPath(),t.moveTo(h,0),r===s&&(t.lineTo((e-o)/2,0),t.lineTo(e/2,-1*a),t.lineTo((e+o)/2,0)),t.lineTo(e-g,0),t.arc(e-g,g,g,3*Math.PI/2,0,!1),r===d&&(t.lineTo(e,(i-a)/2),t.lineTo(e+o,i/2),t.lineTo(e,(i+a)/2)),t.lineTo(e,i-u),t.arc(e-u,i-u,u,0,Math.PI/2,!1),r===l&&(t.lineTo((e+o)/2,i),t.lineTo(e/2,i+a),t.lineTo((e-o)/2,i)),t.lineTo(p,i),t.arc(p,i-p,p,Math.PI/2,Math.PI,!1),r===c&&(t.lineTo(0,(i+a)/2),t.lineTo(-1*o,i/2),t.lineTo(0,(i-a)/2)),t.lineTo(0,h),t.arc(h,h,h,Math.PI,3*Math.PI/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){var t=0,e=0,i=this.pointerWidth(),r=this.pointerHeight(),o=this.pointerDirection(),a=this.width(),n=this.height();return o===s?(e-=r,n+=r):o===l?n+=r:o===c?(t-=1.5*i,a+=i):o===d&&(a+=1.5*i),{x:t,y:e,width:a,height:n}}}exports.Tag=u,u.prototype.className="Tag",(0,o._registerNode)(u),t.Factory.addGetterSetter(u,"pointerDirection",h),t.Factory.addGetterSetter(u,"pointerWidth",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(u,"pointerHeight",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(u,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4));
},{"../Factory.js":"OqKZ","../Shape.js":"D7fl","../Group.js":"gLGN","../Validators.js":"QpE5","../Global.js":"h4Yu"}],"KC8S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Rect=void 0;var e=require("../Factory.js"),t=require("../Shape.js"),r=require("../Global.js"),a=require("../Validators.js");class i extends t.Shape{_sceneFunc(e){var t=this.cornerRadius(),r=this.width(),a=this.height();if(e.beginPath(),t){let i=0,s=0,o=0,h=0;"number"==typeof t?i=s=o=h=Math.min(t,r/2,a/2):(i=Math.min(t[0]||0,r/2,a/2),s=Math.min(t[1]||0,r/2,a/2),h=Math.min(t[2]||0,r/2,a/2),o=Math.min(t[3]||0,r/2,a/2)),e.moveTo(i,0),e.lineTo(r-s,0),e.arc(r-s,s,s,3*Math.PI/2,0,!1),e.lineTo(r,a-h),e.arc(r-h,a-h,h,0,Math.PI/2,!1),e.lineTo(o,a),e.arc(o,a-o,o,Math.PI/2,Math.PI,!1),e.lineTo(0,i),e.arc(i,i,i,Math.PI,3*Math.PI/2,!1)}else e.rect(0,0,r,a);e.closePath(),e.fillStrokeShape(this)}}exports.Rect=i,i.prototype.className="Rect",(0,r._registerNode)(i),e.Factory.addGetterSetter(i,"cornerRadius",0,(0,a.getNumberOrArrayOfNumbersValidator)(4));
},{"../Factory.js":"OqKZ","../Shape.js":"D7fl","../Global.js":"h4Yu","../Validators.js":"QpE5"}],"t8Ih":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RegularPolygon=void 0;var t=require("../Factory.js"),e=require("../Shape.js"),r=require("../Validators.js"),s=require("../Global.js");class a extends e.Shape{_sceneFunc(t){const e=this._getPoints();t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var r=1;r<e.length;r++)t.lineTo(e[r].x,e[r].y);t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,e=this.attrs.radius||0,r=[];for(var s=0;s<t;s++)r.push({x:e*Math.sin(2*s*Math.PI/t),y:-1*e*Math.cos(2*s*Math.PI/t)});return r}getSelfRect(){const t=this._getPoints();var e=t[0].x,r=t[0].y,s=t[0].x,a=t[0].y;return t.forEach(t=>{e=Math.min(e,t.x),r=Math.max(r,t.x),s=Math.min(s,t.y),a=Math.max(a,t.y)}),{x:e,y:s,width:r-e,height:a-s}}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}exports.RegularPolygon=a,a.prototype.className="RegularPolygon",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(a),t.Factory.addGetterSetter(a,"radius",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(a,"sides",0,(0,r.getNumberValidator)());
},{"../Factory.js":"OqKZ","../Shape.js":"D7fl","../Validators.js":"QpE5","../Global.js":"h4Yu"}],"G8TU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Ring=void 0;var e=require("../Factory.js"),t=require("../Shape.js"),r=require("../Validators.js"),i=require("../Global.js"),s=2*Math.PI;class a extends t.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,s,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),s,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}exports.Ring=a,a.prototype.className="Ring",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,i._registerNode)(a),e.Factory.addGetterSetter(a,"innerRadius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"outerRadius",0,(0,r.getNumberValidator)());
},{"../Factory.js":"OqKZ","../Shape.js":"D7fl","../Validators.js":"QpE5","../Global.js":"h4Yu"}],"j0LZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sprite=void 0;var e=require("../Factory.js"),t=require("../Shape.js"),a=require("../Animation.js"),i=require("../Validators.js"),r=require("../Global.js");class s extends t.Shape{constructor(e){super(e),this._updated=!0,this.anim=new a.Animation(()=>{var e=this._updated;return this._updated=!1,e}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){var t=this.animation(),a=this.frameIndex(),i=4*a,r=this.animations()[t],s=this.frameOffsets(),n=r[i+0],h=r[i+1],o=r[i+2],d=r[i+3],m=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,o,d),e.closePath(),e.fillStrokeShape(this)),m)if(s){var f=s[t],u=2*a;e.drawImage(m,n,h,o,d,f[u+0],f[u+1],o,d)}else e.drawImage(m,n,h,o,d,0,0,o,d)}_hitFunc(e){var t=this.animation(),a=this.frameIndex(),i=4*a,r=this.animations()[t],s=this.frameOffsets(),n=r[i+2],h=r[i+3];if(e.beginPath(),s){var o=s[t],d=2*a;e.rect(o[d+0],o[d+1],n,h)}else e.rect(0,0,n,h);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),t=this.animation();e<this.animations()[t].length/4-1?this.frameIndex(e+1):this.frameIndex(0)}}exports.Sprite=s,s.prototype.className="Sprite",(0,r._registerNode)(s),e.Factory.addGetterSetter(s,"animation"),e.Factory.addGetterSetter(s,"animations"),e.Factory.addGetterSetter(s,"frameOffsets"),e.Factory.addGetterSetter(s,"image"),e.Factory.addGetterSetter(s,"frameIndex",0,(0,i.getNumberValidator)()),e.Factory.addGetterSetter(s,"frameRate",17,(0,i.getNumberValidator)()),e.Factory.backCompat(s,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});
},{"../Factory.js":"OqKZ","../Shape.js":"D7fl","../Animation.js":"DJCc","../Validators.js":"QpE5","../Global.js":"h4Yu"}],"rMIF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Star=void 0;var t=require("../Factory.js"),e=require("../Shape.js"),r=require("../Validators.js"),a=require("../Global.js");class i extends e.Shape{_sceneFunc(t){var e=this.innerRadius(),r=this.outerRadius(),a=this.numPoints();t.beginPath(),t.moveTo(0,0-r);for(var i=1;i<2*a;i++){var s=i%2==0?r:e,o=s*Math.sin(i*Math.PI/a),u=-1*s*Math.cos(i*Math.PI/a);t.lineTo(o,u)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}exports.Star=i,i.prototype.className="Star",i.prototype._centroid=!0,i.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,a._registerNode)(i),t.Factory.addGetterSetter(i,"numPoints",5,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(i,"innerRadius",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(i,"outerRadius",0,(0,r.getNumberValidator)());
},{"../Factory.js":"OqKZ","../Shape.js":"D7fl","../Validators.js":"QpE5","../Global.js":"h4Yu"}],"zj7E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stringToArray=h,exports.Text=void 0;var t=require("../Util.js"),e=require("../Factory.js"),i=require("../Shape.js"),r=require("../Validators.js"),a=require("../Global.js");function h(t){return Array.from(t)}var s,n="auto",o="center",l="justify",d="Change.konva",g="2d",x="-",f="left",p="text",c="Text",u="top",S="bottom",T="middle",_="normal",v="px ",m=" ",y="right",F="word",A="char",W="none",b="",w=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],k=w.length;function G(t){return t.split(",").map(t=>{const e=(t=t.trim()).indexOf(" ")>=0,i=t.indexOf('"')>=0||t.indexOf("'")>=0;return e&&!i&&(t=`"${t}"`),t}).join(", ")}function H(){return s||(s=t.Util.createCanvasElement().getContext(g))}function z(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function V(t){t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function O(t){return(t=t||{}).fillLinearGradientColorStops||t.fillRadialGradientColorStops||t.fillPatternImage||(t.fill=t.fill||"black"),t}class C extends i.Shape{constructor(t){super(O(t)),this._partialTextX=0,this._partialTextY=0;for(var e=0;e<k;e++)this.on(w[e]+d,this._setTextData);this._setTextData()}_sceneFunc(t){var e=this.textArr,i=e.length;if(this.text()){var r,a=this.padding(),s=this.fontSize(),n=this.lineHeight()*s,d=this.verticalAlign(),g=0,x=this.align(),p=this.getWidth(),c=this.letterSpacing(),u=this.fill(),_=this.textDecoration(),v=-1!==_.indexOf("underline"),m=-1!==_.indexOf("line-through"),F=0,A=(F=n/2,0),W=0;for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",T),t.setAttr("textAlign",f),d===T?g=(this.getHeight()-i*n-2*a)/2:d===S&&(g=this.getHeight()-i*n-2*a),t.translate(a,g+a),r=0;r<i;r++){A=0,W=0;var b,w,k,G=e[r],H=G.text,z=G.width,V=r!==i-1;if(t.save(),x===y?A+=p-z-2*a:x===o&&(A+=(p-z-2*a)/2),v&&(t.save(),t.beginPath(),t.moveTo(A,F+W+Math.round(s/2)),w=0===(b=H.split(" ").length-1),k=x===l&&V&&!w?p-2*a:z,t.lineTo(A+Math.round(k),F+W+Math.round(s/2)),t.lineWidth=s/15,t.strokeStyle=u,t.stroke(),t.restore()),m&&(t.save(),t.beginPath(),t.moveTo(A,F+W),w=0===(b=H.split(" ").length-1),k=x===l&&V&&!w?p-2*a:z,t.lineTo(A+Math.round(k),F+W),t.lineWidth=s/15,t.strokeStyle=u,t.stroke(),t.restore()),0!==c||x===l){b=H.split(" ").length-1;for(var O=h(H),C=0;C<O.length;C++){var M=O[C];" "===M&&r!==i-1&&x===l&&(A+=(p-2*a-z)/b),this._partialTextX=A,this._partialTextY=F+W,this._partialText=M,t.fillStrokeShape(this),A+=this.measureSize(M).width+c}}else this._partialTextX=A,this._partialTextY=F+W,this._partialText=H,t.fillStrokeShape(this);t.restore(),i>1&&(F+=n)}}}_hitFunc(t){var e=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)}setText(e){var i=t.Util._isString(e)?e:null==e?"":e+"";return this._setAttr(p,i),this}getWidth(){return this.attrs.width===n||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){return this.attrs.height===n||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var e,i=H(),r=this.fontSize();return i.save(),i.font=this._getContextFont(),e=i.measureText(t),i.restore(),{width:e.width,height:r}}_getContextFont(){return this.fontStyle()+m+this.fontVariant()+m+(this.fontSize()+v)+G(this.fontFamily())}_addTextLine(t){this.align()===l&&(t=t.trim());var e=this._getTextWidth(t);return this.textArr.push({text:t,width:e})}_getTextWidth(t){var e=this.letterSpacing(),i=t.length;return H().measureText(t).width+(i?e*(i-1):0)}_setTextData(){var t=this.text().split("\n"),e=+this.fontSize(),i=0,r=this.lineHeight()*e,a=this.attrs.width,h=this.attrs.height,s=a!==n&&void 0!==a,o=h!==n&&void 0!==h,l=this.padding(),d=a-2*l,g=h-2*l,f=0,p=this.wrap(),c=p!==W,u=p!==A&&c,S=this.ellipsis();this.textArr=[],H().font=this._getContextFont();for(var T=S?this._getTextWidth(b):0,_=0,v=t.length;_<v;++_){var y=t[_],F=this._getTextWidth(y);if(s&&F>d)for(;y.length>0;){for(var w=0,k=y.length,G="",z=0;w<k;){var V=w+k>>>1,O=y.slice(0,V+1),C=this._getTextWidth(O)+T;C<=d?(w=V+1,G=O,z=C):k=V}if(!G)break;if(u){var M,j=y[G.length];(M=(j===m||j===x)&&z<=d?G.length:Math.max(G.lastIndexOf(m),G.lastIndexOf(x))+1)>0&&(w=M,G=G.slice(0,w),z=this._getTextWidth(G))}if(G=G.trimRight(),this._addTextLine(G),i=Math.max(i,z),f+=r,!c||o&&f+r>g){var N=this.textArr[this.textArr.length-1];if(N)if(S)this._getTextWidth(N.text+b)<d||(N.text=N.text.slice(0,N.text.length-3)),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(N.text+b);break}if((y=(y=y.slice(w)).trimLeft()).length>0&&(F=this._getTextWidth(y))<=d){this._addTextLine(y),f+=r,i=Math.max(i,F);break}}else this._addTextLine(y),f+=r,i=Math.max(i,F);if(o&&f+r>g)break}this.textHeight=e,this.textWidth=i}getStrokeScaleEnabled(){return!0}}exports.Text=C,C.prototype._fillFunc=z,C.prototype._strokeFunc=V,C.prototype.className=c,C.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,a._registerNode)(C),e.Factory.overWriteSetter(C,"width",(0,r.getNumberOrAutoValidator)()),e.Factory.overWriteSetter(C,"height",(0,r.getNumberOrAutoValidator)()),e.Factory.addGetterSetter(C,"fontFamily","Arial"),e.Factory.addGetterSetter(C,"fontSize",12,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(C,"fontStyle",_),e.Factory.addGetterSetter(C,"fontVariant",_),e.Factory.addGetterSetter(C,"padding",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(C,"align",f),e.Factory.addGetterSetter(C,"verticalAlign",u),e.Factory.addGetterSetter(C,"lineHeight",1,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(C,"wrap",F),e.Factory.addGetterSetter(C,"ellipsis",!1,(0,r.getBooleanValidator)()),e.Factory.addGetterSetter(C,"letterSpacing",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(C,"text","",(0,r.getStringValidator)()),e.Factory.addGetterSetter(C,"textDecoration","");
},{"../Util.js":"x014","../Factory.js":"OqKZ","../Shape.js":"D7fl","../Validators.js":"QpE5","../Global.js":"h4Yu"}],"OiBh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextPath=void 0;var t=require("../Util.js"),e=require("../Factory.js"),a=require("../Shape.js"),i=require("./Path.js"),r=require("./Text.js"),n=require("../Validators.js"),h=require("../Global.js"),o="",s="normal";function p(t){t.fillText(this.partialText,0,0)}function x(t){t.strokeText(this.partialText,0,0)}class g extends a.Shape{constructor(e){super(e),this.dummyCanvas=t.Util.createCanvasElement(),this.dataArray=[],this.dataArray=i.Path.parsePathData(this.attrs.data),this.on("dataChange.konva",function(){this.dataArray=i.Path.parsePathData(this.attrs.data),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva",this._setTextData),this._setTextData()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var e=this.textDecoration(),a=this.fill(),i=this.fontSize(),r=this.glyphInfo;"underline"===e&&t.beginPath();for(var n=0;n<r.length;n++){t.save();var h=r[n].p0;t.translate(h.x,h.y),t.rotate(r[n].rotation),this.partialText=r[n].text,t.fillStrokeShape(this),"underline"===e&&(0===n&&t.moveTo(0,i/2+1),t.lineTo(i,i/2+1)),t.restore()}"underline"===e&&(t.strokeStyle=a,t.lineWidth=i/20,t.stroke()),t.restore()}_hitFunc(t){t.beginPath();var e=this.glyphInfo;if(e.length>=1){var a=e[0].p0;t.moveTo(a.x,a.y)}for(var i=0;i<e.length;i++){var r=e[i].p1;t.lineTo(r.x,r.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return r.Text.prototype.setText.call(this,t)}_getContextFont(){return r.Text.prototype._getContextFont.call(this)}_getTextSize(t){var e=this.dummyCanvas.getContext("2d");e.save(),e.font=this._getContextFont();var a=e.measureText(t);return e.restore(),{width:a.width,height:parseInt(this.attrs.fontSize,10)}}_setTextData(){var t=this,e=this._getTextSize(this.attrs.text),a=this.letterSpacing(),n=this.align(),h=this.kerningFunc();this.textWidth=e.width,this.textHeight=e.height;var o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*a,0);this.glyphInfo=[];for(var s=0,p=0;p<t.dataArray.length;p++)t.dataArray[p].pathLength>0&&(s+=t.dataArray[p].pathLength);var x=0;"center"===n&&(x=Math.max(0,s/2-o/2)),"right"===n&&(x=Math.max(0,s-o));for(var g,l,d,y=(0,r.stringToArray)(this.text()),c=this.text().split(" ").length-1,f=-1,u=0,v=function(){u=0;for(var e=t.dataArray,a=f+1;a<e.length;a++){if(e[a].pathLength>0)return f=a,e[a];"M"===e[a].command&&(g={x:e[a].points[0],y:e[a].points[1]})}return{}},S=function(e){var r=t._getTextSize(e).width+a;" "===e&&"justify"===n&&(r+=(s-o)/c);var h=0,p=0;for(l=void 0;Math.abs(r-h)/r>.01&&p<20;){p++;for(var x=h;void 0===d;)(d=v())&&x+d.pathLength<r&&(x+=d.pathLength,d=void 0);if(d==={}||void 0===g)return;var y=!1;switch(d.command){case"L":i.Path.getLineLength(g.x,g.y,d.points[0],d.points[1])>r?l=i.Path.getPointOnLine(r,g.x,g.y,d.points[0],d.points[1],g.x,g.y):d=void 0;break;case"A":var f=d.points[4],S=d.points[5],T=d.points[4]+S;0===u?u=f+1e-8:r>h?u+=Math.PI/180*S/Math.abs(S):u-=Math.PI/360*S/Math.abs(S),(S<0&&u<T||S>=0&&u>T)&&(u=T,y=!0),l=i.Path.getPointOnEllipticalArc(d.points[0],d.points[1],d.points[2],d.points[3],u,d.points[6]);break;case"C":0===u?u=r>d.pathLength?1e-8:r/d.pathLength:r>h?u+=(r-h)/d.pathLength/2:u=Math.max(u-(h-r)/d.pathLength/2,0),u>1&&(u=1,y=!0),l=i.Path.getPointOnCubicBezier(u,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3],d.points[4],d.points[5]);break;case"Q":0===u?u=r/d.pathLength:r>h?u+=(r-h)/d.pathLength:u-=(h-r)/d.pathLength,u>1&&(u=1,y=!0),l=i.Path.getPointOnQuadraticBezier(u,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3])}void 0!==l&&(h=i.Path.getLineLength(g.x,g.y,l.x,l.y)),y&&(y=!1,d=void 0)}},T=x/(t._getTextSize("C").width+a)-1,m=0;m<T&&(S("C"),void 0!==g&&void 0!==l);m++)g=l;for(var F=0;F<y.length&&(S(y[F]),void 0!==g&&void 0!==l);F++){var P=i.Path.getLineLength(g.x,g.y,l.x,l.y),_=0;if(h)try{_=h(y[F-1],y[F])*this.fontSize()}catch(A){_=0}g.x+=_,l.x+=_,this.textWidth+=_;var L=i.Path.getPointOnLine(_+P/2,g.x,g.y,l.x,l.y),k=Math.atan2(l.y-g.y,l.x-g.x);this.glyphInfo.push({transposeX:L.x,transposeY:L.y,text:y[F],rotation:k,p0:g,p1:l}),g=l}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach(function(e){t.push(e.p0.x),t.push(e.p0.y),t.push(e.p1.x),t.push(e.p1.y)});for(var e,a,i=t[0]||0,r=t[0]||0,n=t[1]||0,h=t[1]||0,o=0;o<t.length/2;o++)e=t[2*o],a=t[2*o+1],i=Math.min(i,e),r=Math.max(r,e),n=Math.min(n,a),h=Math.max(h,a);var s=this.fontSize();return{x:i-s/2,y:n-s/2,width:r-i+s,height:h-n+s}}}exports.TextPath=g,g.prototype._fillFunc=p,g.prototype._strokeFunc=x,g.prototype._fillFuncHit=p,g.prototype._strokeFuncHit=x,g.prototype.className="TextPath",g.prototype._attrsAffectingSize=["text","fontSize","data"],(0,h._registerNode)(g),e.Factory.addGetterSetter(g,"data"),e.Factory.addGetterSetter(g,"fontFamily","Arial"),e.Factory.addGetterSetter(g,"fontSize",12,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(g,"fontStyle",s),e.Factory.addGetterSetter(g,"align","left"),e.Factory.addGetterSetter(g,"letterSpacing",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(g,"textBaseline","middle"),e.Factory.addGetterSetter(g,"fontVariant",s),e.Factory.addGetterSetter(g,"text",o),e.Factory.addGetterSetter(g,"textDecoration",null),e.Factory.addGetterSetter(g,"kerningFunc",null);
},{"../Util.js":"x014","../Factory.js":"OqKZ","../Shape.js":"D7fl","./Path.js":"OQ17","./Text.js":"zj7E","../Validators.js":"QpE5","../Global.js":"h4Yu"}],"Tnyj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Transformer=void 0;var t=require("../Util.js"),e=require("../Factory.js"),i=require("../Node.js"),o=require("../Shape.js"),n=require("./Rect.js"),r=require("../Group.js"),s=require("../Global.js"),h=require("../Validators.js"),a="tr-konva",d=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(t=>t+`.${a}`).join(" "),g="nodesRect",c=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"].map(t=>t+`.${a}`).join(" "),f={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const l="ontouchstart"in s.Konva._global;function m(e,i){if("rotater"===e)return"crosshair";i+=t.Util.degToRad(f[e]||0);var o=(t.Util.radToDeg(i)%360+360)%360;return t.Util._inRange(o,337.5,360)||t.Util._inRange(o,0,22.5)?"ns-resize":t.Util._inRange(o,22.5,67.5)?"nesw-resize":t.Util._inRange(o,67.5,112.5)?"ew-resize":t.Util._inRange(o,112.5,157.5)?"nwse-resize":t.Util._inRange(o,157.5,202.5)?"ns-resize":t.Util._inRange(o,202.5,247.5)?"nesw-resize":t.Util._inRange(o,247.5,292.5)?"ew-resize":t.Util._inRange(o,292.5,337.5)?"nwse-resize":(t.Util.error("Transformer has unknown angle for cursor detection: "+o),"pointer")}var u=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],y=1e8;function p(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}function _(t,e,i){const o=i.x+(t.x-i.x)*Math.cos(e)-(t.y-i.y)*Math.sin(e),n=i.y+(t.x-i.x)*Math.sin(e)+(t.y-i.y)*Math.cos(e);return Object.assign(Object.assign({},t),{rotation:t.rotation+e,x:o,y:n})}function b(t,e){return _(t,e,p(t))}function x(t,e,i){let o=e;for(let n=0;n<t.length;n++){const r=s.Konva.getAngle(t[n]),h=Math.abs(r-e)%(2*Math.PI);Math.min(h,2*Math.PI-h)<i&&(o=r)}return o}class v extends r.Group{constructor(t){super(t),this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(d,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(e){return t.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}setNodes(t=[]){return this._nodes&&this._nodes.length&&this.detach(),this._nodes=t,1===t.length&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(t=>{const e=t._attrsAffectingSize.map(t=>t+"Change."+a).join(" "),i=()=>{1===this.nodes().length&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),this._transforming||this.isDragging()||this.update()};t.on(e,i),t.on(c,i),t.on(`absoluteTransformChange.${a}`,i),t.on(`xChange.${a} yChange.${a}`,i),this._proxyDrag(t)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let e;t.on(`dragstart.${a}`,i=>{e=t.getAbsolutePosition(),this.isDragging()||t===this.findOne(".back")||this.startDrag(i,!1)}),t.on(`dragmove.${a}`,i=>{if(!e)return;const o=t.getAbsolutePosition(),n=o.x-e.x,r=o.y-e.y;this.nodes().forEach(e=>{if(e===t)return;if(e.isDragging())return;const o=e.getAbsolutePosition();e.setAbsolutePosition({x:o.x+n,y:o.y+r}),e.startDrag(i)}),e=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+a)}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(g),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(g,this.__getNodeRect)}__getNodeShape(t,e=this.rotation(),i){var o=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),n=t.getAbsoluteScale(i),r=t.getAbsolutePosition(i),h=o.x*n.x-t.offsetX()*n.x,a=o.y*n.y-t.offsetY()*n.y;const d=(s.Konva.getAngle(t.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return _({x:r.x+h*Math.cos(d)+a*Math.sin(-d),y:r.y+a*Math.cos(d)+h*Math.sin(d),width:o.width*n.x,height:o.height*n.y,rotation:d},-s.Konva.getAngle(e),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-y,y:-y,width:0,height:0,rotation:0};const e=[];this.nodes().map(t=>{const i=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var o=[{x:i.x,y:i.y},{x:i.x+i.width,y:i.y},{x:i.x+i.width,y:i.y+i.height},{x:i.x,y:i.y+i.height}],n=t.getAbsoluteTransform();o.forEach(function(t){var i=n.point(t);e.push(i)})});const i=new t.Transform;var o,n,r,h;i.rotate(-s.Konva.getAngle(this.rotation())),e.forEach(function(t){var e=i.point(t);void 0===o&&(o=r=e.x,n=h=e.y),o=Math.min(o,e.x),n=Math.min(n,e.y),r=Math.max(r,e.x),h=Math.max(h,e.y)}),i.invert();const a=i.point({x:o,y:n});return{x:a.x,y:a.y,width:r-o,height:h-n,rotation:s.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),u.forEach(function(t){this._createAnchor(t)}.bind(this)),this._createAnchor("rotater")}_createAnchor(t){var e=new n.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:l?10:"auto"}),i=this;e.on("mousedown touchstart",function(t){i._handleMouseDown(t)}),e.on("dragstart",t=>{e.stopDrag(),t.cancelBubble=!0}),e.on("dragend",t=>{t.cancelBubble=!0}),e.on("mouseenter",()=>{var i=s.Konva.getAngle(this.rotation()),o=m(t,i);e.getStage().content&&(e.getStage().content.style.cursor=o),this._cursorChange=!0}),e.on("mouseout",()=>{e.getStage().content&&(e.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(e)}_createBack(){var e=new o.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(e){var i=this.getParent(),o=i.padding();e.beginPath(),e.rect(-o,-o,this.width()+2*o,this.height()+2*o),e.moveTo(this.width()/2,-o),i.rotateEnabled()&&e.lineTo(this.width()/2,-i.rotateAnchorOffset()*t.Util._sign(this.height())-o),e.fillStrokeShape(this)},hitFunc:(t,e)=>{if(this.shouldOverdrawWholeArea()){var i=this.padding();t.beginPath(),t.rect(-i,-i,e.width()+2*i,e.height()+2*i),t.fillStrokeShape(e)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",t=>{t.cancelBubble=!0}),e.on("dragmove",t=>{t.cancelBubble=!0}),e.on("dragend",t=>{t.cancelBubble=!0}),this.on("dragmove",t=>{this.update()})}_handleMouseDown(t){this._movingAnchorName=t.target.name().split(" ")[0];var e=this._getNodeRect(),i=e.width,o=e.height,n=Math.sqrt(Math.pow(i,2)+Math.pow(o,2));this.sin=Math.abs(o/n),this.cos=Math.abs(i/n),"undefined"!=typeof window&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var r=t.target.getAbsolutePosition(),s=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:s.x-r.x,y:s.y-r.y},this._fire("transformstart",{evt:t,target:this.getNode()}),this._nodes.forEach(e=>{e._fire("transformstart",{evt:t,target:e})})}_handleMouseMove(t){var e,i,o,n=this.findOne("."+this._movingAnchorName),r=n.getStage();r.setPointersPositions(t);const h=r.getPointerPosition();var a={x:h.x-this._anchorDragOffset.x,y:h.y-this._anchorDragOffset.y};const d=n.getAbsolutePosition();n.setAbsolutePosition(a);const g=n.getAbsolutePosition();if(d.x!==g.x||d.y!==g.y)if("rotater"!==this._movingAnchorName){var c=this.keepRatio()||t.shiftKey,f=this.centeredScaling()||t.altKey;if("top-left"===this._movingAnchorName){if(c){var l=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};o=Math.sqrt(Math.pow(l.x-n.x(),2)+Math.pow(l.y-n.y(),2));var m=this.findOne(".top-left").x()>l.x?-1:1,u=this.findOne(".top-left").y()>l.y?-1:1;e=o*this.cos*m,i=o*this.sin*u,this.findOne(".top-left").x(l.x-e),this.findOne(".top-left").y(l.y-i)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(n.y());else if("top-right"===this._movingAnchorName){if(c){l=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};o=Math.sqrt(Math.pow(n.x()-l.x,2)+Math.pow(l.y-n.y(),2));m=this.findOne(".top-right").x()<l.x?-1:1,u=this.findOne(".top-right").y()>l.y?-1:1;e=o*this.cos*m,i=o*this.sin*u,this.findOne(".top-right").x(l.x+e),this.findOne(".top-right").y(l.y-i)}var y=n.position();this.findOne(".top-left").y(y.y),this.findOne(".bottom-right").x(y.x)}else if("middle-left"===this._movingAnchorName)this.findOne(".top-left").x(n.x());else if("middle-right"===this._movingAnchorName)this.findOne(".bottom-right").x(n.x());else if("bottom-left"===this._movingAnchorName){if(c){l=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};o=Math.sqrt(Math.pow(l.x-n.x(),2)+Math.pow(n.y()-l.y,2));m=l.x<n.x()?-1:1,u=n.y()<l.y?-1:1;e=o*this.cos*m,i=o*this.sin*u,n.x(l.x-e),n.y(l.y+i)}y=n.position(),this.findOne(".top-left").x(y.x),this.findOne(".bottom-right").y(y.y)}else if("bottom-center"===this._movingAnchorName)this.findOne(".bottom-right").y(n.y());else if("bottom-right"===this._movingAnchorName){if(c){l=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};o=Math.sqrt(Math.pow(n.x()-l.x,2)+Math.pow(n.y()-l.y,2));m=this.findOne(".bottom-right").x()<l.x?-1:1,u=this.findOne(".bottom-right").y()<l.y?-1:1;e=o*this.cos*m,i=o*this.sin*u,this.findOne(".bottom-right").x(l.x+e),this.findOne(".bottom-right").y(l.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(f=this.centeredScaling()||t.altKey){var p=this.findOne(".top-left"),_=this.findOne(".bottom-right"),v=p.x(),w=p.y(),A=this.getWidth()-_.x(),S=this.getHeight()-_.y();_.move({x:-v,y:-w}),p.move({x:A,y:S})}var O=this.findOne(".top-left").getAbsolutePosition();e=O.x,i=O.y;var N=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),C=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:i,width:N,height:C,rotation:s.Konva.getAngle(this.rotation())},t)}else{var M=this._getNodeRect();e=n.x()-M.width/2,i=-n.y()+M.height/2;let o=Math.atan2(-i,e)+Math.PI/2;M.height<0&&(o-=Math.PI);const r=s.Konva.getAngle(this.rotation())+o,h=s.Konva.getAngle(this.rotationSnapTolerance()),a=b(M,x(this.rotationSnaps(),r,h)-M.rotation);this._fitNodesInto(a,t)}}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){if(this._transforming){this._transforming=!1,"undefined"!=typeof window&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var e=this.getNode();this._fire("transformend",{evt:t,target:e}),e&&this._nodes.forEach(e=>{e._fire("transformend",{evt:t,target:e})}),this._movingAnchorName=null}}_fitNodesInto(e,i){var o=this._getNodeRect();if(t.Util._inRange(e.width,2*-this.padding()-1,1))return void this.update();if(t.Util._inRange(e.height,2*-this.padding()-1,1))return void this.update();const n=this.flipEnabled();var r=new t.Transform;if(r.rotate(s.Konva.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const t=r.point({x:2*-this.padding(),y:0});if(e.x+=t.x,e.y+=t.y,e.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y,!n)return void this.update()}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const t=r.point({x:2*this.padding(),y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y,e.width+=2*this.padding(),!n)return void this.update()}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const t=r.point({x:0,y:2*-this.padding()});if(e.x+=t.x,e.y+=t.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y,e.height+=2*this.padding(),!n)return void this.update()}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const t=r.point({x:0,y:2*this.padding()});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y,e.height+=2*this.padding(),!n)return void this.update()}if(this.boundBoxFunc()){const i=this.boundBoxFunc()(o,e);i?e=i:t.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const h=new t.Transform;h.translate(o.x,o.y),h.rotate(o.rotation),h.scale(o.width/1e7,o.height/1e7);const a=new t.Transform;a.translate(e.x,e.y),a.rotate(e.rotation),a.scale(e.width/1e7,e.height/1e7);const d=a.multiply(h.invert());this._nodes.forEach(e=>{var o;const n=e.getParent().getAbsoluteTransform(),r=e.getTransform().copy();r.translate(e.offsetX(),e.offsetY());const s=new t.Transform;s.multiply(n.copy().invert()).multiply(d).multiply(n).multiply(r);const h=s.decompose();e.setAttrs(h),this._fire("transform",{evt:i,target:e}),e._fire("transform",{evt:i,target:e}),null===(o=e.getLayer())||void 0===o||o.batchDraw()}),this.rotation(t.Util._getRotation(e.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,e){this.findOne(t).setAttrs(e)}update(){var e,i=this._getNodeRect();this.rotation(t.Util._getRotation(i.rotation));var o=i.width,n=i.height,r=this.enabledAnchors(),s=this.resizeEnabled(),h=this.padding(),a=this.anchorSize();this.find("._anchor").forEach(t=>{t.setAttrs({width:a,height:a,offsetX:a/2,offsetY:a/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:a/2+h,offsetY:a/2+h,visible:s&&r.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:o/2,y:0,offsetY:a/2+h,visible:s&&r.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:o,y:0,offsetX:a/2-h,offsetY:a/2+h,visible:s&&r.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:n/2,offsetX:a/2+h,visible:s&&r.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:o,y:n/2,offsetX:a/2-h,visible:s&&r.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:n,offsetX:a/2+h,offsetY:a/2-h,visible:s&&r.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:o/2,y:n,offsetY:a/2-h,visible:s&&r.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:o,y:n,offsetX:a/2-h,offsetY:a/2-h,visible:s&&r.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:o/2,y:-this.rotateAnchorOffset()*t.Util._sign(n)-h,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:o,height:n,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),null===(e=this.getLayer())||void 0===e||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),r.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return i.Node.prototype.toObject.call(this)}}function w(e){return e instanceof Array||t.Util.warn("enabledAnchors value should be an array"),e instanceof Array&&e.forEach(function(e){-1===u.indexOf(e)&&t.Util.warn("Unknown anchor name: "+e+". Available names are: "+u.join(", "))}),e||[]}exports.Transformer=v,v.prototype.className="Transformer",(0,s._registerNode)(v),e.Factory.addGetterSetter(v,"enabledAnchors",u,w),e.Factory.addGetterSetter(v,"flipEnabled",!0,(0,h.getBooleanValidator)()),e.Factory.addGetterSetter(v,"resizeEnabled",!0),e.Factory.addGetterSetter(v,"anchorSize",10,(0,h.getNumberValidator)()),e.Factory.addGetterSetter(v,"rotateEnabled",!0),e.Factory.addGetterSetter(v,"rotationSnaps",[]),e.Factory.addGetterSetter(v,"rotateAnchorOffset",50,(0,h.getNumberValidator)()),e.Factory.addGetterSetter(v,"rotationSnapTolerance",5,(0,h.getNumberValidator)()),e.Factory.addGetterSetter(v,"borderEnabled",!0),e.Factory.addGetterSetter(v,"anchorStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(v,"anchorStrokeWidth",1,(0,h.getNumberValidator)()),e.Factory.addGetterSetter(v,"anchorFill","white"),e.Factory.addGetterSetter(v,"anchorCornerRadius",0,(0,h.getNumberValidator)()),e.Factory.addGetterSetter(v,"borderStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(v,"borderStrokeWidth",1,(0,h.getNumberValidator)()),e.Factory.addGetterSetter(v,"borderDash"),e.Factory.addGetterSetter(v,"keepRatio",!0),e.Factory.addGetterSetter(v,"centeredScaling",!1),e.Factory.addGetterSetter(v,"ignoreStroke",!1),e.Factory.addGetterSetter(v,"padding",0,(0,h.getNumberValidator)()),e.Factory.addGetterSetter(v,"node"),e.Factory.addGetterSetter(v,"nodes"),e.Factory.addGetterSetter(v,"boundBoxFunc"),e.Factory.addGetterSetter(v,"shouldOverdrawWholeArea",!1),e.Factory.addGetterSetter(v,"useSingleNodeRotation",!0),e.Factory.backCompat(v,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});
},{"../Util.js":"x014","../Factory.js":"OqKZ","../Node.js":"aBpx","../Shape.js":"D7fl","./Rect.js":"KC8S","../Group.js":"gLGN","../Global.js":"h4Yu","../Validators.js":"QpE5"}],"k86a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Wedge=void 0;var e=require("../Factory.js"),t=require("../Shape.js"),r=require("../Global.js"),a=require("../Validators.js");class s extends t.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,r.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}exports.Wedge=s,s.prototype.className="Wedge",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(s),e.Factory.addGetterSetter(s,"radius",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(s,"angle",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(s,"clockwise",!1),e.Factory.backCompat(s,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});
},{"../Factory.js":"OqKZ","../Shape.js":"D7fl","../Global.js":"h4Yu","../Validators.js":"QpE5"}],"eqwD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Blur=void 0;var r=require("../Factory.js"),t=require("../Node.js"),e=require("../Validators.js");function a(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var o=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],n=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function i(r,t){var e,i,u,s,l,b,d,f,x,g,h,c,v,j,p,y,F,q,w,N,B,M,R,S,V=r.data,_=r.width,m=r.height,G=t+t+1,O=_-1,P=m-1,k=t+1,z=k*(k+1)/2,A=new a,C=null,D=A,E=null,H=null,I=o[t],J=n[t];for(u=1;u<G;u++)D=D.next=new a,u===k&&(C=D);for(D.next=A,d=b=0,i=0;i<m;i++){for(y=F=q=w=f=x=g=h=0,c=k*(N=V[b]),v=k*(B=V[b+1]),j=k*(M=V[b+2]),p=k*(R=V[b+3]),f+=z*N,x+=z*B,g+=z*M,h+=z*R,D=A,u=0;u<k;u++)D.r=N,D.g=B,D.b=M,D.a=R,D=D.next;for(u=1;u<k;u++)s=b+((O<u?O:u)<<2),f+=(D.r=N=V[s])*(S=k-u),x+=(D.g=B=V[s+1])*S,g+=(D.b=M=V[s+2])*S,h+=(D.a=R=V[s+3])*S,y+=N,F+=B,q+=M,w+=R,D=D.next;for(E=A,H=C,e=0;e<_;e++)V[b+3]=R=h*I>>J,0!==R?(R=255/R,V[b]=(f*I>>J)*R,V[b+1]=(x*I>>J)*R,V[b+2]=(g*I>>J)*R):V[b]=V[b+1]=V[b+2]=0,f-=c,x-=v,g-=j,h-=p,c-=E.r,v-=E.g,j-=E.b,p-=E.a,s=d+((s=e+t+1)<O?s:O)<<2,f+=y+=E.r=V[s],x+=F+=E.g=V[s+1],g+=q+=E.b=V[s+2],h+=w+=E.a=V[s+3],E=E.next,c+=N=H.r,v+=B=H.g,j+=M=H.b,p+=R=H.a,y-=N,F-=B,q-=M,w-=R,H=H.next,b+=4;d+=_}for(e=0;e<_;e++){for(F=q=w=y=x=g=h=f=0,c=k*(N=V[b=e<<2]),v=k*(B=V[b+1]),j=k*(M=V[b+2]),p=k*(R=V[b+3]),f+=z*N,x+=z*B,g+=z*M,h+=z*R,D=A,u=0;u<k;u++)D.r=N,D.g=B,D.b=M,D.a=R,D=D.next;for(l=_,u=1;u<=t;u++)b=l+e<<2,f+=(D.r=N=V[b])*(S=k-u),x+=(D.g=B=V[b+1])*S,g+=(D.b=M=V[b+2])*S,h+=(D.a=R=V[b+3])*S,y+=N,F+=B,q+=M,w+=R,D=D.next,u<P&&(l+=_);for(b=e,E=A,H=C,i=0;i<m;i++)V[(s=b<<2)+3]=R=h*I>>J,R>0?(R=255/R,V[s]=(f*I>>J)*R,V[s+1]=(x*I>>J)*R,V[s+2]=(g*I>>J)*R):V[s]=V[s+1]=V[s+2]=0,f-=c,x-=v,g-=j,h-=p,c-=E.r,v-=E.g,j-=E.b,p-=E.a,s=e+((s=i+k)<P?s:P)*_<<2,f+=y+=E.r=V[s],x+=F+=E.g=V[s+1],g+=q+=E.b=V[s+2],h+=w+=E.a=V[s+3],E=E.next,c+=N=H.r,v+=B=H.g,j+=M=H.b,p+=R=H.a,y-=N,F-=B,q-=M,w-=R,H=H.next,b+=_}}const u=function(r){var t=Math.round(this.blurRadius());t>0&&i(r,t)};exports.Blur=u,r.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,e.getNumberValidator)(),r.Factory.afterSetFilter);
},{"../Factory.js":"OqKZ","../Node.js":"aBpx","../Validators.js":"QpE5"}],"FO6e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Brighten=void 0;var e=require("../Factory.js"),r=require("../Node.js"),t=require("../Validators.js");const o=function(e){var r,t=255*this.brightness(),o=e.data,s=o.length;for(r=0;r<s;r+=4)o[r]+=t,o[r+1]+=t,o[r+2]+=t};exports.Brighten=o,e.Factory.addGetterSetter(r.Node,"brightness",0,(0,t.getNumberValidator)(),e.Factory.afterSetFilter);
},{"../Factory.js":"OqKZ","../Node.js":"aBpx","../Validators.js":"QpE5"}],"KaHW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Contrast=void 0;var t=require("../Factory.js"),e=require("../Node.js"),r=require("../Validators.js");const o=function(t){var e,r=Math.pow((this.contrast()+100)/100,2),o=t.data,a=o.length,s=150,i=150,d=150;for(e=0;e<a;e+=4)s=o[e],i=o[e+1],d=o[e+2],s/=255,s-=.5,s*=r,s+=.5,i/=255,i-=.5,i*=r,i+=.5,d/=255,d-=.5,d*=r,d+=.5,s=(s*=255)<0?0:s>255?255:s,i=(i*=255)<0?0:i>255?255:i,d=(d*=255)<0?0:d>255?255:d,o[e]=s,o[e+1]=i,o[e+2]=d};exports.Contrast=o,t.Factory.addGetterSetter(e.Node,"contrast",0,(0,r.getNumberValidator)(),t.Factory.afterSetFilter);
},{"../Factory.js":"OqKZ","../Node.js":"aBpx","../Validators.js":"QpE5"}],"cp7d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Emboss=void 0;var e=require("../Factory.js"),t=require("../Node.js"),r=require("../Util.js"),o=require("../Validators.js");const a=function(e){var t=10*this.embossStrength(),o=255*this.embossWhiteLevel(),a=this.embossDirection(),s=this.embossBlend(),i=0,d=0,l=e.data,b=e.width,c=e.height,h=4*b,m=c;switch(a){case"top-left":i=-1,d=-1;break;case"top":i=-1,d=0;break;case"top-right":i=-1,d=1;break;case"right":i=0,d=1;break;case"bottom-right":i=1,d=1;break;case"bottom":i=1,d=0;break;case"bottom-left":i=1,d=-1;break;case"left":i=0,d=-1;break;default:r.Util.error("Unknown emboss direction: "+a)}do{var n=(m-1)*h,u=i;m+u<1&&(u=0),m+u>c&&(u=0);var F=(m-1+u)*b*4,f=b;do{var v=n+4*(f-1),y=d;f+y<1&&(y=0),f+y>b&&(y=0);var S=F+4*(f-1+y),k=l[v]-l[S],g=l[v+1]-l[S+1],p=l[v+2]-l[S+2],N=k,j=N>0?N:-N;if((g>0?g:-g)>j&&(N=g),(p>0?p:-p)>j&&(N=p),N*=t,s){var w=l[v]+N,q=l[v+1]+N,G=l[v+2]+N;l[v]=w>255?255:w<0?0:w,l[v+1]=q>255?255:q<0?0:q,l[v+2]=G>255?255:G<0?0:G}else{var x=o-N;x<0?x=0:x>255&&(x=255),l[v]=l[v+1]=l[v+2]=x}}while(--f)}while(--m)};exports.Emboss=a,e.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,o.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,o.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossDirection","top-left",null,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossBlend",!1,null,e.Factory.afterSetFilter);
},{"../Factory.js":"OqKZ","../Node.js":"aBpx","../Util.js":"x014","../Validators.js":"QpE5"}],"MLG8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Enhance=void 0;var e=require("../Factory.js"),r=require("../Node.js"),t=require("../Validators.js");function a(e,r,t,a,o){var n=t-r,i=o-a;return 0===n?a+i/2:0===i?a:i*((e-r)/n)+a}const o=function(e){var r,t,o,n,i=e.data,c=i.length,s=i[0],d=s,u=i[1],f=u,h=i[2],l=h,v=this.enhance();if(0!==v){for(n=0;n<c;n+=4)(r=i[n+0])<s?s=r:r>d&&(d=r),(t=i[n+1])<u?u=t:t>f&&(f=t),(o=i[n+2])<h?h=o:o>l&&(l=o);var j,p,y,F,q,x,N,b,g;for(d===s&&(d=255,s=0),f===u&&(f=255,u=0),l===h&&(l=255,h=0),v>0?(p=d+v*(255-d),y=s-v*(s-0),q=f+v*(255-f),x=u-v*(u-0),b=l+v*(255-l),g=h-v*(h-0)):(p=d+v*(d-(j=.5*(d+s))),y=s+v*(s-j),q=f+v*(f-(F=.5*(f+u))),x=u+v*(u-F),b=l+v*(l-(N=.5*(l+h))),g=h+v*(h-N)),n=0;n<c;n+=4)i[n+0]=a(i[n+0],s,d,y,p),i[n+1]=a(i[n+1],u,f,x,q),i[n+2]=a(i[n+2],h,l,g,b)}};exports.Enhance=o,e.Factory.addGetterSetter(r.Node,"enhance",0,(0,t.getNumberValidator)(),e.Factory.afterSetFilter);
},{"../Factory.js":"OqKZ","../Node.js":"aBpx","../Validators.js":"QpE5"}],"ewed":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Grayscale=void 0;const e=function(e){var t,r,o=e.data,s=o.length;for(t=0;t<s;t+=4)r=.34*o[t]+.5*o[t+1]+.16*o[t+2],o[t]=r,o[t+1]=r,o[t+2]=r};exports.Grayscale=e;
},{}],"rVtm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HSL=void 0;var t=require("../Factory.js"),e=require("../Node.js"),r=require("../Validators.js");t.Factory.addGetterSetter(e.Node,"hue",0,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"luminance",0,(0,r.getNumberValidator)(),t.Factory.afterSetFilter);const a=function(t){var e,r,a,o,i,s=t.data,d=s.length,u=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,h=127*this.luminance(),l=1*u*Math.cos(c*Math.PI/180),n=1*u*Math.sin(c*Math.PI/180),F=.299+.701*l+.167*n,y=.587-.587*l+.33*n,S=.114-.114*l-.497*n,M=.299-.299*l-.328*n,N=.587+.413*l+.035*n,f=.114-.114*l+.293*n,b=.299-.3*l+1.25*n,m=.587-.586*l-1.05*n,p=.114+.886*l-.2*n;for(e=0;e<d;e+=4)r=s[e+0],a=s[e+1],o=s[e+2],i=s[e+3],s[e+0]=F*r+y*a+S*o+h,s[e+1]=M*r+N*a+f*o+h,s[e+2]=b*r+m*a+p*o+h,s[e+3]=i};exports.HSL=a;
},{"../Factory.js":"OqKZ","../Node.js":"aBpx","../Validators.js":"QpE5"}],"J3FV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HSV=void 0;var t=require("../Factory.js"),e=require("../Node.js"),r=require("../Validators.js");const a=function(t){var e,r,a,o,i,s=t.data,d=s.length,u=Math.pow(2,this.value()),h=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,l=u*h*Math.cos(c*Math.PI/180),F=u*h*Math.sin(c*Math.PI/180),n=.299*u+.701*l+.167*F,y=.587*u-.587*l+.33*F,M=.114*u-.114*l-.497*F,S=.299*u-.299*l-.328*F,N=.587*u+.413*l+.035*F,f=.114*u-.114*l+.293*F,p=.299*u-.3*l+1.25*F,v=.587*u-.586*l-1.05*F,V=.114*u+.886*l-.2*F;for(e=0;e<d;e+=4)r=s[e+0],a=s[e+1],o=s[e+2],i=s[e+3],s[e+0]=n*r+y*a+M*o,s[e+1]=S*r+N*a+f*o,s[e+2]=p*r+v*a+V*o,s[e+3]=i};exports.HSV=a,t.Factory.addGetterSetter(e.Node,"hue",0,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"value",0,(0,r.getNumberValidator)(),t.Factory.afterSetFilter);
},{"../Factory.js":"OqKZ","../Node.js":"aBpx","../Validators.js":"QpE5"}],"b1VZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Invert=void 0;const e=function(e){var t,r=e.data,o=r.length;for(t=0;t<o;t+=4)r[t]=255-r[t],r[t+1]=255-r[t+1],r[t+2]=255-r[t+2]};exports.Invert=e;
},{}],"DI4a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Kaleidoscope=void 0;var a=require("../Factory.js"),t=require("../Node.js"),r=require("../Util.js"),e=require("../Validators.js"),o=function(a,t,r){var e,o,d,i,h=a.data,l=t.data,s=a.width,n=a.height,f=r.polarCenterX||s/2,M=r.polarCenterY||n/2,c=0,p=0,u=0,v=0,g=Math.sqrt(f*f+M*M);o=s-f,d=n-M,g=(i=Math.sqrt(o*o+d*d))>g?i:g;var q,C,w,F,y=n,j=s,N=360/j*Math.PI/180;for(C=0;C<j;C+=1)for(w=Math.sin(C*N),F=Math.cos(C*N),q=0;q<y;q+=1)o=Math.floor(f+g*q/y*F),c=h[(e=4*((d=Math.floor(M+g*q/y*w))*s+o))+0],p=h[e+1],u=h[e+2],v=h[e+3],l[(e=4*(C+q*s))+0]=c,l[e+1]=p,l[e+2]=u,l[e+3]=v},d=function(a,t,r){var e,o,d,i,h,l,s=a.data,n=t.data,f=a.width,M=a.height,c=r.polarCenterX||f/2,p=r.polarCenterY||M/2,u=0,v=0,g=0,q=0,C=Math.sqrt(c*c+p*p);o=f-c,d=M-p,C=(l=Math.sqrt(o*o+d*d))>C?l:C;var w,F,y,j=M,N=f,P=r.polarRotation||0;for(o=0;o<f;o+=1)for(d=0;d<M;d+=1)i=o-c,h=d-p,w=Math.sqrt(i*i+h*h)*j/C,F=(F=(180*Math.atan2(h,i)/Math.PI+360+P)%360)*N/360,y=Math.floor(F),u=s[(e=4*(Math.floor(w)*f+y))+0],v=s[e+1],g=s[e+2],q=s[e+3],n[(e=4*(d*f+o))+0]=u,n[e+1]=v,n[e+2]=g,n[e+3]=q};const i=function(a){var t,e,i,h,l,s,n,f,M,c=a.width,p=a.height,u=Math.round(this.kaleidoscopePower()),v=Math.round(this.kaleidoscopeAngle()),g=Math.floor(c*(v%360)/360);if(!(u<1)){var q=r.Util.createCanvasElement();q.width=c,q.height=p;var C=q.getContext("2d").getImageData(0,0,c,p);o(a,C,{polarCenterX:c/2,polarCenterY:p/2});for(var w=c/Math.pow(2,u);w<=8;)w*=2,u-=1;var F=w=Math.ceil(w),y=0,j=F,N=1;for(g+w>c&&(y=F,j=0,N=-1),e=0;e<p;e+=1)for(t=y;t!==j;t+=N)f=4*(c*e+Math.round(t+g)%c),h=C.data[f+0],l=C.data[f+1],s=C.data[f+2],n=C.data[f+3],M=4*(c*e+t),C.data[M+0]=h,C.data[M+1]=l,C.data[M+2]=s,C.data[M+3]=n;for(e=0;e<p;e+=1)for(F=Math.floor(w),i=0;i<u;i+=1){for(t=0;t<F+1;t+=1)f=4*(c*e+t),h=C.data[f+0],l=C.data[f+1],s=C.data[f+2],n=C.data[f+3],M=4*(c*e+2*F-t-1),C.data[M+0]=h,C.data[M+1]=l,C.data[M+2]=s,C.data[M+3]=n;F*=2}d(C,a,{polarRotation:0})}};exports.Kaleidoscope=i,a.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,e.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,e.getNumberValidator)(),a.Factory.afterSetFilter);
},{"../Factory.js":"OqKZ","../Node.js":"aBpx","../Util.js":"x014","../Validators.js":"QpE5"}],"D59R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Mask=void 0;var r=require("../Factory.js"),t=require("../Node.js"),a=require("../Validators.js");function e(r,t,a){var e=4*(a*r.width+t),o=[];return o.push(r.data[e++],r.data[e++],r.data[e++],r.data[e++]),o}function o(r,t){return Math.sqrt(Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2)+Math.pow(r[2]-t[2],2))}function h(r){for(var t=[0,0,0],a=0;a<r.length;a++)t[0]+=r[a][0],t[1]+=r[a][1],t[2]+=r[a][2];return t[0]/=r.length,t[1]/=r.length,t[2]/=r.length,t}function i(r,t){var a=e(r,0,0),i=e(r,r.width-1,0),n=e(r,0,r.height-1),f=e(r,r.width-1,r.height-1),d=t||10;if(o(a,i)<d&&o(i,f)<d&&o(f,n)<d&&o(n,a)<d){for(var u=h([i,a,f,n]),v=[],s=0;s<r.width*r.height;s++){var l=o(u,[r.data[4*s],r.data[4*s+1],r.data[4*s+2]]);v[s]=l<d?0:255}return v}}function n(r,t){for(var a=0;a<r.width*r.height;a++)r.data[4*a+3]=t[a]}function f(r,t,a){for(var e=[1,1,1,1,0,1,1,1,1],o=Math.round(Math.sqrt(e.length)),h=Math.floor(o/2),i=[],n=0;n<a;n++)for(var f=0;f<t;f++){for(var d=n*t+f,u=0,v=0;v<o;v++)for(var s=0;s<o;s++){var l=n+v-h,M=f+s-h;if(l>=0&&l<a&&M>=0&&M<t){var c=e[v*o+s];u+=r[l*t+M]*c}}i[d]=2040===u?255:0}return i}function d(r,t,a){for(var e=[1,1,1,1,1,1,1,1,1],o=Math.round(Math.sqrt(e.length)),h=Math.floor(o/2),i=[],n=0;n<a;n++)for(var f=0;f<t;f++){for(var d=n*t+f,u=0,v=0;v<o;v++)for(var s=0;s<o;s++){var l=n+v-h,M=f+s-h;if(l>=0&&l<a&&M>=0&&M<t){var c=e[v*o+s];u+=r[l*t+M]*c}}i[d]=u>=1020?255:0}return i}function u(r,t,a){for(var e=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],o=Math.round(Math.sqrt(e.length)),h=Math.floor(o/2),i=[],n=0;n<a;n++)for(var f=0;f<t;f++){for(var d=n*t+f,u=0,v=0;v<o;v++)for(var s=0;s<o;s++){var l=n+v-h,M=f+s-h;if(l>=0&&l<a&&M>=0&&M<t){var c=e[v*o+s];u+=r[l*t+M]*c}}i[d]=u}return i}const v=function(r){var t=i(r,this.threshold());return t&&n(r,t=u(t=d(t=f(t,r.width,r.height),r.width,r.height),r.width,r.height)),r};exports.Mask=v,r.Factory.addGetterSetter(t.Node,"threshold",0,(0,a.getNumberValidator)(),r.Factory.afterSetFilter);
},{"../Factory.js":"OqKZ","../Node.js":"aBpx","../Validators.js":"QpE5"}],"BVBF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Noise=void 0;var e=require("../Factory.js"),r=require("../Node.js"),t=require("../Validators.js");const o=function(e){var r,t=255*this.noise(),o=e.data,a=o.length,s=t/2;for(r=0;r<a;r+=4)o[r+0]+=s-2*s*Math.random(),o[r+1]+=s-2*s*Math.random(),o[r+2]+=s-2*s*Math.random()};exports.Noise=o,e.Factory.addGetterSetter(r.Node,"noise",.2,(0,t.getNumberValidator)(),e.Factory.afterSetFilter);
},{"../Factory.js":"OqKZ","../Node.js":"aBpx","../Validators.js":"QpE5"}],"yoYV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Pixelate=void 0;var e=require("../Factory.js"),r=require("../Util.js"),t=require("../Node.js"),i=require("../Validators.js");const o=function(e){var t,i,o,a,l,s,f,c,d,u,x,h,p,n,j=Math.ceil(this.pixelSize()),v=e.width,S=e.height,q=Math.ceil(v/j),y=Math.ceil(S/j),F=e.data;if(j<=0)r.Util.error("pixelSize value can not be <= 0");else for(h=0;h<q;h+=1)for(p=0;p<y;p+=1){for(a=0,l=0,s=0,f=0,d=(c=h*j)+j,x=(u=p*j)+j,n=0,t=c;t<d;t+=1)if(!(t>=v))for(i=u;i<x;i+=1)i>=S||(a+=F[(o=4*(v*i+t))+0],l+=F[o+1],s+=F[o+2],f+=F[o+3],n+=1);for(a/=n,l/=n,s/=n,f/=n,t=c;t<d;t+=1)if(!(t>=v))for(i=u;i<x;i+=1)i>=S||(F[(o=4*(v*i+t))+0]=a,F[o+1]=l,F[o+2]=s,F[o+3]=f)}};exports.Pixelate=o,e.Factory.addGetterSetter(t.Node,"pixelSize",8,(0,i.getNumberValidator)(),e.Factory.afterSetFilter);
},{"../Factory.js":"OqKZ","../Util.js":"x014","../Node.js":"aBpx","../Validators.js":"QpE5"}],"jFCz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Posterize=void 0;var e=require("../Factory.js"),r=require("../Node.js"),t=require("../Validators.js");const o=function(e){var r,t=Math.round(254*this.levels())+1,o=e.data,a=o.length,s=255/t;for(r=0;r<a;r+=1)o[r]=Math.floor(o[r]/s)*s};exports.Posterize=o,e.Factory.addGetterSetter(r.Node,"levels",.5,(0,t.getNumberValidator)(),e.Factory.afterSetFilter);
},{"../Factory.js":"OqKZ","../Node.js":"aBpx","../Validators.js":"QpE5"}],"JJW9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RGB=void 0;var e=require("../Factory.js"),t=require("../Node.js"),r=require("../Validators.js");const o=function(e){var t,r,o=e.data,a=o.length,d=this.red(),i=this.green(),n=this.blue();for(t=0;t<a;t+=4)r=(.34*o[t]+.5*o[t+1]+.16*o[t+2])/255,o[t]=r*d,o[t+1]=r*i,o[t+2]=r*n,o[t+3]=o[t+3]};exports.RGB=o,e.Factory.addGetterSetter(t.Node,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)}),e.Factory.addGetterSetter(t.Node,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)}),e.Factory.addGetterSetter(t.Node,"blue",0,r.RGBComponent,e.Factory.afterSetFilter);
},{"../Factory.js":"OqKZ","../Node.js":"aBpx","../Validators.js":"QpE5"}],"RN3Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RGBA=void 0;var e=require("../Factory.js"),t=require("../Node.js"),r=require("../Validators.js");const o=function(e){var t,r,o=e.data,a=o.length,d=this.red(),i=this.green(),n=this.blue(),s=this.alpha();for(t=0;t<a;t+=4)r=1-s,o[t]=d*s+o[t]*r,o[t+1]=i*s+o[t+1]*r,o[t+2]=n*s+o[t+2]*r};exports.RGBA=o,e.Factory.addGetterSetter(t.Node,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)}),e.Factory.addGetterSetter(t.Node,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)}),e.Factory.addGetterSetter(t.Node,"blue",0,r.RGBComponent,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"alpha",1,function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e});
},{"../Factory.js":"OqKZ","../Node.js":"aBpx","../Validators.js":"QpE5"}],"htEk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sepia=void 0;const e=function(e){var t,a,i,o,n=e.data,r=n.length;for(t=0;t<r;t+=4)a=n[t+0],i=n[t+1],o=n[t+2],n[t+0]=Math.min(255,.393*a+.769*i+.189*o),n[t+1]=Math.min(255,.349*a+.686*i+.168*o),n[t+2]=Math.min(255,.272*a+.534*i+.131*o)};exports.Sepia=e;
},{}],"rC0O":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Solarize=void 0;const e=function(e){var o=e.data,t=e.width,r=4*t,i=e.height;do{var a=(i-1)*r,d=t;do{var s=a+4*(d-1),l=o[s],h=o[s+1],v=o[s+2];l>127&&(l=255-l),h>127&&(h=255-h),v>127&&(v=255-v),o[s]=l,o[s+1]=h,o[s+2]=v}while(--d)}while(--i)};exports.Solarize=e;
},{}],"fJ2K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Threshold=void 0;var e=require("../Factory.js"),r=require("../Node.js"),t=require("../Validators.js");const o=function(e){var r,t=255*this.threshold(),o=e.data,s=o.length;for(r=0;r<s;r+=1)o[r]=o[r]<t?0:255};exports.Threshold=o,e.Factory.addGetterSetter(r.Node,"threshold",.5,(0,t.getNumberValidator)(),e.Factory.afterSetFilter);
},{"../Factory.js":"OqKZ","../Node.js":"aBpx","../Validators.js":"QpE5"}],"LtnM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Konva=void 0;var e=require("./_CoreInternals.js"),r=require("./shapes/Arc.js"),s=require("./shapes/Arrow.js"),i=require("./shapes/Circle.js"),a=require("./shapes/Ellipse.js"),t=require("./shapes/Image.js"),l=require("./shapes/Label.js"),o=require("./shapes/Line.js"),u=require("./shapes/Path.js"),j=require("./shapes/Rect.js"),q=require("./shapes/RegularPolygon.js"),n=require("./shapes/Ring.js"),h=require("./shapes/Sprite.js"),p=require("./shapes/Star.js"),f=require("./shapes/Text.js"),c=require("./shapes/TextPath.js"),g=require("./shapes/Transformer.js"),S=require("./shapes/Wedge.js"),P=require("./filters/Blur.js"),R=require("./filters/Brighten.js"),T=require("./filters/Contrast.js"),d=require("./filters/Emboss.js"),x=require("./filters/Enhance.js"),B=require("./filters/Grayscale.js"),v=require("./filters/HSL.js"),m=require("./filters/HSV.js"),A=require("./filters/Invert.js"),E=require("./filters/Kaleidoscope.js"),G=require("./filters/Mask.js"),L=require("./filters/Noise.js"),b=require("./filters/Pixelate.js"),y=require("./filters/Posterize.js"),C=require("./filters/RGB.js"),I=require("./filters/RGBA.js"),K=require("./filters/Sepia.js"),z=require("./filters/Solarize.js"),H=require("./filters/Threshold.js");const M=e.Konva.Util._assign(e.Konva,{Arc:r.Arc,Arrow:s.Arrow,Circle:i.Circle,Ellipse:a.Ellipse,Image:t.Image,Label:l.Label,Tag:l.Tag,Line:o.Line,Path:u.Path,Rect:j.Rect,RegularPolygon:q.RegularPolygon,Ring:n.Ring,Sprite:h.Sprite,Star:p.Star,Text:f.Text,TextPath:c.TextPath,Transformer:g.Transformer,Wedge:S.Wedge,Filters:{Blur:P.Blur,Brighten:R.Brighten,Contrast:T.Contrast,Emboss:d.Emboss,Enhance:x.Enhance,Grayscale:B.Grayscale,HSL:v.HSL,HSV:m.HSV,Invert:A.Invert,Kaleidoscope:E.Kaleidoscope,Mask:G.Mask,Noise:L.Noise,Pixelate:b.Pixelate,Posterize:y.Posterize,RGB:C.RGB,RGBA:I.RGBA,Sepia:K.Sepia,Solarize:z.Solarize,Threshold:H.Threshold}});exports.Konva=M;
},{"./_CoreInternals.js":"c82l","./shapes/Arc.js":"cBh1","./shapes/Arrow.js":"mcgL","./shapes/Circle.js":"v2GK","./shapes/Ellipse.js":"bOaQ","./shapes/Image.js":"VPFu","./shapes/Label.js":"JFbL","./shapes/Line.js":"rYYZ","./shapes/Path.js":"OQ17","./shapes/Rect.js":"KC8S","./shapes/RegularPolygon.js":"t8Ih","./shapes/Ring.js":"G8TU","./shapes/Sprite.js":"j0LZ","./shapes/Star.js":"rMIF","./shapes/Text.js":"zj7E","./shapes/TextPath.js":"OiBh","./shapes/Transformer.js":"Tnyj","./shapes/Wedge.js":"k86a","./filters/Blur.js":"eqwD","./filters/Brighten.js":"FO6e","./filters/Contrast.js":"KaHW","./filters/Emboss.js":"cp7d","./filters/Enhance.js":"MLG8","./filters/Grayscale.js":"ewed","./filters/HSL.js":"rVtm","./filters/HSV.js":"J3FV","./filters/Invert.js":"b1VZ","./filters/Kaleidoscope.js":"DI4a","./filters/Mask.js":"D59R","./filters/Noise.js":"BVBF","./filters/Pixelate.js":"yoYV","./filters/Posterize.js":"jFCz","./filters/RGB.js":"JJW9","./filters/RGBA.js":"RN3Q","./filters/Sepia.js":"htEk","./filters/Solarize.js":"rC0O","./filters/Threshold.js":"fJ2K"}],"UjKJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./_FullInternals.js"),r=e.Konva;exports.default=r;
},{"./_FullInternals.js":"LtnM"}],"A2is":[function(require,module,exports) {
"use strict";module.exports=(e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>"%".concat(e.charCodeAt(0).toString(16).toUpperCase())));
},{}],"pWxZ":[function(require,module,exports) {
"use strict";var e="%[a-f0-9]{2}",t=new RegExp(e,"gi"),r=new RegExp("("+e+")+","gi");function n(e,t){try{return decodeURIComponent(e.join(""))}catch(c){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),o=e.slice(t);return Array.prototype.concat.call([],n(r),n(o))}function o(e){try{return decodeURIComponent(e)}catch(c){for(var r=e.match(t),o=1;o<r.length;o++)r=(e=n(r,o).join("")).match(t);return e}}function c(e){for(var t={"%FE%FF":"","%FF%FE":""},n=r.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(u){var c=o(n[0]);c!==n[0]&&(t[n[0]]=c)}n=r.exec(e)}t["%C2"]="";for(var a=Object.keys(t),p=0;p<a.length;p++){var i=a[p];e=e.replace(new RegExp(i,"g"),t[i])}return e}module.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return c(e)}};
},{}],"t7Jq":[function(require,module,exports) {
"use strict";module.exports=function(e,t){if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];var r=e.indexOf(t);return-1===r?[e]:[e.slice(0,r),e.slice(r+t.length)]};
},{}],"Vk1D":[function(require,module,exports) {
"use strict";module.exports=function(r,e){for(var t={},n=Object.keys(r),s=Array.isArray(e),a=0;a<n.length;a++){var i=n[a],o=r[i];(s?-1!==e.indexOf(i):e(i,o,r))&&(t[i]=o)}return t};
},{}],"FvpG":[function(require,module,exports) {
"use strict";function r(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function e(r){return i(r)||a(r)||o(r)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(r,t){if(r){if("string"==typeof r)return u(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?u(r,t):void 0}}function a(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}function i(r){if(Array.isArray(r))return u(r)}function u(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}var c=require("strict-uri-encode"),s=require("decode-uri-component"),l=require("split-on-first"),f=require("filter-obj"),p=function(r){return null==r},y=Symbol("encodeFragmentIdentifier");function m(r){switch(r.arrayFormat){case"index":return function(t){return function(n,o){var a=n.length;return void 0===o||r.skipNull&&null===o||r.skipEmptyString&&""===o?n:[].concat(e(n),null===o?[[g(t,r),"[",a,"]"].join("")]:[[g(t,r),"[",g(a,r),"]=",g(o,r)].join("")])}};case"bracket":return function(t){return function(n,o){return void 0===o||r.skipNull&&null===o||r.skipEmptyString&&""===o?n:[].concat(e(n),null===o?[[g(t,r),"[]"].join("")]:[[g(t,r),"[]=",g(o,r)].join("")])}};case"comma":case"separator":case"bracket-separator":var t="bracket-separator"===r.arrayFormat?"[]=":"=";return function(e){return function(n,o){return void 0===o||r.skipNull&&null===o||r.skipEmptyString&&""===o?n:(o=null===o?"":o,0===n.length?[[g(e,r),t,g(o,r)].join("")]:[[n,g(o,r)].join(r.arrayFormatSeparator)])}};default:return function(t){return function(n,o){return void 0===o||r.skipNull&&null===o||r.skipEmptyString&&""===o?n:[].concat(e(n),null===o?[g(t,r)]:[[g(t,r),"=",g(o,r)].join("")])}}}}function d(r){var t;switch(r.arrayFormat){case"index":return function(r,e,n){t=/\[(\d*)\]$/.exec(r),r=r.replace(/\[\d*\]$/,""),t?(void 0===n[r]&&(n[r]={}),n[r][t[1]]=e):n[r]=e};case"bracket":return function(r,e,n){t=/(\[\])$/.exec(r),r=r.replace(/\[\]$/,""),t?void 0!==n[r]?n[r]=[].concat(n[r],e):n[r]=[e]:n[r]=e};case"comma":case"separator":return function(t,e,n){var o="string"==typeof e&&e.includes(r.arrayFormatSeparator),a="string"==typeof e&&!o&&v(e,r).includes(r.arrayFormatSeparator);e=a?v(e,r):e;var i=o||a?e.split(r.arrayFormatSeparator).map(function(t){return v(t,r)}):null===e?e:v(e,r);n[t]=i};case"bracket-separator":return function(t,e,n){var o=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),o){var a=null===e?[]:e.split(r.arrayFormatSeparator).map(function(t){return v(t,r)});void 0!==n[t]?n[t]=[].concat(n[t],a):n[t]=a}else n[t]=e?v(e,r):e};default:return function(r,t,e){void 0!==e[r]?e[r]=[].concat(e[r],t):e[r]=t}}}function b(r){if("string"!=typeof r||1!==r.length)throw new TypeError("arrayFormatSeparator must be single character string")}function g(r,t){return t.encode?t.strict?c(r):encodeURIComponent(r):r}function v(r,t){return t.decode?s(r):r}function j(r){return Array.isArray(r)?r.sort():"object"===t(r)?j(Object.keys(r)).sort(function(r,t){return Number(r)-Number(t)}).map(function(t){return r[t]}):r}function k(r){var t=r.indexOf("#");return-1!==t&&(r=r.slice(0,t)),r}function S(r){var t="",e=r.indexOf("#");return-1!==e&&(t=r.slice(e)),t}function x(r){var t=(r=k(r)).indexOf("?");return-1===t?"":r.slice(t+1)}function O(r,t){return t.parseNumbers&&!Number.isNaN(Number(r))&&"string"==typeof r&&""!==r.trim()?r=Number(r):!t.parseBooleans||null===r||"true"!==r.toLowerCase()&&"false"!==r.toLowerCase()||(r="true"===r.toLowerCase()),r}function F(r,e){b((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);var n=d(e),o=Object.create(null);if("string"!=typeof r)return o;if(!(r=r.trim().replace(/^[?#&]/,"")))return o;for(var a of r.split("&"))if(""!==a){var[i,u]=l(e.decode?a.replace(/\+/g," "):a,"=");u=void 0===u?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?u:v(u,e),n(v(i,e),u,o)}for(var c of Object.keys(o)){var s=o[c];if("object"===t(s)&&null!==s)for(var f of Object.keys(s))s[f]=O(s[f],e);else o[c]=O(s,e)}return!1===e.sort?o:(!0===e.sort?Object.keys(o).sort():Object.keys(o).sort(e.sort)).reduce(function(r,e){var n=o[e];return Boolean(n)&&"object"===t(n)&&!Array.isArray(n)?r[e]=j(n):r[e]=n,r},Object.create(null))}exports.extract=x,exports.parse=F,exports.stringify=function(r,t){if(!r)return"";b((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);var e=function(e){return t.skipNull&&p(r[e])||t.skipEmptyString&&""===r[e]},n=m(t),o={};for(var a of Object.keys(r))e(a)||(o[a]=r[a]);var i=Object.keys(o);return!1!==t.sort&&i.sort(t.sort),i.map(function(e){var o=r[e];return void 0===o?"":null===o?g(e,t):Array.isArray(o)?0===o.length&&"bracket-separator"===t.arrayFormat?g(e,t)+"[]":o.reduce(n(e),[]).join("&"):g(e,t)+"="+g(o,t)}).filter(function(r){return r.length>0}).join("&")},exports.parseUrl=function(r,t){t=Object.assign({decode:!0},t);var[e,n]=l(r,"#");return Object.assign({url:e.split("?")[0]||"",query:F(x(r),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:v(n,t)}:{})},exports.stringifyUrl=function(t,e){e=Object.assign(r({encode:!0,strict:!0},y,!0),e);var n=k(t.url).split("?")[0]||"",o=exports.extract(t.url),a=exports.parse(o,{sort:!1}),i=Object.assign(a,t.query),u=exports.stringify(i,e);u&&(u="?".concat(u));var c=S(t.url);return t.fragmentIdentifier&&(c="#".concat(e[y]?g(t.fragmentIdentifier,e):t.fragmentIdentifier)),"".concat(n).concat(u).concat(c)},exports.pick=function(t,e,n){n=Object.assign(r({parseFragmentIdentifier:!0},y,!1),n);var{url:o,query:a,fragmentIdentifier:i}=exports.parseUrl(t,n);return exports.stringifyUrl({url:o,query:f(a,e),fragmentIdentifier:i},n)},exports.exclude=function(r,t,e){var n=Array.isArray(t)?function(r){return!t.includes(r)}:function(r,e){return!t(r,e)};return exports.pick(r,n,e)};
},{"strict-uri-encode":"A2is","decode-uri-component":"pWxZ","split-on-first":"t7Jq","filter-obj":"Vk1D"}],"EDTP":[function(require,module,exports) {
"use strict";module.exports=function(r,n){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];return r.apply(n,t)}};
},{}],"S1cf":[function(require,module,exports) {
"use strict";var r=require("./helpers/bind"),t=Object.prototype.toString;function n(r){return"[object Array]"===t.call(r)}function e(r){return void 0===r}function o(r){return null!==r&&!e(r)&&null!==r.constructor&&!e(r.constructor)&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)}function i(r){return"[object ArrayBuffer]"===t.call(r)}function u(r){return"undefined"!=typeof FormData&&r instanceof FormData}function c(r){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer&&r.buffer instanceof ArrayBuffer}function f(r){return"string"==typeof r}function a(r){return"number"==typeof r}function l(r){return null!==r&&"object"==typeof r}function s(r){if("[object Object]"!==t.call(r))return!1;var n=Object.getPrototypeOf(r);return null===n||n===Object.prototype}function p(r){return"[object Date]"===t.call(r)}function d(r){return"[object File]"===t.call(r)}function y(r){return"[object Blob]"===t.call(r)}function b(r){return"[object Function]"===t.call(r)}function j(r){return l(r)&&b(r.pipe)}function v(r){return"undefined"!=typeof URLSearchParams&&r instanceof URLSearchParams}function B(r){return r.replace(/^\s*/,"").replace(/\s*$/,"")}function m(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function g(r,t){if(null!=r)if("object"!=typeof r&&(r=[r]),n(r))for(var e=0,o=r.length;e<o;e++)t.call(null,r[e],e,r);else for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.call(null,r[i],i,r)}function A(){var r={};function t(t,e){s(r[e])&&s(t)?r[e]=A(r[e],t):s(t)?r[e]=A({},t):n(t)?r[e]=t.slice():r[e]=t}for(var e=0,o=arguments.length;e<o;e++)g(arguments[e],t);return r}function O(t,n,e){return g(n,function(n,o){t[o]=e&&"function"==typeof n?r(n,e):n}),t}function h(r){return 65279===r.charCodeAt(0)&&(r=r.slice(1)),r}module.exports={isArray:n,isArrayBuffer:i,isBuffer:o,isFormData:u,isArrayBufferView:c,isString:f,isNumber:a,isObject:l,isPlainObject:s,isUndefined:e,isDate:p,isFile:d,isBlob:y,isFunction:b,isStream:j,isURLSearchParams:v,isStandardBrowserEnv:m,forEach:g,merge:A,extend:O,trim:B,stripBOM:h};
},{"./helpers/bind":"EDTP"}],"H6Qo":[function(require,module,exports) {
"use strict";var e=require("./../utils");function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}module.exports=function(i,n,t){if(!n)return i;var a;if(t)a=t(n);else if(e.isURLSearchParams(n))a=n.toString();else{var c=[];e.forEach(n,function(i,n){null!=i&&(e.isArray(i)?n+="[]":i=[i],e.forEach(i,function(i){e.isDate(i)?i=i.toISOString():e.isObject(i)&&(i=JSON.stringify(i)),c.push(r(n)+"="+r(i))}))}),a=c.join("&")}if(a){var o=i.indexOf("#");-1!==o&&(i=i.slice(0,o)),i+=(-1===i.indexOf("?")?"?":"&")+a}return i};
},{"./../utils":"S1cf"}],"rj2i":[function(require,module,exports) {
"use strict";var t=require("./../utils");function e(){this.handlers=[]}e.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},e.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},e.prototype.forEach=function(e){t.forEach(this.handlers,function(t){null!==t&&e(t)})},module.exports=e;
},{"./../utils":"S1cf"}],"woEt":[function(require,module,exports) {
"use strict";var r=require("./../utils");module.exports=function(t,u,e){return r.forEach(e,function(r){t=r(t,u)}),t};
},{"./../utils":"S1cf"}],"V30M":[function(require,module,exports) {
"use strict";module.exports=function(t){return!(!t||!t.__CANCEL__)};
},{}],"M8l6":[function(require,module,exports) {
"use strict";var e=require("../utils");module.exports=function(t,r){e.forEach(t,function(e,o){o!==r&&o.toUpperCase()===r.toUpperCase()&&(t[r]=e,delete t[o])})};
},{"../utils":"S1cf"}],"YdsM":[function(require,module,exports) {
"use strict";module.exports=function(e,i,s,t,n){return e.config=i,s&&(e.code=s),e.request=t,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e};
},{}],"bIiH":[function(require,module,exports) {
"use strict";var r=require("./enhanceError");module.exports=function(e,n,o,t,u){var a=new Error(e);return r(a,n,o,t,u)};
},{"./enhanceError":"YdsM"}],"aS8y":[function(require,module,exports) {
"use strict";var t=require("./createError");module.exports=function(e,s,u){var a=u.config.validateStatus;u.status&&a&&!a(u.status)?s(t("Request failed with status code "+u.status,u.config,null,u.request,u)):e(u)};
},{"./createError":"bIiH"}],"dn2M":[function(require,module,exports) {
"use strict";var e=require("./../utils");module.exports=e.isStandardBrowserEnv()?{write:function(n,t,o,r,i,u){var s=[];s.push(n+"="+encodeURIComponent(t)),e.isNumber(o)&&s.push("expires="+new Date(o).toGMTString()),e.isString(r)&&s.push("path="+r),e.isString(i)&&s.push("domain="+i),!0===u&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};
},{"./../utils":"S1cf"}],"YZjV":[function(require,module,exports) {
"use strict";module.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)};
},{}],"a2Uu":[function(require,module,exports) {
"use strict";module.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e};
},{}],"KxkP":[function(require,module,exports) {
"use strict";var e=require("../helpers/isAbsoluteURL"),r=require("../helpers/combineURLs");module.exports=function(s,u){return s&&!e(u)?r(s,u):u};
},{"../helpers/isAbsoluteURL":"YZjV","../helpers/combineURLs":"a2Uu"}],"ZeD7":[function(require,module,exports) {
"use strict";var e=require("./../utils"),t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];module.exports=function(r){var i,o,n,s={};return r?(e.forEach(r.split("\n"),function(r){if(n=r.indexOf(":"),i=e.trim(r.substr(0,n)).toLowerCase(),o=e.trim(r.substr(n+1)),i){if(s[i]&&t.indexOf(i)>=0)return;s[i]="set-cookie"===i?(s[i]?s[i]:[]).concat([o]):s[i]?s[i]+", "+o:o}}),s):s};
},{"./../utils":"S1cf"}],"w7LF":[function(require,module,exports) {
"use strict";var t=require("./../utils");module.exports=t.isStandardBrowserEnv()?function(){var r,e=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");function a(t){var r=t;return e&&(o.setAttribute("href",r),r=o.href),o.setAttribute("href",r),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}return r=a(window.location.href),function(e){var o=t.isString(e)?a(e):e;return o.protocol===r.protocol&&o.host===r.host}}():function(){return!0};
},{"./../utils":"S1cf"}],"KRuG":[function(require,module,exports) {
"use strict";var e=require("./../utils"),r=require("./../core/settle"),t=require("./../helpers/cookies"),s=require("./../helpers/buildURL"),o=require("../core/buildFullPath"),n=require("./../helpers/parseHeaders"),a=require("./../helpers/isURLSameOrigin"),i=require("../core/createError");module.exports=function(u){return new Promise(function(l,d){var p=u.data,c=u.headers;e.isFormData(p)&&delete c["Content-Type"];var f=new XMLHttpRequest;if(u.auth){var h=u.auth.username||"",m=u.auth.password?unescape(encodeURIComponent(u.auth.password)):"";c.Authorization="Basic "+btoa(h+":"+m)}var w=o(u.baseURL,u.url);if(f.open(u.method.toUpperCase(),s(w,u.params,u.paramsSerializer),!0),f.timeout=u.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in f?n(f.getAllResponseHeaders()):null,t={data:u.responseType&&"text"!==u.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:e,config:u,request:f};r(l,d,t),f=null}},f.onabort=function(){f&&(d(i("Request aborted",u,"ECONNABORTED",f)),f=null)},f.onerror=function(){d(i("Network Error",u,null,f)),f=null},f.ontimeout=function(){var e="timeout of "+u.timeout+"ms exceeded";u.timeoutErrorMessage&&(e=u.timeoutErrorMessage),d(i(e,u,"ECONNABORTED",f)),f=null},e.isStandardBrowserEnv()){var R=(u.withCredentials||a(w))&&u.xsrfCookieName?t.read(u.xsrfCookieName):void 0;R&&(c[u.xsrfHeaderName]=R)}if("setRequestHeader"in f&&e.forEach(c,function(e,r){void 0===p&&"content-type"===r.toLowerCase()?delete c[r]:f.setRequestHeader(r,e)}),e.isUndefined(u.withCredentials)||(f.withCredentials=!!u.withCredentials),u.responseType)try{f.responseType=u.responseType}catch(T){if("json"!==u.responseType)throw T}"function"==typeof u.onDownloadProgress&&f.addEventListener("progress",u.onDownloadProgress),"function"==typeof u.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",u.onUploadProgress),u.cancelToken&&u.cancelToken.promise.then(function(e){f&&(f.abort(),d(e),f=null)}),p||(p=null),f.send(p)})};
},{"./../utils":"S1cf","./../core/settle":"aS8y","./../helpers/cookies":"dn2M","./../helpers/buildURL":"H6Qo","../core/buildFullPath":"KxkP","./../helpers/parseHeaders":"ZeD7","./../helpers/isURLSameOrigin":"w7LF","../core/createError":"bIiH"}],"pBGv":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"BXyq":[function(require,module,exports) {
var process = require("process");
var e=require("process"),t=require("./utils"),r=require("./helpers/normalizeHeaderName"),n={"Content-Type":"application/x-www-form-urlencoded"};function a(e,r){!t.isUndefined(e)&&t.isUndefined(e["Content-Type"])&&(e["Content-Type"]=r)}function i(){var t;return"undefined"!=typeof XMLHttpRequest?t=require("./adapters/xhr"):void 0!==e&&"[object process]"===Object.prototype.toString.call(e)&&(t=require("./adapters/http")),t}var o={adapter:i(),transformRequest:[function(e,n){return r(n,"Accept"),r(n,"Content-Type"),t.isFormData(e)||t.isArrayBuffer(e)||t.isBuffer(e)||t.isStream(e)||t.isFile(e)||t.isBlob(e)?e:t.isArrayBufferView(e)?e.buffer:t.isURLSearchParams(e)?(a(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):t.isObject(e)?(a(n,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};t.forEach(["delete","get","head"],function(e){o.headers[e]={}}),t.forEach(["post","put","patch"],function(e){o.headers[e]=t.merge(n)}),module.exports=o;
},{"./utils":"S1cf","./helpers/normalizeHeaderName":"M8l6","./adapters/xhr":"KRuG","./adapters/http":"KRuG","process":"pBGv"}],"uz6X":[function(require,module,exports) {
"use strict";var e=require("./../utils"),r=require("./transformData"),a=require("../cancel/isCancel"),t=require("../defaults");function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}module.exports=function(n){return s(n),n.headers=n.headers||{},n.data=r(n.data,n.headers,n.transformRequest),n.headers=e.merge(n.headers.common||{},n.headers[n.method]||{},n.headers),e.forEach(["delete","get","head","post","put","patch","common"],function(e){delete n.headers[e]}),(n.adapter||t.adapter)(n).then(function(e){return s(n),e.data=r(e.data,e.headers,n.transformResponse),e},function(e){return a(e)||(s(n),e&&e.response&&(e.response.data=r(e.response.data,e.response.headers,n.transformResponse))),Promise.reject(e)})};
},{"./../utils":"S1cf","./transformData":"woEt","../cancel/isCancel":"V30M","../defaults":"BXyq"}],"OHvn":[function(require,module,exports) {
"use strict";var e=require("../utils");module.exports=function(n,t){t=t||{};var r={},o=["url","method","data"],i=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function c(n,t){return e.isPlainObject(n)&&e.isPlainObject(t)?e.merge(n,t):e.isPlainObject(t)?e.merge({},t):e.isArray(t)?t.slice():t}function d(o){e.isUndefined(t[o])?e.isUndefined(n[o])||(r[o]=c(void 0,n[o])):r[o]=c(n[o],t[o])}e.forEach(o,function(n){e.isUndefined(t[n])||(r[n]=c(void 0,t[n]))}),e.forEach(i,d),e.forEach(a,function(o){e.isUndefined(t[o])?e.isUndefined(n[o])||(r[o]=c(void 0,n[o])):r[o]=c(void 0,t[o])}),e.forEach(s,function(e){e in t?r[e]=c(n[e],t[e]):e in n&&(r[e]=c(void 0,n[e]))});var f=o.concat(i).concat(a).concat(s),u=Object.keys(n).concat(Object.keys(t)).filter(function(e){return-1===f.indexOf(e)});return e.forEach(u,d),r};
},{"../utils":"S1cf"}],"OvAf":[function(require,module,exports) {
"use strict";var e=require("./../utils"),t=require("../helpers/buildURL"),r=require("./InterceptorManager"),o=require("./dispatchRequest"),s=require("./mergeConfig");function i(e){this.defaults=e,this.interceptors={request:new r,response:new r}}i.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[o,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},i.prototype.getUri=function(e){return e=s(this.defaults,e),t(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},e.forEach(["delete","get","head","options"],function(e){i.prototype[e]=function(t,r){return this.request(s(r||{},{method:e,url:t,data:(r||{}).data}))}}),e.forEach(["post","put","patch"],function(e){i.prototype[e]=function(t,r,o){return this.request(s(o||{},{method:e,url:t,data:r}))}}),module.exports=i;
},{"./../utils":"S1cf","../helpers/buildURL":"H6Qo","./InterceptorManager":"rj2i","./dispatchRequest":"uz6X","./mergeConfig":"OHvn"}],"mIKj":[function(require,module,exports) {
"use strict";function t(t){this.message=t}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,module.exports=t;
},{}],"tsWd":[function(require,module,exports) {
"use strict";var e=require("./Cancel");function n(n){if("function"!=typeof n)throw new TypeError("executor must be a function.");var o;this.promise=new Promise(function(e){o=e});var r=this;n(function(n){r.reason||(r.reason=new e(n),o(r.reason))})}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e;return{token:new n(function(n){e=n}),cancel:e}},module.exports=n;
},{"./Cancel":"mIKj"}],"X8jb":[function(require,module,exports) {
"use strict";module.exports=function(n){return function(t){return n.apply(null,t)}};
},{}],"wICU":[function(require,module,exports) {
"use strict";module.exports=function(o){return"object"==typeof o&&!0===o.isAxiosError};
},{}],"nUiQ":[function(require,module,exports) {
"use strict";var e=require("./utils"),r=require("./helpers/bind"),i=require("./core/Axios"),n=require("./core/mergeConfig"),u=require("./defaults");function o(n){var u=new i(n),o=r(i.prototype.request,u);return e.extend(o,i.prototype,u),e.extend(o,u),o}var l=o(u);l.Axios=i,l.create=function(e){return o(n(l.defaults,e))},l.Cancel=require("./cancel/Cancel"),l.CancelToken=require("./cancel/CancelToken"),l.isCancel=require("./cancel/isCancel"),l.all=function(e){return Promise.all(e)},l.spread=require("./helpers/spread"),l.isAxiosError=require("./helpers/isAxiosError"),module.exports=l,module.exports.default=l;
},{"./utils":"S1cf","./helpers/bind":"EDTP","./core/Axios":"OvAf","./core/mergeConfig":"OHvn","./defaults":"BXyq","./cancel/Cancel":"mIKj","./cancel/CancelToken":"tsWd","./cancel/isCancel":"V30M","./helpers/spread":"X8jb","./helpers/isAxiosError":"wICU"}],"dZBD":[function(require,module,exports) {
module.exports=require("./lib/axios");
},{"./lib/axios":"nUiQ"}],"zbzq":[function(require,module,exports) {

},{}],"A2T1":[function(require,module,exports) {
"use strict";require("regenerator-runtime/runtime");var t=n(require("konva")),e=n(require("query-string")),i=n(require("axios"));function n(t){return t&&t.__esModule?t:{default:t}}function a(t){return h(t)||o(t)||r(t)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(t,e){if(t){if("string"==typeof t)return u(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?u(t,e):void 0}}function o(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function h(t){if(Array.isArray(t))return u(t)}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function l(t,e,i,n,a,s,r){try{var o=t[s](r),h=o.value}catch(u){return void i(u)}o.done?e(h):Promise.resolve(h).then(n,a)}function c(t){return function(){var e=this,i=arguments;return new Promise(function(n,a){var s=t.apply(e,i);function r(t){l(s,n,a,r,o,"next",t)}function o(t){l(s,n,a,r,o,"throw",t)}r(void 0)})}}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,i){return e&&g(t.prototype,e),i&&g(t,i),t}require("./style.scss");var y=function(){function n(){d(this,n),this.controller=document.getElementById("controller"),this.container=document.getElementById("container"),this.viewer=document.getElementById("viewer"),this.addYoutubeBtn=document.getElementById("addYoutube"),this.youtubeId=document.getElementById("youtubeId"),this.pixelRatio=window.devicePixelRatio>1?2:1,this.stageWidth=this.container.getBoundingClientRect().width,this.stageHeight=this.container.getBoundingClientRect().height,this.maxLength=3e3,this.scaleBy=1.03,this.maxScale=5,this.minScale=.2,this.zoomAvailable=!1,this.defaultYoutubeWidth=480,this.defaultYoutubeHeight=360,this.state=[],this.playingVideo=[],this.playingVideoId=[],this.init(),this.initEventListener()}return f(n,[{key:"init",value:function(){this.stage=new t.default.Stage({container:this.container,width:this.stageWidth,height:this.stageHeight}),this.layer=new t.default.Layer,this.stage.add(this.layer),this.renewTransform();var e=localStorage.getItem("infScreen");e&&this.setState(JSON.parse(e))}},{key:"renewTransform",value:function(){this.transformer=new t.default.Transformer({boundBoxFunc:function(t,e){return e}}),this.layer.add(this.transformer)}},{key:"findYoutube",value:function(){var t=c(regeneratorRuntime.mark(function t(i,n){var s,r,o,h,u,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=this.youtubeId.value,r=e.default.parseUrl(s),!(o=r.query.v)){t.next=10;break}return t.next=5,this.getVideoInfo(o);case 5:h=t.sent,u=h.thumbnails.high.url,l={x:(i-this.stage.position().x)/this.stage.scaleX(),y:(n-this.stage.position().y)/this.stage.scaleY(),width:this.defaultYoutubeWidth/this.stage.scaleX(),height:this.defaultYoutubeHeight/this.stage.scaleY(),rotation:0,src:u,videoId:o},this.setState([].concat(a(this.state),[l])),this.youtubeId.value="";case 10:case"end":return t.stop()}},t,this)}));return function(e,i){return t.apply(this,arguments)}}()},{key:"getVideoInfo",value:function(){var t=c(regeneratorRuntime.mark(function t(e){var n,a,s,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return"https://www.googleapis.com/youtube/v3/videos",t.prev=1,t.next=4,(0,i.default)("https://www.googleapis.com/youtube/v3/videos",{method:"GET",params:{key:"AIzaSyD8Sgttgum-4m11HcR0UozmI9VYkdl0Z8Q",id:e,part:"snippet"}});case 4:return n=t.sent,a=n.data.items,s=a[0],r={title:s.snippet.title,thumbnails:s.snippet.thumbnails},t.abrupt("return",r);case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0);case 14:case"end":return t.stop()}},t,null,[[1,11]])}));return function(e){return t.apply(this,arguments)}}()},{key:"setState",value:function(t){this.state=t,localStorage.setItem("infScreen",JSON.stringify(t)),this.update()}},{key:"setStateWithoutUpdate",value:function(t){this.state=t,localStorage.setItem("infScreen",JSON.stringify(t))}},{key:"update",value:function(){var e=this;this.layer.destroyChildren(),this.renewTransform(),this.state.forEach(function(i,n){var a=i.x,s=i.y,r=i.width,o=i.height,h=i.rotation,u=i.src,l=i.videoId,c=new Image;c.onload=function(){var i=new t.default.Image({image:c,x:a,y:s,width:r,height:o,rotation:h,draggable:!0});e.layer.add(i),i.on("dragend",function(){e.state[n].x=i.x(),e.state[n].y=i.y(),e.setStateWithoutUpdate(e.state)}),i.on("transformend",function(){e.state[n].width=i.width()*i.scaleX(),e.state[n].height=i.height()*i.scaleY(),e.state[n].rotation=i.rotation(),e.setStateWithoutUpdate(e.state)}),i.on("click tap",function(){e.showVideo(l)})},c.src=u})}},{key:"showVideo",value:function(t){if(!this.playingVideoId.includes(t)){this.playingVideo.length>2&&(this.viewer.removeChild(this.playingVideo[0]),this.playingVideo.shift(),this.playingVideoId.shift());var e=document.createElement("iframe");e.id="ytplayer",e.type="text/html",e.width="100%",e.style.aspectRatio="16 / 9",e.src="https://www.youtube.com/embed/".concat(t,"?autoplay=0"),e.frameborder="0",this.playingVideo.push(e),this.playingVideoId.push(t),this.viewer.appendChild(e)}}},{key:"initEventListener",value:function(){var t=this;window.addEventListener("resize",this.resize.bind(this),!1),this.addYoutubeBtn.addEventListener("click",this.findYoutube.bind(this,120,120)),this.stage.on("wheel",function(e){e.evt.metaKey?t.zoom(e):t.scroll(e)}),this.stage.on("click tap",function(e){t.select(e)})}},{key:"select",value:function(t){t.target!==this.stage?this.transformer.nodes([t.target]):this.transformer.nodes([])}},{key:"zoom",value:function(t){var e=this.stage.scaleX(),i=this.stage.getPointerPosition(),n=(i.x-this.stage.x())/e,a=(i.y-this.stage.y())/e,s=0!==t.evt.deltaX?e:t.evt.deltaY>0?e*this.scaleBy:e/this.scaleBy;s=Math.max(this.minScale,Math.min(s,this.maxScale)),this.stage.scale({x:s,y:s});var r={x:i.x-n*s,y:i.y-a*s};this.stage.position(r)}},{key:"scroll",value:function(t){var e=t.evt.deltaX,i=t.evt.deltaY,n=-(this.maxLength-this.stage.width()),a=this.maxLength,s=Math.max(n,Math.min(this.layer.x()-e,a)),r=-(this.maxLength-this.stage.height()),o=this.maxLength,h=Math.max(r,Math.min(this.layer.y()-i,o));this.layer.position({x:s,y:h})}},{key:"resize",value:function(){this.stageWidth=this.container.getBoundingClientRect().width,this.stageHeight=this.container.getBoundingClientRect().height,this.stage&&(this.stage.width(this.stageWidth),this.stage.height(this.stageHeight))}}]),n}();window.onload=function(){new y};
},{"regenerator-runtime/runtime":"QVnC","konva":"UjKJ","query-string":"FvpG","axios":"dZBD","./style.scss":"zbzq"}]},{},["A2T1"], null)
//# sourceMappingURL=/app.928309b2.js.map